{"version":3,"sources":["Helpers.js","HomeButton.js","AppBar.js","ToolbarButton.js","MarxanDialog.js","LoadingDialog.js","MarxanTextField.js","LoginDialog.js","RegisterDialog.js","ResendPasswordDialog.js","Notification.js","Welcome.js","ToolsMenu.js","UserMenu.js","HelpMenu.js","UserSettingsDialog.js","ProfileDialog.js","MarxanTable.js","UsersDialog.js","AboutDialog.js","MenuItemWithButton.js","TargetIcon.js","LinearGauge.js","FeaturesList.js","SelectFeatures.js","InfoPanel.js","TransparencyControl.js","Swatch.js","LayerLegend.js","MapLegend.js","LogItem.js","Log.js","ResultsPanel.js","FeatureInfoDialog.js","ProjectsDialog.js","Metadata.js","SelectFieldMapboxLayer.js","PlanningUnitsDialog.js","SelectCostFeatures.js","FeaturesDialog.js","NewProjectDialog.js","NewProjectWizardDialog.js","ProjectsListDialog.js","MapContainer2.js","PlanningGridDialog.js","PlanningGridsDialog.js","NewPlanningGridDialog.js","FileUpload.js","ImportPlanningGridDialog.js","FeatureDialog.js","NewFeatureDialog.js","ImportFeaturesDialog.js","ImportFromWebDialog.js","CostsDialog.js","ImportCostsDialog.js","RunSettingsDialog.js","RendererSelector.js","ColorSelector.js","ClassificationDialog.js","MapContainer.js","ClumpingDialog.js","UploadFolder.js","UploadMarxanFiles.js","ImportProjectDialog.js","ImportMXWDialog.js","RunLogDialog.js","ServerDetailsDialog.js","AlertDialog.js","ChangePasswordDialog.js","IdentifyPopup.js","TargetDialog.js","ShareableLinkDialog.js","MetChart.js","CustomTooltip.js","GapAnalysisDialog.js","ResetDialog.js","UpdateWDPADialog.js","ImportGBIFDialog.js","App.js","registerServiceWorker.js","index.js","images/iucn.png","images/wcmc.png","images/mapbox_small.png","images/biopama_small.png","images/jrc_logo_color_small.png","constants.js"],"names":["isNumber","str","test","isValidTargetValue","value","getMaxNumberOfClasses","brew","colorCode","colorScheme","colorSchemes","Object","keys","filter","key","map","property","Number","reduce","a","b","Math","max","getArea","units","asHtml","scale","sf","addcommas","_value","toPrecision","toString","replace","_units","indexOf","substr","className","zoomToBounds","bounds","minLng","maxLng","fitBounds","padding","top","bottom","left","right","easing","num","HomeButton","tileset","this","getSource","_btn","document","createElement","title","type","onclick","zoom","bind","_container","appendChild","parentNode","removeChild","undefined","React","AppBar","props","state","adminMenuOpen","evt","openFeaturesDialog","Fragment","Toolbar","style","display","open","backgroundColor","height","onClick","openServerDetailsDialog","marxanServer","showUserMenu","user","icon","faBookOpen","openProjectsDialog","fontSize","faStar","faThLarge","openPlanningGridsDialog","width","infoPanelOpen","faArrowAltCircleLeft","toggleInfoPanel","resultsPanelOpen","faArrowAltCircleRight","toggleResultsPanel","faWrench","showToolsMenu","faQuestionCircle","showHelpMenu","Component","ToolbarButton","_style1","_style2","show","marginLeft","marginRight","minWidth","label","assign","overlayStyle","lineHeight","buttonStyle","MarxanDialog","searchText","window","helpLink","setState","target","searchTextChanged","searchTextChange","offsetX","rightX","offsetY","marginTop","cancelButton","showCancelButton","cancelLabel","primary","onCancel","disabled","cancelDisabled","okButton","hideOKButton","okLabel","onOk","okDisabled","contentStyle","contentWidth","onRequestClose","showOverlay","titleClassName","titleStyle","titleBarIcon","actions","children","position","showSearchBox","onChange","border","borderRadius","fontFamily","fontWeight","color","paddingLeft","clearSearch","faSearch","loading","showSpinner","openDocumentation","LoadingDialog","modal","MarxanTextField","inputStyle","floatingLabelFixed","LoginDialog","e","nativeEvent","selectServer","marxanServers","password","offline","corsEnabled","guestUserEnabled","id","floatingLabelText","underlineShow","menuItemStyle","labelStyle","name","item","text","primaryText","innerDivStyle","leftIcon","faUnlink","faLock","host","description","event","changeUserName","onKeyPress","handleKeyPress","changePassword","marxanClientReleaseVersion","RegisterDialog","validForm","email","validEmail","validateEmail","err","message","valid","String","toLowerCase","Error","c","newValue","errorText","createNewUser","ResendPasswordDialog","resendPassword","resending","changeEmail","Notification","faExclamationTriangle","paddingRight","faCloudDownloadAlt","faChalkboardTeacher","faNewspaper","dangerouslySetInnerHTML","__html","html","removeNotification","Welcome","checked","isInputChecked","saveOptions","openNewProjectDialog","notifications","visible","notificationsPanel","autoDetectWindowHeight","bodyStyle","faDraftingCompass","verticalAlign","faSync","resetNotifications","onCheck","toggleShowWelcomeScreen","ToolsMenu","openUsersDialog","hideToolsMenu","openRunLogDialog","openGapAnalysisDialog","openResetDialog","anchorEl","menuAnchor","desktop","onMouseLeave","listStyle","selectedMenuItemStyle","userRole","faUsers","faRunning","enable_reset","faHistory","faChartBar","metadata","pu_country","faBroom","cleanup","UserMenu","anchorOrigin","horizontal","vertical","targetOrigin","hideUserMenu","openUserSettingsDialog","marginBottom","faCog","openProfileDialog","faEdit","openChangePasswordDialog","faUserLock","logout","white","HelpMenu","CONSTANTS","DOCS_ROOT","hideHelpMenu","openAboutDialog","faInfoCircle","UserSettingsDialog","saveEnabled","options","payload","basemap","basemaps","changeBasemap","setOption","updateOptions","alias","paddingBottom","RadioButton","defaultSelected","userData","REPORTUNITS","setReportUnit","iconStyle","ProfileDialog","updated","updateUser","EMAIL","closeProfileDialog","updateState","defaultValue","NAME","floatingLabelShrinkStyle","floatingLabelFocusStyle","ROLE","MarxanTable","filteredData","data","startsWith","some","searchColumns","includes","substring","hasOwnProperty","dataFiltered","filterData","pageSize","length","showPagination","minRows","columns","USER_ROLES","UsersDialog","selectedUser","oldRole","newRole","changeRole","deleteUser","desc","Date","slice","users","closeDialog","changeUser","Header","accessor","headerStyle","Cell","row","original","menuStyle","underlineStyle","sortMethod","sortDate","getTrProps","rowInfo","column","background","textContent","faTrashAlt","_delete","toggleEnableGuestUser","AboutDialog","href","wdpaAttribution","rel","src","iucn","alt","wcmc","biopama_small","jrc_logo_color_small","mapbox_small","MenuItemWithButton","TargetIcon","editing","localTargetValue","startEditing","target_value","getElementById","interestFeature","focus","select","updateTargetValue","targetStatus","fontColor","blue300","size","userSelect","alignItems","justifyContent","onBlur","stopEditing","LinearGauge","alwaysShowPercent","showUnprotectedPercent","targetAsLine","protectedWidth","protectedHidden","scaleFactor","scaledWidth","targetPxOffset","round","protected_percent","protNum","percentageProtectedText","targetShortfallWidth","unprotectedWidth","opacity","smallLinearGauge","useFeatureColors","FeaturesList","feature","openFeatureMenu","targetIcon","updateFeature","altKey","feature_puid_layer_loaded","toggleFeaturePUIDLayer","feature_layer_loaded","toggleFeatureLayer","List","maxHeight","maxheight","overflow","features","pu_area","protected_area","target_area","leftAvatar","simple","secondaryText","itemClick","rightIconButton","touch","tooltipPosition","iconClick","grey400","SelectFeatures","openTargetDialog","showTargetButton","faCrosshairs","leftmargin","OLDVERSION","InfoPanel","editingProjectName","editingDescription","showPlanningGrid","showProtectedAreas","showCosts","showStatuses","prevProps","prevState","snapshot","project","DESCRIPTION","keyCode","blur","renameProject","then","renameDescription","puEditing","stopPuEditSession","startPuEditSession","changeIucnCategory","IUCN_CATEGORIES","costname","costnames","openCostsDialog","changeCostname","_","loadCostsLayer","checkedString","toggleProjectPrivacy","stopProcess","pid","togglePULayer","togglePALayer","toggleCostsLayer","toggleStatuses","push","zDepth","startEditingProjectName","Tabs","contentContainerStyle","activeTab","onActive","project_tab_active","startEditingDescription","CREATEDATE","owner","PRIVATE","features_tab_active","pu_tab_active","pu_alias","faSave","startStopPuEditSession","cursor","faEraser","clearManualEdits","preprocessing","IUCN_CATEGORY","faShareAlt","getShareableLink","showRunSettingsDialog","secondary","runMarxan","TransparencyControl","showSlider","old_opacity","changeOpacity","onMouseEnter","mouseEnter","mouseLeave","faEyeSlash","faEye","toggleLayer","sliderStyle","margin","Swatch","lineWidth","fillColor","shape","fill","stroke","strokeColor","strokeWidth","LayerLegend","layer","subLayers","paint","forEach","items","index","separator","range","renderItems","setSymbologyBtn","setSymbology","topMargin","MapLegend","breaks","numClasses","getNumClasses","colorSchemeLength","numClassesArray","Array","apply","call","classesToShow","suffix","legendLabel","layers","planning_grid_shape","PLANNING_UNIT_NAME","costLayers","visibleLayers","COSTS_LAYER_NAME","nonFeatureLegendItems","LAYER_TYPE_FEATURE_LAYER","LAYER_TYPE_SUMMED_SOLUTIONS","getSummedSolution","openClassificationDialog","LAYER_TYPE_PLANNING_UNITS_COST","minColor","maxColor","min","costsLoading","LAYER_TYPE_PLANNING_UNITS_STATUS","puLayer","PU_LAYER_NAME","puStatusLayer","STATUS_LAYER_NAME","PU_STATUS_DEFAULT","PU_STATUS_LOCKED_IN","PU_STATUS_LOCKED_OUT","LAYER_TYPE_PROTECTED_AREAS","featureLayers","sort","featureLegendItems","featurePUIDLayers","LAYER_TYPE_FEATURE_PLANNING_UNIT_LAYER","featurePUIDLegendItems","lineColor","Log","status","info","faCheckCircle","timestamp","toLocaleString","messages","error","LogItem","runtime","ResultsPanel","showClipboard","selectedSolution","runtimeStr","objDiv","scrollTop","scrollHeight","solutions","resetSolution","startTimer","stopTimer","string","pad","join","timer","setInterval","minutes","floor","seconds","finalTime","str_pad_left","clearInterval","solution","loadSolution","relatedTarget","node","body","createTextRange","moveToElementText","getSelection","selection","createRange","selectNodeContents","removeAllRanges","addRange","console","warn","selectText","execCommand","changeSolution","Run_Number","activeResultsTab","legend_tab_active","solutions_tab_active","processing","thisRef","instance","noDataText","log_tab_active","copyLog","clearLog","FeatureInfoDialog","updateFeatureValue","reportUnits","getHTML","hint","currentTarget","innerHTML","obj","alert","getAreaHTML","contentEditable","suppressContentEditableWarning","FEATURE_PROPERTIES","old_version","showForNew","showForOld","renderKeyCell","renderValueCell","ProjectsDialog","selectedProject","deleteProject","oldVersion","getAllFeatures","loadAndClose","loadProject","importProjectAnchor","showImportProjectPopover","cloneProject","exportProject","url","location","openImportProjectDialog","openImportMXWDialog","createdate","tableColumns","renderName","renderTitle","renderDate","projects","load","changeProject","unauthorisedMethods","faPlusCircle","_new","importProjectPopoverOpen","hideImportProjectPopover","Metadata","validName","setName","setDescription","changeName","changeDescription","multiLine","rows","SelectFieldMapboxLayer","envelope","getLatLngLikeFromWKT","addLayerToMap","feature_class_name","changeItem","wkt","returnVal","parse","require","coordinates","west","east","mapboxlayername","request","mapboxUser","registry","MBAT_PUBLIC","parseUrlExists","res","statusCode","log","getStyle","removeLayer","removeSource","addSource","addLayer","selectedValue","PlanningUnitsDialog","planning_unit_grids_received","mapboxgl","Map","container","mapContainer","center","ref","el","pu","planning_unit_grids","SelectCostFeatures","selectedFeature","ListItem","defaultProps","disableTouchRipple","disableFocusRipple","iconButtonElement","rightIconMenu","selectedCosts","FeaturesDialog","previousRow","filteredRows","deleteFeature","newFeatureAnchor","showNewFeaturePopover","importFeatureAnchor","showImportFeaturePopover","openImportFeaturesDialog","openImportFromWebDialog","initialiseDigitising","openImportGBIFDialog","addingRemovingFeatures","shiftKey","selectedIds","getFeaturesBetweenRows","selectFeatures","clickFeature","first","last","splice","thisRow","idx1","idx2","allFeatures","toggleSelectionState","selectedFeatureIds","selectAllFeatures","unselectFeature","feature_metadata","previewFeature","source","creation_date","created_by","preview","renderSource","renderCreatedBy","renderPreview","getTdProps","newFeaturePopoverOpen","hideNewFeaturePopover","_newByDigitising","importFeaturePopoverOpen","hideImportFeaturePopover","_openImportFeaturesDialog","_openImportFromWebDialog","faCircle","clearAllFeatures","NewProjectDialog","handleNext","stepIndex","handlePrev","steps","loadingFeatures","finished","featuresDialogOpen","JSON","stringify","gotoStart","selected","closeFeaturesDialog","removeFeature","addFeature","ids","arr","Promise","resolve","reject","createNewProject","planning_grid_name","maxWidth","textAlign","getPlanningUnitGrids","changePU","openImportPlanningGridDialog","updateSelectedFeatures","NewProjectWizardDialog","domainEnabled","stepComplete","iso3","country","domain","areakm2","worldEcosystems","allSpecies","endemicSpecies","endangeredSpecies","includeExistingPAs","iucn_category","complete","countries","has_marine","changeDomain","name_iso31","getComplete","DOMAINS","SHAPES","AREAKM2S","createNewNationalProject","dropDownStyle","changeCountry","changeShape","changeAreaKm2","toggleWorldEcosystems","toggleAllSpecies","toggleEndemicSpecies","toggleEndangeredSpecies","toggleIncludeExistingPAs","closeNewProjectWizardDialog","ProjectsListDialog","heading","MapContainer2","attributionControl","on","outlineColor","planning_grid_metadata","tilesetid","getTilesetMetadata","catch","setSnackBar","remove","PlanningGridDialog","expanded","getProjectList","areaTD","_area","colSpan","planning_unit_count","aoi_id","expand","PlanningGridsDialog","selectedPlanningGrid","deletePlanningGrid","openNewPlanningGridDialog","exportPlanningGrid","planningGrid","previewPlanningGrid","isNaN","planningGrids","changePlanningGrid","openImportDialog","NewPlanningGridDialog","createNewPlanningUnitGrid","response","changeIso3","FileUpload","active","destFolder","files","filename","fileUpload","setFilename","parameter","htmlFor","accept","fileMatch","ImportPlanningGridDialog","zipFilename","_description","ex","mandatory","setzipFilename","FeatureDialog","area","NewFeatureDialog","createNewFeature","setAddToProject","addToProject","INITIAL_STATE","fieldnames","splitField","ImportFeaturesDialog","unzipShapefile","shapefile","rootfilename","importFeatures","getShapefileFieldnames","deleteShapefile","_disabled","resetFieldnames","changeSplitField","sourceType","endpoint","srs","featureTypes","featureType","validendpoint","SOURCE_TYPES","ImportFromWebDialog","fetch","xml","getCapabilities","xmlDoc","DOMParser","parseFromString","getWFSInfo","featureTypesElements","getElementsByTagName","getFeatureEndpoint","changeSourceType","changeEndpoint","autoWidth","changeFeatureType","CostsDialog","selectedCost","cost","deleteCost","_data","closeCostsDialog","changeCost","openImportCostsDialog","UNIFORM_COST_NAME","costs_filename","ImportCostsDialog","addCost","resetState","closeImportCostsDialog","deleteCostFileThenClose","setCostsFilename","RunSettingsDialog","updateEnabled","renderEditable","runParams","openParametersDialog","updateRunParams","cellInfo","float","onFocus","setUpdateEnabled","showClumpingDialog","RendererSelector","changeValue","values","toUpperCase","concat","selectionRenderer","handleChange","ColorSelector","getSwatch","disableHighlight","divWidth","colorDivs","borderColor","_c","RENDERERS","COLORCODES","NUMCLASSES","TOPCLASSES","ClassificationDialog","dataBreaks","x","summaryStats","strokeDasharray","dataKey","tick","offset","angle","changeColorCode","renderer","COLORCODE","changeRenderer","CLASSIFICATION","changeNumClasses","changeShowTopClasses","MapContainer","resultsRendered","mapCentre","mapZoom","interactive","RESULTS_LAYER_NAME","setCenter","setMapZoom","renderResults","paintProperty","setLayoutProperty","getLayer","setPaintProperty","oulineColor","setZoom","selectBlm","blmValue","ClumpingDialog","blmValues","blmMin","blmMax","blmChanged","createProjectGroupAndRun","getBlmValues","increment","i","parseFloat","isFinite","setBlmValue","rerunProjects","clumpingRunning","map0_paintProperty","parseBlmValue","map1_paintProperty","map2_paintProperty","map3_paintProperty","map4_paintProperty","changeBlmMin","changeBlmMax","UploadFolder","folderUploadText","filesListed","directory","webkitdirectory","_addDirectory","UploadMarxanFiles","setZipFilename","setPlanningGridName","ImportProjectDialog","importProject","ImportMXWDialog","importMXWProject","RunLogDialog","selectedRun","runningJobs","runLogs","runningLogs","stopMarxan","refreshRunLogs","clearRunLogs","getRunLogs","run","faTimesCircle","endtime","s","mins","secs","runTimeFormatted","renderUser","renderProject","renderEnded","renderRuntime","renderStatus","changeSelectedRun","stopRun","faRedoAlt","ServerDetailsDialog","newServerSoftware","server_version","SERVER_VERSION","newWDPAVersion","showUpdateWDPADialog","system","processor_count","disk_space","ram","wdpa_version","planning_grid_units_limit","shutdowntime","renderWithIcon","AlertDialog","ChangePasswordDialog","currentPassword","newPassword1","newPassword2","checkPassword","PASSWORD","passwordsDontMatch","setCurrentPassword","setNewPassword1","setNewPassword2","TAB_STYLE","textTransform","IdentifyPopup","xy","restartTimer","amount","properties","desig","iucn_cat","wdpaid","clearTimeout","hideIdentifyPopup","cancelTimer","ms","setTimeout","timerCancelled","mouseLeavePopup","y","identifyPlanningUnits","puData","puTab","renderAmount","featuresTab","identifyFeatures","renderFeatureName","renderFeatureDescription","protectedAreasTab","identifyProtectedAreas","renderPAName","renderPADesignation","renderPAIUCNCategory","renderPALink","tabs","onlyPA","tabItemContainerStyle","changeTab","TargetDialog","validTarget","validateTarget","_validTarget","updateTargetValueForFeatures","ShareableLinkDialog","navigator","clipboard","writeText","shareableLinkUrl","faClipboard","copyToClipboard","MetChart","rounded","current_protected_percent","toFixed","country_area","current_protected_area","titleText","total_area","showCountryArea","colors","cx","cy","isAnimationActive","startAngle","endAngle","innerRadius","outerRadius","entry","_color","clickable","CustomTooltip","_alias","GapAnalysisDialog","showChart","amount_under_protection_property","total_amount_property","sum","val","mean","gapAnalysis","stats","projectFeatures","item2","_feature_class_name","targetsMetCount","charts","score","getRepresentationScore","closeGapAnalysisDialog","textAnchor","dx","content","onToggle","toggleView","paddingTop","toggled","ResetDialog","UpdateWDPADialog","WDPA","latest_version","metadataUrl","updateWDPA","ImportGBIFDialog","clicked","importGBIFData","selectedItem","gbifSpeciesSuggest","suggestions","scientificName","changeSearchText","MARXAN_CLIENT_VERSION","packageJson","version","timers","App","usersDialogOpen","alertDialogOpen","featureMenuOpen","profileDialogOpen","aboutDialogOpen","helpDialogOpen","importProjectDialogOpen","UserSettingsDialogOpen","welcomeDialogOpen","registerDialogOpen","clumpingDialogOpen","settingsDialogOpen","projectsDialogOpen","openInfoDialogOpen","importGBIFDialogOpen","newProjectDialogOpen","newProjectWizardDialogOpen","shareableLinkDialogOpen","classificationDialogOpen","resendPasswordDialogOpen","NewPlanningGridDialogOpen","importPlanningGridDialogOpen","ProjectsListDialogOpen","changePasswordDialogOpen","importFeaturesDialogOpen","importFromWebDialogOpen","serverDetailsDialogOpen","planningGridsDialogOpen","planningGridDialogOpen","updateWDPADialogOpen","NewFeatureDialogOpen","importMXWDialogOpen","gapAnalysisDialogOpen","featureDialogOpen","runLogDialogOpen","resetDialogOpen","costsDialogOpen","importCostsDialogOpen","targetDialogOpen","notificationsOpen","toolsMenuOpen","userMenuOpen","helpMenuOpen","projectList","loggedIn","shareableLink","popup_point","snackbarOpen","snackbarMessage","tilesets","uploading","identifyVisible","pa_layer_visible","currentFeature","featureDatasetFilename","planning_units","logMessages","projectListDialogTitle","projectListDialogHeading","lng","lat","protected_area_intersections","searchParams","URLSearchParams","search","has","getGlobalVariables","openShareableLink","_selectServer","get","classyBrew","MARXAN_REGISTRY","json","registryData","accessToken","MAPBOX_BASEMAPS","initialiseServers","MARXAN_SERVERS","serverData","find","server","switchToGuestUser","validateUser","params","timeout","TIMEOUT","jsonp","promise","checkForErrors","ERRORS_PAGE","method","formData","withCredentials","SEND_CREDENTIALS","post","msgCallback","ws","WebSocket","websocketEndpoint","onmessage","onopen","onerror","onclose","wasClean","showSnackbar","networkError","responseIsTimeoutOrEmpty","serverError","isServerError","isError","trace","msg","warning","logMessage","removeMessageFromLog","newFeatureCreated","resetPID","_messages","_message","silent","hosts","hostname","protocol","port","getAllServerCapabilities","getServerCapabilities","promises","all","TORNADO_PATH","controller","AbortController","signal","timeoutId","abort","credentials","ok","statusText","PERMITTED_DOMAINS","ENABLE_GUEST_USER","machine","MACHINE","client_version","MARXAN_SERVER_VERSION","NODE","processor","PROCESSOR","PROCESSOR_COUNT","RAM","release","RELEASE","SYSTEM","VERSION","WDPA_VERSION","PLANNING_GRID_UNITS_LIMIT","DISK_FREE_SPACE","SHUTDOWNTIME","ENABLE_RESET","SERVER_NAME","SERVER_DESCRIPTION","servername","history","replaceState","wdpa_vector_tile_layer","setWDPAVectorTilesLayerName","normalisedData","puids","_get","login","LASTPROJECT","dismissedNotifications","BASEMAP","setBasemap","resetResults","resendEmail","closeResendPasswordDialog","usersCopy","deleteProjectsForUser","role","_marxanServer","enabled","updateProjectParameter","NOTIFICATIONS","addNotifications","showForRoles","CLIENT_VERSION","_notifications","allowedForRole","notDismissed","notExpired","expires","d","notification","_notification","dismissNotification","parseNotifications","append","parameters","removeKeys","FormData","appendToFormData","_post","newUserData","updateProjectParams","array","runParameters","MAPBOX_USER","getResults","feature_preprocessing","previousIucnCategory","initialiseInterestFeatures","getPlanningUnitsCostData","tmpArr","outFeatures","projectFeature","getArrayItem","addFeatureAttributes","getSelectedFeatureIds","resetRun","cost_data","hideFeatureLayer","runMarxanResponse","closeRegisterDialog","interest_features","target_values","spf_values","getProjects","_ws","wsMessageCallback","newName","newDesc","private","startLogging","resetProtectedAreas","updateSpecFile","updatePuFile","updatePuvsprFile","startMarxanJob","runFinished","marxanStopped","spf","preprocessAllFeatures","closeFeatureMenu","preprocessFeature","preprocessed","pu_count","occurs_in_planning_grid","runCompleted","ssoln","renderSolution","summary","updateProtectedAmount","mvbest","mvData","mvbestItemIndex","findIndex","mvItem","setFeaturesState","uploadId","createImportProject","importZippedShapefileAsPu","uploadFiles","upgradeProject","formattedDate","getDate","getMonth","getFullYear","getHours","getMinutes","getSeconds","OUTPUTDIR","pollMapbox","file","filepath","webkitRelativePath","split","refreshFeatures","getSolution","mv","paintProperties","getPaintProperties","projectName","clump","total","number","count","sampleSize","sample","ssolnLength","getssolncount","ceil","arrays","classification","getssolnSample","setSeries","brewCopy","newBrewColorScheme","setColorCode","setNumClasses","classify","getBreaks","rendererStateUpdated","setRenderer","fill_color_expression","initialiseFillColorExpression","fill_outline_color_expression","visibleValue","classifyData","getColorInRange","attribute","expression","STATUS_LAYER_LINE_WIDTH","COST_COLORS","setLayerMetadata","showLayer","pt","queryRenderedFeatures","mapLoaded","mapError","mapClick","mapStyleChanged","addControl","ScaleControl","NavigationControl","mapboxDrawControls","MapboxDraw","displayControlsDefault","controls","polygon","trash","defaultMode","updateMapCentreAndZoom","polygonDrawn","getCenter","getZoom","sourceId","featureLayerIds","getLayers","LAYER_TYPE_PLANNING_UNITS","clickedFeatures","getRenderedFeatures","point","planningUnitFeatures","getFeaturesByLayerStartsWith","puid","getPUData","sourceLayers","sourceLayer","from","Set","updateLegend","layout","visibility","joinArrays","pu_data","arr1","arr2","leftId","rightId","outputArr","matchingItem","arr2item","styleUrl","TileJSON","sources","esri","tilesurl","tiles","scheme","tilejson","format","tileInfo","maxzoom","getValidStyle","loadMapStyle","addWDPASource","addWDPALayer","addPlanningGridLayers","provider","getESRIStyle","styleJson","MAPBOX_STYLE_PREFIX","setStyle","diff","createMap","getMetadata","removePlanningGridLayers","tilesetId","response2","PLANNING_UNIT_SOURCE_NAME","addMapLayer","RESULTS_LAYER_OPACITY","PU_COSTS_LAYER_OPACITY","resultsLayer","PU_LAYER_OPACITY","removeMapLayer","attribution","tilesUrl","WDPA_SOURCE_NAME","WDPA_LAYER_NAME","WDPA_FILL_LAYER_OPACITY","wdpaLayer","mapLayer","beforeLayer","symbollayers","layerid","layername","getLayoutProperty","layerId","layerTypes","hideLayer","pu_tab_inactive","showHideLayerTypes","renderPuEditLayer","getCanvas","onClickRef","moveStatusUp","onContextMenu","resetStatus","off","updatePuDatFile","getPuidsFromIucnCategory","updatePlanningUnits","param_name","changeStatus","direction","getStatusLevel","next_status","getNextStatusLevel","statuses","removePuidFromArray","addPuidToArray","status_level","PLANNING_UNIT_STATUSES","getPlanningUnitsByStatus","getStatusPosition","nextStatus","removePuidsFromArray","appPuidsToPlanningUnits","new_array","openPlanningGridDialog","newPlanningGridCreated","closeNewPlanningGridDialog","closeImportPlanningGridDialog","deletePlanningUnitGrid","getProjectsForPlanningGrid","showProjectListDialog","records","mapbox_layer_name","uploadid","MBAT","clearMapboxTimer","_timer","showClearSelectAll","finaliseDigitising","zipname","newProps","element","callback","removeControl","openNewFeatureDialog","digitisedFeatures","deleteGapAnalysis","newFeatures","openFeatureDialog","zipfile","spiltfield","uploadIds","promiseArray","q","coords","geometry","coordinate","closeNewFeatureDialog","initialiseNewFeature","addNewFeature","featuresCopy","getProjectsForFeature","_deleteFeature","removeFeatureFromAllFeatures","getFeatures","_features","existingIds","getFeatureIds","newIds","addedIds","layerName","FEATURE_LAYER_OPACITY","FEATURE_PLANNING_GRID_LAYER_OPACITY","line_color_expression","unselectItem","nums","extent","_type","preventDefault","getCountries","getUsers","startPollingRunLogs","stopPollingRunLogs","runGapAnalysis","openProjectsListDialog","iucnCategory","_metadata","renderPAGridIntersections","iucnCategories","getIndividualIucnCategories","filterExpr","setFilter","hidePALegend","showPALegend","retValue","intersections_by_category","getIntersections","getPuidsFromNormalisedData","preprocessProtectedAreas","intersections","clashingPuids","previousPuids","newPuids","getNewPuids","oldPuids","_iucn_categories","downloadUrl","closeWDPAUpdateDialog","BOUNDNAME","currentFiles","preprocessBoundaryLengths","deleteProjects","resetPaintProperties","runProjects","projectNames","projectsRun","loadOtherSolution","newRunParams","runlogTimer","openShareableLinkDialog","isChecked","COSTS","forceReload","renderPuCostLayer","_costnames","closeResetDialog","openRegisterDialog","openResendPasswordDialog","SHOWWELCOMESCREEN","closeWelcomeDialog","openNewProjectWizardDialog","closeUserSettingsDialog","closeUsersDialog","closeAboutDialog","USEFEATURECOLORS","hideResults","closeInfoDialog","closeProjectsDialog","closeImportMXWDialog","closeNewProjectDialog","importPlanningUnitGrid","uploadFileToFolder","closeFeatureDialog","closeImportFeaturesDialog","setNewFeatureDatasetFilename","closeImportFromWebDialog","importFeaturesFromWeb","closeImportGBIFDialog","closePlanningGridsDialog","closePlanningGridDialog","closeProjectsListDialog","uploadFileToProject","closeRunSettingsDialog","closeClassificationDialog","hideClumpingDialog","closeImportDialog","resetServer","closeRunLogDialog","closeServerDetailsDialog","openWDPAUpdateDialog","closeChangePasswordDialog","closeAlertDialog","closeSnackbar","openInfoDialog","removeFromProject","zoomToFeature","preprocessSingleFeature","closeTargetDialog","closeShareableLinkDialog","isLocalhost","Boolean","match","registerValidSW","swUrl","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","ReactDOM","render","URL","process","origin","addEventListener","headers","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker","module","exports","freeze"],"mappings":"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","file":"static/js/main.a2509a75.chunk.js","sourcesContent":["/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from 'react';\n// returns a boolean if it is a valid number\nexport function isNumber(str) {\n    var pattern = /^\\d+$/;\n    return pattern.test(str);\n}\nexport function isValidTargetValue(value) {\n    if (isNumber(value)) {\n        if ((value <= 100) && (value >= 0)) {\n            return true;\n        }\n    }\n    return false;\n}\nexport function getMaxNumberOfClasses(brew, colorCode) {\n    //get the color scheme\n    let colorScheme = brew.colorSchemes[colorCode];\n    //get the names of the properties for the colorScheme\n    let properties = Object.keys(colorScheme).filter(function(key) { return (key !== 'properties'); });\n    //get them as numbers\n    let numbers = properties.map((property) => { return Number(property) });\n    //get the maximum number of colors in this scheme\n    let colorSchemeLength = numbers.reduce(function(a, b) {\n        return Math.max(a, b);\n    });\n    return colorSchemeLength;\n}\nexport function getArea(value, units, asHtml, sf = 3, addcommas = true) {\n    let scale;\n    switch (units) {\n        case 'm2':\n            scale = 1;\n            break;\n        case 'Ha':\n            scale = 0.0001;\n            break;\n        case 'Km2':\n            scale = 0.000001;\n            break;\n        default:\n            // code\n    }\n    let _value = Number((value * scale).toPrecision(sf)); \n    _value = (addcommas && _value > 1000) ? _value.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\") : _value.toString();\n    let _units = (units.indexOf('2') !== -1) ? <span>{units.substr(0, units.indexOf('2'))}<span className='superscript'>2</span></span> : <span>{units}</span>;\n    if (asHtml){\n        return <span>{_value} {_units}</span>;\n    }else{\n        return _value + \" \" + units;\n    }\n}\n//zooms the passed map to the passed bounds\nexport function zoomToBounds(map, bounds) {\n    //if the bounds span the dateline, then we can force the map to fit the bounds of a polygon from [[179,minLat],[180,maxLat]]\n    let minLng = (bounds[0] === -180) ? 179 : bounds[0];\n    let maxLng = bounds[2];\n    if (bounds[0] < 0 && bounds[2] > 0) {\n        //if the bounds are from -1xx to 1xx then see if the range is bigger from -1xx to 1xx or from 1xx to -1xx\n        let lngSpanAcrossMeridian = (bounds[2]) - bounds[0];\n        let lngSpanAcrossDateline = (bounds[0] + 180) + (180 - bounds[2]);\n        //if the lng range is smaller across the dateline, then set the minLng and maxLng\n        if (lngSpanAcrossMeridian > lngSpanAcrossDateline) {\n            minLng = bounds[2];\n            maxLng = bounds[0] + 360;\n        }\n    }\n    map.fitBounds([minLng, bounds[1], maxLng, bounds[3]], { padding: { top: 10, bottom: 10, left: 10, right: 10 }, easing: (num) => { return 1; } });\n}\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport * as React from 'react';\nimport {zoomToBounds } from './Helpers.js';\n\nclass HomeButton extends React.Component {\n    zoom() {\n        let tileset = this.map.getSource(\"marxan_planning_units_source\");\n        if (tileset && tileset.bounds) zoomToBounds(this.map, tileset.bounds);\n    }\n    onAdd(map){\n        this.map = map;\n        this._btn = document.createElement(\"button\");\n        this._btn.className = \"mapboxgl-ctrl-icon homeIcon\";\n        this._btn.title = \"Zoom to the extent of the project\";\n        this._btn.type = \"button\";\n        this._btn[\"aria-label\"] = \"Toggle Pitch\";\n        this._btn.onclick = this.zoom.bind(this);\n        this._container = document.createElement(\"div\");\n        this._container.className = \"mapboxgl-ctrl mapboxgl-ctrl-group\";\n        this._container.appendChild(this._btn);\n        return this._container;\n\t}\n\tonRemove(map){\n        this._container.parentNode.removeChild(this._container);\n        this.map = undefined;\n\t}\n\tgetDefaultPosition(){\n\t    return 'bottom-right';\n\t}\n}\n\nexport default HomeButton;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from 'react';\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\nimport {faBookOpen} from '@fortawesome/free-solid-svg-icons';\nimport {faStar} from '@fortawesome/free-solid-svg-icons';\nimport {faWrench} from '@fortawesome/free-solid-svg-icons';\nimport {faThLarge} from '@fortawesome/free-solid-svg-icons';\nimport {faArrowAltCircleLeft} from '@fortawesome/free-solid-svg-icons';\nimport {faArrowAltCircleRight} from '@fortawesome/free-solid-svg-icons'; \nimport {faArrowAltCircleLeft as a} from '@fortawesome/free-regular-svg-icons';\nimport {faArrowAltCircleRight as b} from '@fortawesome/free-regular-svg-icons';\nimport {faQuestionCircle} from '@fortawesome/free-solid-svg-icons';\nimport {Toolbar, ToolbarGroup} from 'material-ui/Toolbar';\n\nclass AppBar extends React.Component {\n\tconstructor (props){\n\t\tsuper(props);\n\t\tthis.state = {adminMenuOpen: false};\n\t}\n\t//opens the features dialog without the ability to add/remove features (i.e. different from the dialog that is opened from a project)\n  openFeaturesDialog(evt) {\n    this.props.openFeaturesDialog(false);\n }\n  render() {\n    return (\n      <React.Fragment>\n        <Toolbar style={{display: (this.props.open) ? 'block' : 'none', backgroundColor: 'rgb(0, 188, 212)', height: '62px', padding: '2px 10px 0px 10px'}} className={'appBar'}>\n          <div>\n            <div className={'marxanServer'} title={'Click to open the Server Details window'} onClick={this.props.openServerDetailsDialog}>{this.props.marxanServer}</div>\n            <div className={'username'} title={'Click to open the User menu'} onClick={this.props.showUserMenu}>{this.props.user}</div>\n          </div>\n        \t<ToolbarGroup>\n            <FontAwesomeIcon icon={faBookOpen} onClick={this.props.openProjectsDialog} title=\"Projects\" className={'appBarIcon'} style={{fontSize: '20px'}}/>\n            <FontAwesomeIcon icon={faStar} onClick={this.openFeaturesDialog.bind(this)} title=\"Features\" className={'appBarIcon'} style={{fontSize: '20px'}}/>\n            <FontAwesomeIcon icon={faThLarge} onClick={this.props.openPlanningGridsDialog.bind(this)} title=\"Planning grids\" className={'appBarIcon'} style={{fontSize: '20px'}}/>\n            <span style={{width:'16px'}}/>\n            <FontAwesomeIcon style={{fontSize: '20px'}} icon={(this.props.infoPanelOpen) ? faArrowAltCircleLeft : a} onClick={this.props.toggleInfoPanel} title={(this.props.infoPanelOpen) ? \"Hide the project window\" : \"Show the project window\"} className={'appBarIcon'}/>\n            <FontAwesomeIcon style={{fontSize: '20px'}} icon={(this.props.resultsPanelOpen) ? faArrowAltCircleRight : b} onClick={this.props.toggleResultsPanel} title={(this.props.resultsPanelOpen) ? \"Hide the results window\" : \"Show the results window\"} className={'appBarIcon'} />\n            <span style={{width:'16px'}}/>\n            <FontAwesomeIcon icon={faWrench} onClick={this.props.showToolsMenu} title={\"Tools and analysis\"} className={'appBarIcon'} style={{fontSize: '19px'}}/>\n            <FontAwesomeIcon icon={faQuestionCircle} onClick={this.props.showHelpMenu} title={\"Help and support\"} className={'appBarIcon'} style={{fontSize: '19px'}}/>\n          </ToolbarGroup>\n        </Toolbar>\n      </React.Fragment>\n      );\n }\n}\n\nexport default AppBar;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from 'react';\nimport RaisedButton from 'material-ui/RaisedButton';\n\nclass ToolbarButton extends React.Component {\n\trender() {\n\t\t//merge any user passed style\n\t\tlet _style1 = (this.props.style) ? this.props.style : {};\n\t\tlet _style2 = { display: (this.props.show !== false) ? 'inline-block' : 'none', marginLeft:'4px', marginRight:'4px',padding: '0px',minWidth: '30px',width: (this.props.label) ? '' :'24px', height: '24px'};\n\t\tObject.assign(_style1, _style2);\n\t\treturn (\n\t\t\t<RaisedButton \n\t\t\t\t{...this.props}  \n\t\t\t\tstyle={_style1}\n\t\t\t\toverlayStyle={{lineHeight:'24px',height:'24px'}}\n\t\t\t\tbuttonStyle={{lineHeight:'24px',height:'24px'}} \n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default ToolbarButton;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from 'react';\nimport Dialog from 'material-ui/Dialog';\nimport ToolbarButton from './ToolbarButton';\nimport Sync from 'material-ui/svg-icons/notification/sync'; \nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport {faQuestionCircle} from '@fortawesome/free-regular-svg-icons';\nimport {faSearch} from '@fortawesome/free-solid-svg-icons';\n \n//properties can be:\n//contentWidth - the width of the content area\n//offsetX - the distance from the left edge (mutually exclusive with rightX)\n//rightX - the distance from the right edge (mutually exclusive with offsetX)\n//offsetY - the distance from the top\n//onOk - fired when the OK button is clicked\n//onCancel - fired when the Cancel button is clicked or when the dialog needs to be closed\n//showCancelButton - set to true to show the cancel button\n//actions - an array of components to add to the actions array in the dialog\n//helpLink - a relative url to the bookmark in the user documentation that describes the particular dialog box\n//showSearchBox - true to show a search box\n\nlet DOCS_ROOT = \"https://docs.marxanweb.org/\";\n\nclass MarxanDialog extends React.Component {\n\tconstructor(props){\n\t\tsuper(props);\n\t\tthis.state = {searchText: \"\"};\n\t}\n\topenDocumentation(){\n\t\twindow.open(DOCS_ROOT + this.props.helpLink);\n\t}\n\tsearchTextChange(evt){\n\t\tthis.setState({searchText: evt.target.value});\n\t\tif (this.props.searchTextChanged) this.props.searchTextChanged(evt.target.value);\n\t}\n\tclearSearch(){\n\t\tthis.searchTextChange({target: {value: ''}});\n\t}\n\trender() {\n\t\t//if the offsetX or rightX is set, then make this into a style\n\t\tlet offsetX = (this.props.offsetX) ? {marginLeft: this.props.offsetX + 'px', width: '400px'} : (this.props.rightX) ? {right: this.props.rightX + 'px', width: '400px', left:null} : {};\n\t\tlet offsetY = (this.props.offsetY) ? {marginTop: this.props.offsetY - 60 + 'px'} : {};\n\t\tlet style = Object.assign(offsetX, offsetY);\n\t\tlet cancelButton = (this.props.showCancelButton) ? <ToolbarButton label={(this.props.cancelLabel) ? this.props.cancelLabel : \"Cancel\"} primary={true} onClick={this.props.onCancel} disabled={this.props.cancelDisabled}/> : null;\n\t\tlet okButton = (this.props.hideOKButton) ?  null : <ToolbarButton label={(this.props.okLabel) ? this.props.okLabel : \"OK\"} primary={true} onClick={this.props.onOk} disabled={this.props.okDisabled}/>;\n\t\tlet contentStyle = (this.props.contentStyle) ? this.props.contentStyle : (this.props.contentWidth) ? {width: this.props.contentWidth + 'px'} : {};\n\t\treturn (\n\t\t\t<Dialog      \n\t\t\t\t{...this.props} \n\t\t\t\tonRequestClose={this.props.onCancel}\n\t\t\t\toverlayStyle={(this.props.showOverlay) ? {display:'block'} : {display:'none'}}\n\t\t\t\ttitleClassName={'dialogTitleStyle'}\n\t\t\t\tcontentStyle={contentStyle} \n\t\t\t\ttitleStyle={(this.props.titleBarIcon) ? {marginLeft: '27px'} : null}\n\t\t\t\tclassName={'dialogGeneric'}\n\t\t\t\tstyle={style} \n\t\t\t\tactions={[\n\t\t\t\t\tthis.props.actions,\n\t\t\t\t\tcancelButton, \n\t\t\t\t\tokButton,\n\t\t\t\t]} \n\t\t\t\tchildren={[\n\t\t\t\t\t(this.props.titleBarIcon) ? <FontAwesomeIcon icon={this.props.titleBarIcon} style={{position: 'absolute', top: '18px', left: '24px'}} key=\"k1\"/> : null,\n\t\t\t\t\t(this.props.showSearchBox) ? \n\t\t\t\t\t\t<div style={{right: '70px',position: \"absolute\",top: \"13px\"}} title={\"search\"} key=\"k27\">\n\t\t\t\t\t\t\t<input value={this.state.searchText} onChange={this.searchTextChange.bind(this)} style={{border: \"1px solid rgba(0,0,0,0.1)\", borderRadius: \"30px\", width:\"90px\", height: \"22px\",fontFamily:\"Roboto, sans-serif\",fontSize:\"12px\", fontWeight:\"400\",color:\"rgba(0,0,0,0.7)\",paddingLeft:\"10px\"}}/>\n\t\t\t\t\t\t\t<FontAwesomeIcon onClick={this.clearSearch.bind(this)} icon={faSearch} className={'appBarIcon docs'} style={{fontSize: \"13px\",position: \"absolute\",top: \"1px\",right: \"2px\", color: (this.state.searchText === \"\") ? \"rgba(0, 0, 0, 0.6)\" : \"rgb(255, 64, 129)\"}} title={(this.state.searchText === \"\") ? 'Search' : 'Clear search'}/>\n\t\t\t\t\t\t</div> : null,\n\t\t\t\t\t<Sync className='spin' style={{display: (this.props.loading || this.props.showSpinner) ? \"inline-block\" : \"none\", color: 'rgb(255, 64, 129)', position: 'absolute', top: '15px', right: '41px',height:\"22px\",width:\"22px\"}} key={\"spinner\"}/>, this.props.children,\n\t\t\t\t\t(this.props.helpLink) ? <FontAwesomeIcon icon={faQuestionCircle} onClick={this.openDocumentation.bind(this)} title={\"Open documentation for this window\"} className={'appBarIcon docs'} style={{fontSize: '18px'}} key=\"helpLink\"/> : null\n\t\t\t\t]}\n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default MarxanDialog;","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from 'react';\nimport MarxanDialog from './MarxanDialog';\n\nclass LoadingDialog extends React.Component {\n\trender() {\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<MarxanDialog \n\t\t\t\t\t{...this.props} \n\t\t\t\t\tshowOverlay={true}\n\t\t\t\t\tshowCancelButton={false}\n\t\t\t\t\thideOKButton={true}\n\t\t\t\t\tcontentWidth={358}\n\t\t\t\t\ttitle=\"Loading..\" \n\t\t\t\t\tmodal={true} \n\t\t\t\t\t/>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nexport default LoadingDialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from 'react';\nimport TextField from 'material-ui/TextField';\n\nclass MarxanTextField extends React.Component {\n    render() {\n        //if a style is passed in, then override the default style\n        let style = (this.props.style) ? this.props.style : {display:'block'};\n        return (\n            <TextField \n                {...this.props}\n            \tinputStyle={{fontSize:'12px'}} \n            \tstyle={style} \n            \tfloatingLabelFixed={true}\n        \t/>\n        );\n    }\n}\n\nexport default MarxanTextField;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faUnlink } from '@fortawesome/free-solid-svg-icons';\nimport { faLock } from '@fortawesome/free-solid-svg-icons';\nimport MarxanDialog from './MarxanDialog';\nimport MarxanTextField from './MarxanTextField';\nimport SelectField from 'material-ui/SelectField';\nimport MenuItem from 'material-ui/MenuItem';\n\nclass LoginDialog extends React.Component {\n\thandleKeyPress(e) {\n\t\tif (e.nativeEvent.key === \"Enter\") this.props.onOk(); \n\t} \n\tselectServer(evt, key, value){\n\t\tthis.props.selectServer(this.props.marxanServers[key]);\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<MarxanDialog \n\t\t\t\t\t{...this.props} \n\t\t\t\t\tshowOverlay={true}\n\t\t\t\t\tokDisabled={(!this.props.user || !this.props.password || !this.props.marxanServer||(this.props.marxanServer&&this.props.marxanServer.offline)) ? true : false} \n\t\t\t\t\tokLabel={(this.props.marxanServer&&!this.props.marxanServer.offline&&!this.props.marxanServer.corsEnabled&&this.props.marxanServer.guestUserEnabled) ? \"Login (Read-Only)\" : \"Login\"}\n\t\t\t\t\tshowCancelButton={true}\n\t\t\t\t\tcancelLabel={\"Register\"}\n\t\t\t\t\tcancelDisabled={((this.props.marxanServer===undefined) || (this.props.marxanServer&&this.props.marxanServer.offline) || (this.props.marxanServer&&!this.props.marxanServer.corsEnabled)) ? true : false} \n\t\t\t\t\thelpLink={\"user.html#log-in-window\"}\n\t\t\t\t\tcontentWidth={358}\n\t\t\t\t\toffsetY={200}\n\t\t\t\t\tchildren={[\n\t\t\t\t\t<div key=\"21\">\n\t\t\t\t\t\t<SelectField  \n\t\t\t\t\t\t\tid='SelectMarxanServer'\n\t\t\t\t\t\t\tfloatingLabelText={'Marxan Server'} \n\t\t\t\t\t\t\tfloatingLabelFixed={true} \n\t\t\t\t\t\t\tunderlineShow={false}\n\t\t\t\t\t\t\tmenuItemStyle={{fontSize:'12px'}}\n\t\t\t\t\t\t\tlabelStyle={{fontSize:'12px'}} \n\t\t\t\t\t\t\tstyle={{width:'320px'}}\n\t\t\t\t\t\t\tvalue={this.props.marxanServer&&this.props.marxanServer.name} \n\t\t\t\t\t\t\tonChange={this.selectServer.bind(this)}\n\t\t\t\t\t\t\tchildren= {this.props.marxanServers.map((item)=> {\n\t\t\t\t\t\t\t\t//if the server is offline - just put that otherwise: if CORS is enabled for this domain then it is read/write otherwise: if the guest user is enabled then put the domain and read only otherwise: put the domain and guest user disabled\n\t\t\t\t\t\t\t\tlet text = (item.offline) ? item.name  : (item.corsEnabled) ? item.name : (item.guestUserEnabled) ? item.name : item.name + \" (Guest user disabled)\";\n\t\t\t\t\t\t\t\treturn  <MenuItem \n\t\t\t\t\t\t\t\t\tvalue={item.name} \n\t\t\t\t\t\t\t\t\tkey={item.name} \n\t\t\t\t\t\t\t\t\tprimaryText={text} \n\t\t\t\t\t\t\t\t\tstyle={{fontSize:'12px'}}\n\t\t\t\t\t\t\t\t\tinnerDivStyle={{padding:'0px 10px 0px 52px'}}\n\t\t\t\t\t\t\t\t\tleftIcon={(item.offline) ? <FontAwesomeIcon style={{height: '12px', marginTop:'5px'}} icon={faUnlink}/> : (item.corsEnabled) ? null : <FontAwesomeIcon style={{height: '12px', marginTop:'5px'}} icon={faLock}/>}\n\t\t\t\t\t\t\t\t\ttitle={(item.offline) ? item.host + \" (offline)\\n\" + item.description  : (item.corsEnabled) ? item.host + \"\\n\" + item.description : (item.guestUserEnabled) ? item.host + \" (read-only)\\n\" + item.description : item.host + \" (guest user disabled)\\n\" + item.description}\n\t\t\t\t\t\t\t\t/>;\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div style={{height:'124px'}} id=\"logindiv\" key=\"logindiv\">\n\t\t\t\t\t\t\t<MarxanTextField id='TextUsername' style={{marginTop:'-14px'}} floatingLabelText=\"Username\" onChange = {(event, value)=>this.props.changeUserName(value)} value={this.props.user} disabled = {(this.props.loading||(this.props.marxanServer&&!this.props.marxanServer.corsEnabled)) ? true : false} onKeyPress={this.handleKeyPress.bind(this)}/>\n\t\t\t\t\t\t\t<MarxanTextField id='TextPassword' floatingLabelText=\"Password\" type=\"password\" onChange = {(event, value)=>this.props.changePassword(value)} value={this.props.password} disabled = {this.props.loading||(this.props.marxanServer&&!this.props.marxanServer.corsEnabled) ? true : false} onKeyPress={this.handleKeyPress.bind(this)}/>\n\t\t\t\t\t\t\t{/*<span onClick={this.props.openResendPasswordDialog.bind(this)} className=\"forgotLink\" title=\"Click to resend password\">Forgot</span>*/}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div style={{position: 'absolute', bottom: '4px', fontSize: '11px'}}>{this.props.marxanClientReleaseVersion}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t]} \n\t\t\t\t\tonRequestClose={this.props.onOk} \n\t\t\t\t\ttitle=\"Login\" \n\t\t\t\t\tmodal={true} \n\t\t\t\t\t/>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nexport default LoginDialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from 'react';\nimport MarxanDialog from './MarxanDialog';\nimport MarxanTextField from './MarxanTextField';\n\nclass RegisterDialog extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = { validForm: false, user: undefined, name: undefined, email: undefined, validEmail: true};\n\t}\n\t//\n\tcreateNewUser() {\n\t\t//check the required FIELDS\n\t\ttry {\n\t\t\tthis.validateEmail();\n\t\t}\n\t\t//any errors will not create a new user\n\t\tcatch (err) {\n\t\t\tswitch (err.message) {\n\t\t\t\tdefault:\n\t\t\t\t\t// code\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\t//create a new user\n\t\tthis.props.onOk(this.state.user, this.state.password, this.state.name, this.state.email);\n\t}\n\n\tvalidateEmail() {\n\t\tvar re = /^(([^<>()\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\t\tlet valid = re.test(String(this.state.email).toLowerCase());\n\t\tthis.setState({ validEmail: valid });\n\t\tif (!valid) {\n\t\t\tthrow new Error(\"Invalid email address\");\n\t\t}\n\t}\n\n\trender() {\n\t\tlet c = [<div key=\"RegisterDialogDiv\">\n\t\t\t\t\t<MarxanTextField floatingLabelText=\"Username\" onChange = {(event,newValue) => this.setState({user:newValue})}/>\n\t\t\t\t\t<MarxanTextField floatingLabelText=\"Password\" type=\"password\" onChange = {(event,newValue) => this.setState({password:newValue})}/>\n\t\t\t\t\t<MarxanTextField floatingLabelText=\"Full name\" onChange = {(event,newValue) => this.setState({name:newValue})}/>\n\t\t\t\t\t<MarxanTextField floatingLabelText=\"Email address\" errorText={this.state.validEmail ?  '' : \"Invalid email address\"} onChange = {(event,newValue) => this.setState({email:newValue})}/>\n\t\t\t\t</div>];\n\t\treturn (\n\t\t\t<MarxanDialog \n\t\t\t\t{...this.props} \n\t\t\t\tcontentWidth={358}\n\t\t\t\tonOk={this.createNewUser.bind(this)}\n\t\t\t\tokDisabled={!(this.state.user && this.state.password && this.state.name && this.state.email) || this.props.loading} \n\t\t\t\tshowCancelButton={true}\n\t\t\t\tcancelDisabled={this.props.loading} \n\t\t\t\thelpLink={\"user.html#new-user-registration\"}\n\t\t\t\ttitle=\"Register\" \n\t\t\t\tchildren={c} \n\t\t\t\tonRequestClose={this.props.onCancel} \n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default RegisterDialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from 'react';\nimport MarxanDialog from './MarxanDialog';\nimport MarxanTextField from './MarxanTextField';\n\nclass ResendPasswordDialog extends React.Component {\n\n\thandleKeyPress(e) {\n\t\tif (e.nativeEvent.key === \"Enter\") this.props.resendPassword();\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<MarxanDialog \n\t\t\t\t\t{...this.props} \n\t\t\t\t\tcontentWidth={358}\n\t\t\t\t\tshowCancelButton={true}\n\t\t\t\t\tokDisabled={!this.props.email || this.props.loading}\n\t\t\t\t\tcancelDisabled={this.props.resending}\n\t\t\t\t\ttitle=\"Resend password\" \n\t\t\t\t\tchildren={[<div key=\"resendDiv\">\n\t\t\t\t\t\t<MarxanTextField floatingLabelText=\"email address\" onChange={(event, value)=>this.props.changeEmail(value)}  value={this.props.email} className='loginUserField' disabled = {this.props.loading} onKeyPress={this.handleKeyPress.bind(this)}/>\n\t\t\t\t</div>]}\n\t\t\t\t\tonRequestClose={this.props.onCancel} \n\t\t\t\t/>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nexport default ResendPasswordDialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faExclamationTriangle } from '@fortawesome/free-solid-svg-icons';\nimport { faChalkboardTeacher } from '@fortawesome/free-solid-svg-icons';\nimport { faCloudDownloadAlt } from '@fortawesome/free-solid-svg-icons';\nimport { faNewspaper } from '@fortawesome/free-solid-svg-icons';\n\nclass Notification extends React.Component {\n\trender() {\n\t\tvar icon;\n\t\tswitch (this.props.type) {\n\t\t\tcase 'Hardware Issue':\n\t\t\t\ticon = <FontAwesomeIcon icon={faExclamationTriangle} style={{color:'red', paddingRight:'5px',fontSize:'18px'}}/>;\n\t\t\t\tbreak;\n\t\t\tcase 'Data Update':\n\t\t\tcase 'Software Update':\n\t\t\t\ticon = <FontAwesomeIcon icon={faCloudDownloadAlt} style={{color:'rgba(255,0,0,0.7)', paddingRight:'5px',fontSize:'18px'}}/>;\n\t\t\t\tbreak;\n\t\t\tcase 'Training':\n\t\t\t\ticon = <FontAwesomeIcon icon={faChalkboardTeacher} style={{paddingRight:'5px',fontSize:'18px'}}/>;\n\t\t\t\tbreak;\n\t\t\tcase 'News':\n\t\t\t\ticon = <FontAwesomeIcon icon={faNewspaper} style={{paddingRight:'5px',fontSize:'18px'}}/>;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\ticon = null;\n\t\t\t\t// code\n\t\t}\n\t\treturn (\n\t\t\t<div className={\"notification\"}>\n\t\t\t\t<div className={\"notificationType\"} title={this.props.type}>{icon}<span dangerouslySetInnerHTML={{__html: this.props.html}} className={'notificationText'}></span><span className={\"removeNotification\"} onClick={this.props.removeNotification} title={\"Dismiss\"}>x</span></div>\n\t\t    </div>\n\t\t);\n\t}\n}\n\nexport default Notification;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from \"react\";\nimport MarxanDialog from \"./MarxanDialog\";\nimport Notification from './Notification.js';\nimport FlatButton from 'material-ui/FlatButton';\nimport ToolbarButton from './ToolbarButton';\nimport Checkbox from 'material-ui/Checkbox';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faSync } from '@fortawesome/free-solid-svg-icons';\nimport { faDraftingCompass } from '@fortawesome/free-solid-svg-icons';\nclass Welcome extends React.Component {\n    constructor(props) {\n      super(props);\n      this.state = { checked: true };\n    }\n    toggleShowWelcomeScreen(evt, isInputChecked) {\n      this.setState({ checked: isInputChecked });\n    }\n    onOk() {\n      this.props.saveOptions({ \"SHOWWELCOMESCREEN\": this.state.checked });\n      this.props.onOk();\n    }\n    openNewProjectDialog() {\n      this.onOk();\n      this.props.openNewProjectDialog();\n    }\n    render() {\n        //get the visible notifications\n        let notifications = this.props.notifications && this.props.notifications.filter(item => item.visible);\n        notifications = notifications.map((item) => {\n          return <Notification html={item.html} type={item.type} key={item.id} removeNotification={this.props.removeNotification.bind(this, item)}></Notification>;\n        });\n        let notificationsPanel = <div className={\"notifications\"}>\n\t        {notifications}\n\t        <div className={\"notificationPointer\"}></div>\n\t    </div>;\n        return (\n            <MarxanDialog\n        {...this.props}\n        contentWidth={768}\n        offsetY={80}\n        title=\"Welcome\"\n        helpLink={\"user.html#welcome\"}\n        onOk={this.onOk.bind(this)}\n        showCancelButton={false}\n\t\t\t\tautoDetectWindowHeight={false}\n\t\t\t\tbodyStyle={{ padding:'0px 24px 0px 24px'}}\n        children={\n          <React.Fragment key={'welcomeKey'}>\n            <div className={'welcomeContent'}>\n                <div className={'tabTitle'}>What do you want to do?</div>\n                <div className={'task'}>\n                  <div className={'taskItem'}>\n                    <ToolbarButton icon={<FontAwesomeIcon icon={faDraftingCompass}/>}  title={\"Design a protected area network\"} onClick={this.openNewProjectDialog.bind(this)} className={\"resetNotifications\"}/>\n                    <span>Create a new protected area network for a country</span>\n                  </div>\n                  <div className={'taskItem'}>\n                    <ToolbarButton icon={<FontAwesomeIcon icon={faDraftingCompass}/>}  title={\"Extend a protected area network\"} onClick={this.openNewProjectDialog.bind(this)} className={\"resetNotifications\"}/>\n                    <span>Extend an existing protected area network for a country</span>\n                  </div>\n                  <div className={'taskItem'}>\n                    <ToolbarButton icon={<FontAwesomeIcon icon={faDraftingCompass}/>}  title={\"Do a gap analysis\"} onClick={this.openNewProjectDialog.bind(this)} className={\"resetNotifications\"}/>\n                    <span>Do a national gap analysis</span>\n                  </div>\n                </div>\n                <div style={{verticalAlign:'middle'}}>\n                    <FlatButton icon={<FontAwesomeIcon icon={faSync}/>}  title={\"Reset notifications\"} onClick={this.props.resetNotifications} style={{minWidth:'24px',height:'24px',lineHeight:'24px',color:'rgba(0,0,0,0.67)',position:'absolute',bottom:'10px'}}/>\n                  </div>\n                  <div className={'notifications'}>\n                    {notificationsPanel}\n                  </div>\n\t\t\t\t\t  <div className=\"welcomeToolbar\">\n\t\t\t\t\t\t  <Checkbox label=\"Show at startup\" style={{fontSize:'12px'}} checked={this.state.checked} onCheck={this.toggleShowWelcomeScreen.bind(this)} className={'showAtStartupChk'}/>\n            </div>\n            </div>\n          </React.Fragment>\n        }\n      />\n    );\n  }\n}\n\nexport default Welcome;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from 'react';\nimport Menu from 'material-ui/Menu';\nimport MenuItem from 'material-ui/MenuItem';\nimport Popover from 'material-ui/Popover';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faUsers } from '@fortawesome/free-solid-svg-icons';\nimport { faRunning } from '@fortawesome/free-solid-svg-icons';\nimport { faChartBar } from '@fortawesome/free-solid-svg-icons';\nimport { faHistory } from '@fortawesome/free-solid-svg-icons';\nimport { faBroom } from '@fortawesome/free-solid-svg-icons';\n\nclass ToolsMenu extends React.Component {\n\topenUsersDialog() {\n\t\tthis.props.openUsersDialog();\n\t\tthis.props.hideToolsMenu();\n\t}\n\topenRunLogDialog() {\n\t\tthis.props.openRunLogDialog();\n\t\tthis.props.hideToolsMenu();\n\t}\n\topenGapAnalysisDialog() {\n\t\tthis.props.openGapAnalysisDialog();\n\t\tthis.props.hideToolsMenu();\n\t}\n\topenResetDialog() {\n\t\tthis.props.openResetDialog();\n\t\tthis.props.hideToolsMenu();\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<React.Fragment> \n\t          <Popover open={this.props.open} anchorEl={this.props.menuAnchor} onRequestClose={this.props.hideToolsMenu}>\n\t            <Menu desktop={true} onMouseLeave={this.props.hideToolsMenu} menuItemStyle={{backgroundColor:'rgb(0, 188, 212)', color:'white'}} listStyle={{width:'120px',backgroundColor:'rgb(0, 188, 212)'}} selectedMenuItemStyle={{color:'rgb(24,24,24)'}}>\n\t              <MenuItem style={{display: (this.props.userRole === 'Admin') ? 'inline-block' : 'none'}} leftIcon={<FontAwesomeIcon style={{fontSize: '20px'}} icon={faUsers} color={'white'}/>} onClick={this.openUsersDialog.bind(this)} title={\"Manage Users\"}>Users</MenuItem>\n\t              <MenuItem leftIcon={<FontAwesomeIcon style={{fontSize: '20px'}} icon={faRunning} color={'white'}/>} onClick={this.openRunLogDialog.bind(this)} title={(this.props.userRole === 'Admin') ? \"View Run Log and stop runs\" : \"View Run Log\"}>Run log</MenuItem>\n\t              <MenuItem style={{display: (this.props.userRole === 'Admin' && this.props.marxanServer.enable_reset) ? 'inline-block' : 'none'}} leftIcon={<FontAwesomeIcon style={{fontSize: '20px'}} icon={faHistory} color={'white'}/>} onClick={this.openResetDialog.bind(this)} title={\"Reset database\"}>Reset</MenuItem>\n\t              <MenuItem style={{display: (this.props.userRole !== 'ReadOnly') ? 'inline-block' : 'none'}} leftIcon={<FontAwesomeIcon style={{fontSize: '20px'}} icon={faChartBar} color={'white'}/>} onClick={this.openGapAnalysisDialog.bind(this)} title={\"Gap Analysis\"} disabled={this.props.metadata.pu_country===null}>{(this.props.metadata.pu_country===null) ? 'Gap Analysis (not available)' : 'Gap Analysis'}</MenuItem>\n\t              <MenuItem style={{display: (this.props.userRole === 'Admin') ? 'inline-block' : 'none'}} leftIcon={<FontAwesomeIcon style={{fontSize: '20px'}} icon={faBroom} color={'white'}/>} onClick={this.props.cleanup} title={\"Cleanup server\"}>Cleanup server</MenuItem>\n\t            </Menu>\n\t          </Popover>   \n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nexport default ToolsMenu;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from 'react';\nimport Menu from 'material-ui/Menu'; \nimport MenuItem from 'material-ui/MenuItem';\nimport Popover from 'material-ui/Popover';\nimport LogOut from 'material-ui/svg-icons/action/exit-to-app';\nimport {white} from 'material-ui/styles/colors';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faCog } from '@fortawesome/free-solid-svg-icons';\nimport { faEdit } from '@fortawesome/free-solid-svg-icons';\nimport { faUserLock } from '@fortawesome/free-solid-svg-icons';\n\nclass UserMenu extends React.Component { \n\trender() { \n\t\treturn (\n\t\t\t<React.Fragment> \n\t\t\t\t<Popover\n\t\t\t\t\topen={this.props.open} \n\t\t\t\t\tanchorEl={this.props.menuAnchor}\n\t\t\t\t\tanchorOrigin={{horizontal: 'left', vertical: 'bottom'}}\n\t\t\t\t\ttargetOrigin={{horizontal: 'left', vertical: 'top'}}\n\t\t\t\t\tonRequestClose={this.props.hideUserMenu}\n\t\t\t\t>\n\t\t\t\t\t<Menu desktop={true} onMouseLeave={this.props.hideUserMenu} menuItemStyle={{backgroundColor:'rgb(0, 188, 212)', color:'white'}} listStyle={{width:'120px',backgroundColor:'rgb(0, 188, 212)'}} selectedMenuItemStyle={{color:'rgb(24,24,24)'}}>\n\t\t\t\t\t\t{/*<MenuItem primaryText={this.props.user + \" (\" + this.props.userRole + \")\"} style={{marginLeft:'40px'}}/>*/}\n\t\t\t\t\t\t<MenuItem style={{display: (this.props.userRole !== \"ReadOnly\") ? 'block' : 'none'}} primaryText=\"Settings\" onClick={this.props.openUserSettingsDialog.bind(this)} leftIcon={<FontAwesomeIcon style={{fontSize: '20px', marginBottom: '7px'}} icon={faCog} color={'white'}/>}/>\n\t\t\t\t\t\t<MenuItem style={{display: (this.props.userRole !== \"ReadOnly\") ? 'block' : 'none'}} primaryText=\"Profile\" onClick={this.props.openProfileDialog} leftIcon={<FontAwesomeIcon style={{fontSize: '20px', marginBottom: '7px'}} icon={faEdit} color={'white'}/>}/>\n\t\t\t\t\t\t<MenuItem style={{display: (this.props.userRole !== \"ReadOnly\") ? 'block' : 'none'}} primaryText=\"Change password\" onClick={this.props.openChangePasswordDialog} leftIcon={<FontAwesomeIcon style={{fontSize: '20px', marginBottom: '7px'}} icon={faUserLock} color={'white'}/>}/>\n\t\t\t\t\t\t<MenuItem primaryText=\"Log out\" onClick={this.props.logout.bind(this)} leftIcon={<LogOut color={white}/>}/> \n\t\t\t\t\t</Menu>\n\t\t\t\t</Popover>\n\t\t\t</React.Fragment>\n\t\t); \n\t}\n}\n\nexport default UserMenu;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from 'react';\nimport CONSTANTS from './constants';\nimport Menu from 'material-ui/Menu';\nimport MenuItem from 'material-ui/MenuItem';\nimport Popover from 'material-ui/Popover';\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\nimport {faQuestionCircle} from '@fortawesome/free-solid-svg-icons';\nimport {faInfoCircle} from '@fortawesome/free-solid-svg-icons';\n\nclass HelpMenu extends React.Component {\n\topenDocumentation(){\n\t\twindow.open(CONSTANTS.DOCS_ROOT);\n\t}\n\n  render() {\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<Popover\n\t\t\t\topen={this.props.open} \n\t\t\t\tanchorEl={this.props.menuAnchor}\n\t\t\t\tanchorOrigin={{horizontal: 'left', vertical: 'bottom'}}\n\t\t\t\ttargetOrigin={{horizontal: 'left', vertical: 'top'}}\n\t\t\t\tonRequestClose={this.props.hideHelpMenu}\n\t\t\t\t>\n\t\t\t\t<Menu desktop={true} onMouseLeave={this.props.hideHelpMenu} menuItemStyle={{backgroundColor:'rgb(0, 188, 212)', color:'white'}} listStyle={{width:'120px',backgroundColor:'rgb(0, 188, 212)'}} selectedMenuItemStyle={{color:'rgb(24,24,24)'}} width={'102px'}>\n\t\t\t\t\t<MenuItem primaryText=\"Documentation\" onClick={this.openDocumentation.bind(this)} leftIcon={<FontAwesomeIcon style={{height: '18px', marginTop:'4px',fontSize: '18px'}} icon={faQuestionCircle} color={'white'}/>}/>\n\t\t\t\t\t<MenuItem primaryText=\"About\" onClick={this.props.openAboutDialog} leftIcon={<FontAwesomeIcon style={{height: '18px', marginTop:'4px',fontSize: '18px'}} icon={faInfoCircle} color={'white'}/>}/>\n\t\t\t\t</Menu>\n\t\t\t</Popover>\n\t\t</React.Fragment>\n\t);\n  }\n}\n\nexport default HelpMenu;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from 'react';\nimport MarxanDialog from './MarxanDialog';\nimport SelectField from 'material-ui/SelectField';\nimport MenuItem from 'material-ui/MenuItem';\nimport { RadioButton, RadioButtonGroup } from 'material-ui/RadioButton';\n\nclass UserSettingsDialog extends React.Component {\n        constructor(props){\n                super(props);\n                this.state = {saveEnabled: false};\n                this.options = {}; \n        }\n        setOption(key, value){\n                this.setState({saveEnabled: true});\n                this.options[key] = value;\n                this.props.saveOptions(this.options);\n        }\n        updateOptions(){\n                this.props.onOk();\n        }\n        changeBasemap(event, key, payload){\n                var basemap = this.props.basemaps[key];\n                this.props.changeBasemap(basemap);    \n                this.setOption(\"BASEMAP\", basemap.name);\n        }\n        toggleUseFeatureColors(evt, isInputChecked){\n        \tthis.setOption(\"USEFEATURECOLORS\", isInputChecked);\n        }\n        toggleShowWelcomeScreen(evt, isInputChecked){\n                this.setOption(\"SHOWWELCOMESCREEN\", isInputChecked);\n        }\n        setReportUnit(event, value){\n                this.setOption(\"REPORTUNITS\", value);\n        }\n        render() {\n                return (\n                        <MarxanDialog \n                                {...this.props} \n                                contentWidth={370}\n                                offsetY={80}\n                                showCancelButton={false}\n                                onOk={this.updateOptions.bind(this)}\n                                helpLink={\"user.html#user-settings\"}\n                                title=\"Settings\" \n                                children={\n                                        <div key=\"k14\">\n                                                <SelectField \n                                                        floatingLabelText={'Basemap style'} \n                                                        floatingLabelFixed={true} \n                                                        underlineShow={false}\n                                                        menuItemStyle={{fontSize:'12px'}}\n                                                        labelStyle={{fontSize:'12px'}} \n                                                        style={{width:'260px'}}\n                                                        value={this.props.basemap} \n                                                        onChange={this.changeBasemap.bind(this)}\n                                                        children= {this.props.basemaps.map((item)=> {\n                                                                return  <MenuItem \n                                                                        value={item.name} \n                                                                        key={item.name} \n                                                                        primaryText={item.alias}\n                                                                        style={{fontSize:'12px'}}\n                                                                        title={item.description}\n                                                                />;\n                                                        })}\n                                                />\n\t\t\t\t\t<div style={{paddingBottom:'10px'}}>\n\t\t\t\t\t    <div className={'userSetting'}>Area units</div>\n\t\t\t\t\t    <RadioButtonGroup name=\"reportUnitType\" defaultSelected={this.props.userData.REPORTUNITS} onChange={this.setReportUnit.bind(this)}>\n\t\t\t\t\t      <RadioButton value=\"m2\" label=\"m2\" className={'radioButton'} style={{width: '60px', display:'inline-block'}} inputStyle={{width: '40px'}} labelStyle={{width: '40px'}} iconStyle={{marginRight:'3px'}}/>\n\t\t\t\t\t      <RadioButton value=\"Ha\" label=\"Ha\" className={'radioButton'} style={{width: '60px', display:'inline-block'}} inputStyle={{width: '40px'}} labelStyle={{width: '40px'}} iconStyle={{marginRight:'3px'}}/>\n\t\t\t\t\t      <RadioButton value=\"Km2\" label=\"Km2\" className={'radioButton'} style={{width: '60px', display:'inline-block'}} inputStyle={{width: '40px'}} labelStyle={{width: '40px'}} iconStyle={{marginRight:'3px'}}/>\n\t\t\t\t\t    </RadioButtonGroup>\n\t\t\t\t\t</div>\n\t\t\t\t\t{/*\t<Checkbox label=\"Use feature colours\" style={{fontSize:'12px'}} checked={this.props.userData.USEFEATURECOLORS} onCheck={this.toggleUseFeatureColors.bind(this)} />\n\t\t\t\t\t\t<Checkbox label=\"Show welcome screen at startup\" style={{fontSize:'12px'}} checked={this.props.userData.SHOWWELCOMESCREEN} onCheck={this.toggleShowWelcomeScreen.bind(this)} />*/}\n                                        </div>\n                                } \n                        />\n                );\n        }\n}\n\nexport default UserSettingsDialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from 'react';\nimport MarxanDialog from './MarxanDialog';\nimport MarxanTextField from './MarxanTextField';\n\nclass ProfileDialog extends React.Component {\n\tconstructor(props) { \n\t\tsuper(props);\n\t\tthis.state = { updated: false, validEmail: true };\n\t} \n\thandleKeyPress(e) {\n\t\tif (e.nativeEvent.key === \"Enter\") this.updateUser();\n\t}\n\tupdateState(name, value) { \n\t\tthis.setState({\n\t\t\t[name]: value, updated: true });\n\t}\n\tvalidateEmail() {\n\t\tvar re = /^(([^<>()\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\t\tlet email = this.state.EMAIL ? this.state.EMAIL : this.props.userData.EMAIL;\n\t\tlet valid = re.test(String(email).toLowerCase());\n\t\tthis.setState({ validEmail: valid });\n\t\tif (!valid) {\n\t\t\tthrow new Error(\"Invalid email address\");\n\t\t}\n\t}\n\tupdateUser() {\n\t\ttry {\n\t\t\tthis.validateEmail();\n\t\t}\n\t\t//any errors will not create a new user\n\t\tcatch (err) {\n\t\t\treturn;\n\t\t}\n\t\tthis.props.updateUser(this.state);\n\t\tthis.closeProfileDialog();\n\t}\n\tcloseProfileDialog() {\n\t\tthis.props.onOk();\n\t\tthis.setState({ updated: false, validEmail: true });\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<MarxanDialog \n\t\t\t\t{...this.props}  \n\t\t\t\tcontentWidth={330}\n\t\t\t\toffsetY={80}\n\t\t\t\tonCancel={this.closeProfileDialog.bind(this)}\n\t\t\t\tshowCancelButton={true}\n\t\t\t\tonOk={this.updateUser.bind(this)}\n\t\t\t\thelpLink={\"user.html#profile\"}\n\t\t\t\ttitle=\"Profile\" \n\t\t\t\tchildren={\n\t\t\t\t\t<div key=\"k15\">\n\t\t\t\t\t\t<MarxanTextField floatingLabelText=\"Full name\" floatingLabelFixed={true} onChange = {(event,newValue) => this.updateState(\"NAME\",newValue)} defaultValue ={this.props.userData && this.props.userData.NAME} onKeyPress={this.handleKeyPress.bind(this)} floatingLabelShrinkStyle={{fontSize:'16px'}} floatingLabelFocusStyle={{fontSize:'16px'}}/>\n\t\t\t\t\t\t<MarxanTextField floatingLabelText=\"Email address\" floatingLabelFixed={true} errorText={this.state.validEmail ?  '' : \"Invalid email address\"} onChange = {(event,newValue) => this.updateState(\"EMAIL\",newValue)} defaultValue={this.props.userData && this.props.userData.EMAIL} onKeyPress={this.handleKeyPress.bind(this)} floatingLabelShrinkStyle={{fontSize:'16px'}} floatingLabelFocusStyle={{fontSize:'16px'}} />\n\t\t\t\t\t\t<div className={'description'}>Role: {this.props.userData.ROLE}</div>\n\t\t\t\t\t</div>\n\t\t\t\t} \n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default ProfileDialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from 'react';\nimport ReactTable from \"react-table\";\n\nclass MarxanTable extends React.Component {\n    //filters the data in the table from the search text\n    filterData(){\n        let filteredData =[];\n        if (this.props.searchText === \"\") {\n            filteredData = this.props.data;\n        }else{\n            filteredData = this.props.data.filter(item => {\n                if (this.props.searchText.startsWith(\"!\")){ //does not contain search \n                    return !(Object.keys(item).some(key => (this.props.searchColumns.includes(key))&&(item[key] && item[key].includes(this.props.searchText.substring(1)))));\n                }else{ //contains search - this will exit the some loop (and return true) if there are any matching items\n                    return Object.keys(item).some(key => (this.props.searchColumns.includes(key))&&(item[key] && item[key].includes(this.props.searchText)));\n                }\n            });\n        }\n        //call the dataFiltered method passing the filtered data\n        if (this.props.hasOwnProperty(\"dataFiltered\")) this.props.dataFiltered(filteredData);\n        //return a value\n        return filteredData;\n    }\n    render() {\n        let filteredData = this.filterData();\n        return (\n            <ReactTable \n                {...this.props}\n                pageSize={filteredData.length} \n                className={'projectsReactTable noselect'} \n                showPagination={false} \n                minRows={0} \n                data={filteredData}\n                columns={this.props.columns} \n            />\n        );\n    }\n}\n\nexport default MarxanTable;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from 'react';\n// import { faBookOpen } from '@fortawesome/free-solid-svg-icons';\nimport SelectField from \"material-ui/SelectField\";\nimport MenuItem from \"material-ui/MenuItem\";\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faTrashAlt } from '@fortawesome/free-regular-svg-icons';\nimport ToolbarButton from './ToolbarButton';\nimport MarxanDialog from './MarxanDialog';\nimport MarxanTable from \"./MarxanTable\";\nimport Checkbox from 'material-ui/Checkbox';\n\nlet USER_ROLES = [\"User\",\"ReadOnly\",\"Admin\"];\nclass UsersDialog extends React.Component { \n\t\t\tconstructor(props) {\n\t\t\t\t\tsuper(props);\n\t\t\t\t\tthis.state = {searchText: \"\", selectedUser: undefined };\n\t\t\t}\n\t\t\tchangeRole(user, oldRole, evt, key, newRole){\n\t\t\t\tthis.props.changeRole(user, newRole);\n\t\t\t}\n\t\t\t_delete() {\n\t\t\t\t\tthis.props.deleteUser(this.state.selectedUser.user);\n\t\t\t\t\tthis.setState({ selectedUser: false });\n\t\t\t}\n\t\t\tchangeUser(event, user) {\n\t\t\t\t\tthis.setState({ selectedUser: user });\n\t\t\t}\n\t\t\t  sortDate(a, b, desc) {\n\t\t\t    return (new Date(a.slice(6,8),a.slice(3,5)-1,a.slice(0,2),a.slice(9,11),a.slice(12,14),a.slice(15,17)) > new Date(b.slice(6,8),b.slice(3,5)-1,b.slice(0,2),b.slice(9,11),b.slice(12,14),b.slice(15,17))) ? 1 : -1;\n\t\t\t  }\n\t\t\tcloseDialog() {\n\t\t\t\t\tthis.setState({ selectedUser: undefined });\n\t\t\t\t\tthis.props.onOk();\n\t\t\t}\n\t\t    searchTextChanged(value){\n\t\t      this.setState({searchText: value});\n\t\t    }\n\t\t\trender() {\n\t\t\t\t\tif (this.props.users) {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t<MarxanDialog \n\t\t\t\t\t\t\t{...this.props} \n\t\t\t\t\t\t\tonOk={this.closeDialog.bind(this)}\n\t\t\t\t\t\t\tonRequestClose={this.closeDialog.bind(this)}\n\t\t\t\t\t\t\tshowCancelButton={false}\n\t\t\t\t\t\t\thelpLink={\"user.html#the-users-window-admin-users-only\"}\n\t\t\t\t\t\t\tautoDetectWindowHeight={false}\n\t\t\t\t\t\t\tbodyStyle={{ padding:'0px 24px 0px 24px'}}\n\t\t\t\t\t\t\ttitle=\"Users\"   \n\t\t\t\t\t\t\tshowSearchBox={true} \n\t\t\t\t\t\t\tsearchTextChanged={this.searchTextChanged.bind(this)}\n\t\t\t\t\t\t\tchildren={\n\t\t\t\t\t\t\t\t\t<React.Fragment key=\"k2\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div id=\"usersTable\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{(this.props.users&&this.props.users.length>0) ? \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<MarxanTable \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata={this.props.users}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tselectedUser={this.state.selectedUser}\n\t\t\t\t\t\t\t\t\t\t                            searchColumns={['user','NAME','EMAIL','ROLE']}\n\t\t\t\t\t\t\t\t\t\t                            searchText={this.state.searchText}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tchangeUser={this.changeUser.bind(this)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolumns={[{ Header: 'User', accessor: 'user', width: 90, headerStyle: { 'textAlign': 'left' } }, \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ Header: 'Name', accessor: 'NAME', width: 173, headerStyle: { 'textAlign': 'left' } }, \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ Header: 'email', accessor: 'EMAIL', width: 135, headerStyle: { 'textAlign': 'left' } }, \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ Header: 'Role', accessor: 'ROLE', width: 180, headerStyle: { 'textAlign': 'left' },\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tCell: row => \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(row.original.user === 'guest') ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div>ReadOnly</div> :\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<SelectField\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{width: 130,height: 15,lineHeight: 15,position: 'relative',fontSize: '12px'}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmenuStyle={{position: 'absolute',top: -22}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tunderlineStyle={{position: 'relative',top: 20}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ticonStyle={{lineHeight:'24px',height:'24px'}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={row.original.ROLE}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={this.changeRole.bind(this, row.original.user, row.value)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{USER_ROLES.map(item => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ fontSize: \"12px\" }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={item}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tprimaryText={item}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={item}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</SelectField>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ Header: 'Date', accessor: 'CREATEDATE', width: 115, headerStyle: { 'textAlign': 'left' }, sortMethod: this.sortDate.bind(this) },]}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgetTrProps={(state, rowInfo, column) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbackground: (rowInfo.original.user === (state.selectedUser&&state.selectedUser.user)) ? \"aliceblue\" : \"\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick: (e) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (USER_ROLES.indexOf(e.target.textContent)===-1) state.changeUser(e, rowInfo.original);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:null}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div id=\"projectsToolbar\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<ToolbarButton  \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ticon={<FontAwesomeIcon icon={faTrashAlt}  color='rgb(255, 64, 129)'/>} \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttitle=\"Delete user\" \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={!this.state.selectedUser || this.props.loading || (this.props.user === this.state.selectedUser.user)||(this.state.selectedUser.user === 'guest')}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={this._delete.bind(this)} \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={\"Delete\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Checkbox\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"Enable guest user\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{fontSize:'12px',paddingLeft: '10px', width:'200px',display:'inline-block',verticalAlign:'bottom'}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={this.props.toggleEnableGuestUser}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tchecked={this.props.guestUserEnabled}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t\t} \n\t\t\t\t\t/>\n\t\t\t);\n\t\t}else{\n\t\t\t\treturn null;\n\t\t}\n\t}\n}\n\nexport default UsersDialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from \"react\";\nimport MarxanDialog from \"./MarxanDialog\";\nimport iucn from './images/iucn.png';\nimport wcmc from './images/wcmc.png';\nimport mapbox_small from './images/mapbox_small.png';\nimport biopama_small from './images/biopama_small.png';\nimport jrc_logo_color_small from './images/jrc_logo_color_small.png';\n\nclass AboutDialog extends React.Component {\n  render() {\n    return (\n      <MarxanDialog\n        {...this.props}\n        contentWidth={500}\n        offsetY={80}\n        title=\"About\"\n        helpLink={\"user.html#about-window\"}\n        children={\n          <div key=\"k5\">\n            <div className={\"aboutTitle\"}>Software development</div>\n            <div className={\"aboutText\"}>\n              Marxan Web {this.props.marxanClientReleaseVersion} Feedback:{\" \"}\n              <a href=\"mailto:andrew.cottam@ec.europa.eu\" className=\"email\">\n                Andrew Cottam\n              </a>\n            </div>\n            <div className={\"aboutText\"}>\n              Marxan 2.4.3 - Ian Ball, Matthew Watts &amp; Hugh Possingham\n            </div>\n            <div className={\"aboutTitle\"}>Data providers</div>\n            <div className={\"aboutText\"} style={{marginTop:'10px'}} dangerouslySetInnerHTML={{__html: this.props.wdpaAttribution}}></div>\n            <div className={\"aboutTitle\"}>Funding and in-kind contributions</div>\n            <div className={\"aboutText\"} style={{marginTop:'10px'}}>\n              Marxan Web funded by the BIOPAMA project of the European Commission. With in-kind contributions from Mapbox. \n            </div>\n            <div className={\"aboutText\"} style={{marginTop:'10px'}}>\n              Marxan funded by a range of donors - see <a href='http://marxan.org/credits.html' target='_blank' rel=\"noopener noreferrer\">here</a>.\n            </div>\n           <div className={\"logos\"}>\n            <a href=\"https://www.iucn.org/\">\n\t            <img\n\t              src={iucn}\n\t              alt=\"IUCN logo\"\n\t              title={\"IUCN logo\"}\n\t              className={\"aboutLogo\"}\n\t            />\n            </a>\n            <a href=\"https://www.unep-wcmc.org/\">\n\t            <img\n\t              src={wcmc}\n\t              alt=\"UN Environment WCMC logo\"\n\t              title={\"UN Environment WCMC logo\"}\n\t              className={\"aboutLogo\"}\n\t            />\n            </a>\n            <a href=\"https://www.biopama.org\">\n\t            <img\n\t              src={biopama_small}\n\t              alt=\"BIOPAMA logo\"\n\t              title={\"BIOPAMA logo\"}\n\t              className={\"aboutLogo\"}\n\t            />\n\t            </a>\n\t            <a href=\"https://ec.europa.eu/jrc/en\">\n\t            <img\n\t              src={jrc_logo_color_small}\n\t              alt=\"Joint Research Centre of the European Commission logo\"\n\t              title={\"Joint Research Centre of the European Commission logo\"}\n\t              className={\"aboutLogo\"}\n\t            />\n\t            </a>\n              <a href=\"https://www.mapbox.com\">\n  \t            <img\n  \t              src={mapbox_small}\n  \t              alt=\"Mapbox logo\"\n  \t              title={\"Mapbox logo\"}\n  \t              className={\"aboutLogo\"}\n  \t            />\n              </a>\n            </div>\n          </div>\n        }\n      />\n    );\n  }\n}\n\nexport default AboutDialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from 'react';\nimport MenuItem from 'material-ui/MenuItem';\n\nclass MenuItemWithButton extends React.Component {\n\trender() {\n\t\treturn <MenuItem className={'smallMenuItem'} {...this.props} innerDivStyle={{paddingLeft:'40px'}}/>;\n\t}\n}\n\nexport default MenuItemWithButton;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport * as React from 'react';\nimport { blue300} from 'material-ui/styles/colors';\n\nclass TargetIcon extends React.PureComponent {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = { editing: false, localTargetValue: undefined };\n\t}\n\tonClick(event) {\n\t\tthis.startEditing();\n\t}\n\tisNumber(str) {\n\t\tvar pattern = /^\\d+$/;\n\t\treturn pattern.test(str); // returns a boolean\n\t}\n\tonChange(event) {\n\t\tlet newValue = event.nativeEvent.target.value;\n\t\tif (newValue > 100) return;\n\t\tif (this.isNumber(newValue) || (newValue === \"\")) {\n\t\t\tnewValue = (newValue === \"\") ? 0 : Number(newValue); \n\t\t\tthis.setState({localTargetValue:newValue});\n\t\t}\n\t}\n\tonKeyPress(event) {\n\t\tif (event.nativeEvent.key === \"Enter\") this.setState({ editing: false }); //will trigger the onBlur event of the input box\n\t}\n\tstartEditing() {\n\t\tthis.setState({ editing: true, localTargetValue: this.props.target_value });\n\t\tdocument.getElementById(\"input_\" + this.props.interestFeature.id).focus();\n\t\tdocument.getElementById(\"input_\" + this.props.interestFeature.id).select();\n\t}\n\tstopEditing() {\n\t\tthis.setState({ editing: false });\n\t\tthis.props.updateTargetValue(this, this.state.localTargetValue); \n\t}\n\trender() {\n\t\tlet backgroundColor = (this.props.targetStatus === \"Does not occur in planning area\") ? \"lightgray\" : (this.props.targetStatus === \"Unknown\") ? \"white\" : (this.props.targetStatus === \"Target achieved\") ? \"white\" : \"rgb(255, 64, 129)\";\n\t\tlet fontColor = (this.props.targetStatus === \"Does not occur in planning area\") ? \"white\" : (this.props.targetStatus === \"Unknown\") ? blue300 : (this.props.targetStatus === \"Target achieved\") ? blue300 : \"white\";\n\t\t return (\n\t\t\t<div onClick={(this.props.userRole === \"ReadOnly\") ? null : this.onClick.bind(this)} style={{position:'absolute',left:'0px',top:'8px', display: (this.props.visible) ? 'block' : 'none'}}>\n\t\t\t\t<div title={this.props.targetStatus} style={{'display': (this.state.editing) ? 'none' : 'inline-flex', backgroundColor: backgroundColor, size:'0', color:fontColor, userSelect:'none', alignItems:'center', justifyContent:'center', fontSize:'10px', borderRadius:'50%', height:'27px', width:'27px', left:'0px', border:'1px lightgray solid'}}\n\t\t\t\t>{this.props.target_value}%</div>\n\t\t\t\t<div style={{'display': (this.state.editing) ? 'inline-flex' : 'none',size:'30','backgroundColor':'#2F6AE4','userSelect':'none','alignItems':'center','justifyContent':'center','borderRadius':'50%',height:'27px',width:'27px',left:'0px'}}>\n\t\t\t\t\t<input id={\"input_\" + this.props.interestFeature.id} onBlur={this.stopEditing.bind(this)} onKeyPress={this.onKeyPress.bind(this)} onChange={this.onChange.bind(this)} style={{'backgroundColor':'transparent','border':'0px',height:'27px',width:'27px','fontSize':'13px',display:'inline-flex','textAlign':'center',color:blue300}} value={this.state.localTargetValue}/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default TargetIcon;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport * as React from 'react';\n\nclass LinearGauge extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\t//alwaysShowPercent - set to false then if the percent protected is smaller than 30 pixels it will not be shown\n\t\t//showUnprotectedPercent - set to false to not show the unprotected percent\n\t\t//targetAsLine - shows the target as a line - otherwise it is a grey rectangle\n\t\tthis.state = { alwaysShowPercent: false, showUnprotectedPercent: false,targetAsLine:false };\n\t} \n\trender() {\n\t\tlet protectedWidth = 0; \n\t\tlet protectedHidden = true; \n\t\t//the scaledWidth is the desired width of the LinearGauge\n\t\tlet scaleFactor = this.props.scaledWidth / 100;\n\t\t//the number of pixels from the left hand side to offset the target line\n\t\tlet targetPxOffset = (this.props.target_value * scaleFactor);\n\t\t//the number of pixels from the left hand side to the protected line\n\t\tprotectedWidth = Math.round((this.props.protected_percent === -1) ? 0 : (this.props.protected_percent * scaleFactor));\n\t\t//protected percent text - if protected_percent < target_value then if the rounded protected_percent is the same as the rounded target_value, show the protected_percent to 1dp\n\t\tlet protNum = this.props.protected_percent;\n\t\tlet percentageProtectedText = (protNum < Number(this.props.target_value)) ? (Math.round(protNum)===Number(this.props.target_value)) ? String(protNum).slice(0,String(protNum).indexOf(\".\") + 2) : Math.round(protNum) : Math.round(protNum);\n\t\t//get whether or not the % protected should be visible or hidden\n\t\tprotectedHidden = (protectedWidth < 26 && !(this.state.alwaysShowPercent));\n\t\t//get the width of the target shortfall\n\t\tlet targetShortfallWidth = (this.props.protected_percent >= this.props.target_value) ? 0 : (targetPxOffset - protectedWidth);\n\t\t//if targetShortfallWidth is less than zero if causes the linear guage to go off-scale\n\t\ttargetShortfallWidth = (targetShortfallWidth<0) ? 0 : targetShortfallWidth;\n\t\t//get the width of the rest of the bar\n\t\tlet unprotectedWidth = (100 * scaleFactor) - protectedWidth - targetShortfallWidth;\n\t\treturn (\n\t\t\t<div className={(this.props.visible) ? 'linearGauge' : 'linearGaugeNoBorder'} style={{opacity: (this.props.protected_percent === -1) ? '0.3' : 1}}>\n\t\t\t\t<div title={percentageProtectedText + '% protected'} className={'percentBar'} style={{height: (this.props.smallLinearGauge) ? '2px' : '18px', width: protectedWidth + 'px', backgroundColor: (this.props.useFeatureColors) ? this.props.color : 'rgb(0, 188, 212)'}}>{protectedHidden ? <span>&nbsp;</span> : percentageProtectedText + '%'}</div>\n\t\t\t\t<div title={'Target of ' + this.props.target_value + '%'} className={'percentBar targetShortfall'} style={{width: (this.props.visible) ? targetShortfallWidth + 'px' : '0px'}}></div>\n\t\t\t\t<div className={'percentBar totalShortFall'} style={{width: unprotectedWidth + 'px', color:'rgba(0,0,0,0.7)', 'textAlign': (this.props.visible) ? null : 'left', 'fontStyle': (this.props.visible) ? null : 'italic'}}>{(this.props.visible) ? null : 'Does not occur'}</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default LinearGauge;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport * as React from 'react';\nimport { List, ListItem } from 'material-ui/List';\nimport TargetIcon from './TargetIcon';\nimport { grey400 } from 'material-ui/styles/colors';\nimport IconButton from 'material-ui/IconButton';\nimport MoreVertIcon from 'material-ui/svg-icons/navigation/more-vert';\nimport LinearGauge from './LinearGauge';\n \nclass FeaturesList extends React.Component { \n\ticonClick(feature, evt){\n\t\tthis.props.openFeatureMenu(evt, feature);\n\t}\n\tupdateTargetValue(targetIcon, newValue) {\n\t\tthis.props.updateFeature(targetIcon.props.interestFeature, {target_value: newValue});\n\t}\n\titemClick(feature, evt){\n\t\tif (evt.altKey){\n\t\t\t//toggle the layers puid visibility\n\t\t\tfeature.feature_puid_layer_loaded = !feature.feature_puid_layer_loaded;\n\t\t\t//add/remove it from the map\n\t\t\tthis.props.toggleFeaturePUIDLayer(feature);\n\t\t}else{\n\t\t\t//toggle the layers visibility\n\t\t\tfeature.feature_layer_loaded = !feature.feature_layer_loaded;\n\t\t\t//add/remove it from the map\n\t\t\tthis.props.toggleFeatureLayer(feature);\n\t\t}\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<List style={{padding:'0px !important', maxHeight: this.props.maxheight, overflow: 'auto'}}>\n\t\t\t\t\t{this.props.features.map((item)=>{\n\t\t\t\t\t\t//get the total area of the feature in the planning unit\n\t\t\t\t\t\tlet pu_area = item.pu_area;\n\t\t\t\t\t\t//TODO: This needs to be done differently when we are using the old version of Marxan because it does not have a value for the pu_area\n\t\t\t\t\t\t\n\t\t\t\t\t\t//get the protected percent\n\t\t\t\t\t\tlet protected_percent = (item.protected_area === -1) ? -1 : (pu_area >= 0) ? (item.protected_area > 0) ? (item.protected_area / pu_area) * 100 : 0 : 0;\n\t\t\t\t\t\t//this is a hack to round the protected percent as there are some bugs in Marxan that calculate the target area required wrongly\n\t\t\t\t\t\t//TODO - sort out \n\t\t\t\t\t\t// protected_percent = Math.round(protected_percent);\n\t\t\t\t\t\tlet targetStatus = (pu_area === 0) ? \"Does not occur in planning area\" : (protected_percent === -1) ? \"Unknown\" : (item.protected_area >= item.target_area) ? \"Target achieved\" : \"Target missed\";\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<ListItem \n\t\t\t\t\t\t\t\tleftAvatar={this.props.simple ? \n\t\t\t\t\t\t\t\t\t<span/> \n\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t  <TargetIcon \n\t\t\t\t\t\t\t\t\t  style={{left: 8}} \n\t\t\t\t\t\t\t\t\t  target_value={item.target_value} \n\t\t\t\t\t\t\t\t\t  updateTargetValue={this.updateTargetValue.bind(this)} \n\t\t\t\t\t\t\t\t\t  interestFeature={item}\n\t\t\t\t\t\t\t\t\t  targetStatus={targetStatus}\n\t\t\t\t\t\t\t\t\t  visible={(item.pu_area!==0)}\n\t\t\t\t\t\t\t\t\t  userRole={this.props.userRole}\n\t\t\t\t\t\t\t\t  /> \n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tprimaryText={item.alias} \n\t\t\t\t\t\t\t\tsecondaryText={this.props.simple ? \n\t\t\t\t\t\t\t\t\t<span />\n\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t<LinearGauge \n\t\t\t\t\t\t\t\t\t\tscaledWidth={220}\n\t\t\t\t\t\t\t\t\t\ttarget_value={item.target_value} \n\t\t\t\t\t\t\t\t\t\tprotected_percent={protected_percent}\n\t\t\t\t\t\t\t\t\t\tvisible={(item.pu_area!==0)}\n\t\t\t\t\t\t\t\t\t\tcolor={item.color}\n\t\t\t\t\t\t\t\t\t\tuseFeatureColors={this.props.useFeatureColors}\n\t\t\t\t\t\t\t\t\t\tstyle={{height: (this.props.smallLinearGauge) ? '3px' : 'unset'}}\n\t\t\t\t\t\t\t\t\t\tsmallLinearGauge={this.props.smallLinearGauge}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t} \n\t\t\t\t\t\t\t\tkey={item.id} \n\t\t\t\t\t\t\t\tvalue={item.alias}\n\t\t\t\t\t\t\t\tonClick={this.props.simple ? null : this.itemClick.bind(this, item)}\n\t\t\t\t\t\t\t\trightIconButton={this.props.simple ?\n\t\t\t\t\t\t\t\t\t<div />\n\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t<IconButton touch={true} tooltipPosition=\"bottom-left\" onClick={this.iconClick.bind(this, item)} style={{width:'18',height:'18',padding:'10',top:'10px'}} iconStyle={{width:'18',height:'18'}}>\n\t\t\t\t\t\t\t\t\t\t<MoreVertIcon color={grey400}/>\n\t\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tinnerDivStyle={{padding: (this.props.simple) ? '5px 5px 5px 5px' : '6px 5px 2px 40px' }}\n\t\t\t\t\t\t\t\tstyle={{borderRadius:'3px',fontSize:'13px', color: 'rgba(0,0,0,0.8)'}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t</List>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nexport default FeaturesList;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from 'react';\nimport ToolbarButton from './ToolbarButton';\nimport FeaturesList from './FeaturesList';\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\nimport { faCrosshairs } from '@fortawesome/free-solid-svg-icons';\n\nclass SelectFeatures extends React.Component {\n\topenFeaturesDialog(evt){\n\t\tthis.props.openFeaturesDialog(true);\n\t}\n\trender() { \n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<div className={'newPUDialogPane'}>   \n\t\t\t\t\t<FeaturesList \n\t\t\t\t\t\t{...this.props} \n\t\t\t\t\t\tfeatures={this.props.features}  \n\t\t\t\t\t\topenFeatureMenu={this.props.openFeatureMenu}\n\t\t\t\t\t\tsimple={this.props.simple} \n\t\t\t\t\t\tupdateFeature={this.props.updateFeature}\n\t\t\t\t\t\tuserRole={this.props.userRole}\n\t\t\t\t\t\ttoggleFeatureLayer={this.props.toggleFeatureLayer}\n\t\t\t\t\t\ttoggleFeaturePUIDLayer={this.props.toggleFeaturePUIDLayer}\n\t\t\t\t\t\tuseFeatureColors={this.props.useFeatureColors}\n\t\t\t\t\t\tsmallLinearGauge={this.props.smallLinearGauge}\n\t\t\t\t\t/>\n\t\t\t\t\t<ToolbarButton onClick={this.props.openTargetDialog} show={(this.props.userRole!==\"ReadOnly\")&&(this.props.showTargetButton)}  icon={ <FontAwesomeIcon icon={ faCrosshairs }/>} style={{marginLeft:this.props.leftmargin,width:'30px', marginTop:'5px'}} title={'Set a target for all features'}/>\n\t\t\t\t\t<ToolbarButton labelStyle={{paddingLeft:'6px',paddingRight:'6px'}} label=\"+/-\" onClick={this.openFeaturesDialog.bind(this)} show={!((this.props.metadata && this.props.metadata.OLDVERSION)||(this.props.userRole === \"ReadOnly\"))} style={{marginLeft:this.props.leftmargin,width:'30px', marginTop:'5px'}} title={'Add/remove features from the project'}/>\n\t\t\t\t</div>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n} \n\nexport default SelectFeatures;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from 'react';\nimport CONSTANTS from './constants';\nimport 'react-table/react-table.css';\nimport Paper from 'material-ui/Paper';\nimport { Tabs, Tab } from 'material-ui/Tabs';\nimport SelectField from 'material-ui/SelectField';\nimport SelectFeatures from './SelectFeatures';\nimport MenuItem from 'material-ui/MenuItem';\nimport Settings from 'material-ui/svg-icons/action/settings';\nimport ToolbarButton from './ToolbarButton';\nimport Checkbox from 'material-ui/Checkbox';\nimport Textarea from 'react-textarea-autosize';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faLock } from '@fortawesome/free-solid-svg-icons';\nimport { faEraser } from '@fortawesome/free-solid-svg-icons';\nimport { faShareAlt } from '@fortawesome/free-solid-svg-icons';\nimport { faSave } from '@fortawesome/free-solid-svg-icons';\n// import { faExclamationTriangle } from '@fortawesome/free-solid-svg-icons';\n\nclass InfoPanel extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {editingProjectName:false, editingDescription: false, showPlanningGrid: true, showProtectedAreas: false, showCosts:false, showStatuses:true};\n\t}\n\tcomponentDidUpdate(prevProps, prevState, snapshot) {\n\t\t//if the input box for renaming the project has been made visible and it has no value, then initialise it with the project name and focus it\n\t\tif (prevState.editingProjectName === false && this.state.editingProjectName) {\n\t\t\tdocument.getElementById(\"projectName\").value = this.props.project;\n\t\t\tdocument.getElementById(\"projectName\").focus();\n\t\t}\n\t\t//if the input box for renaming the description has been made visible and it has no value, then initialise it with the description and focus it\n\t\tif (prevState.editingDescription === false && this.state.editingDescription) {\n\t\t\tdocument.getElementById(\"descriptionEdit\").value = this.props.metadata.DESCRIPTION;\n\t\t\tdocument.getElementById(\"descriptionEdit\").focus();\n\t\t}\n\t}\n\n\tonKeyPress(e) {\n\t\tif (e.nativeEvent.keyCode === 13 || e.nativeEvent.keyCode === 27) {\n\t\t\tdocument.getElementById(e.nativeEvent.target.id).blur(); //call the onBlur event which will call the REST service to rename the project\n\t\t}\n\t}\n\n\tonBlur(e) {\n\t\tif (e.nativeEvent.target.id === 'projectName') {\n\t\t\tthis.props.renameProject(e.target.value).then(()=> {\n\t\t\t    this.setState({ editingProjectName: false });\n\t\t\t});\n\t\t}\n\t\telse {\n\t\t\tthis.props.renameDescription(e.target.value).then(()=> {\n\t\t\t\tthis.setState({ editingDescription: false });\n\t\t\t});\n\t\t}\n\t}\n\n\tstartEditingProjectName() {\n\t\tif (this.props.project) { //a project may not be loaded\n\t\t\tthis.setState({editingProjectName: true});\n\t\t}\n\t}\n\tstartEditingDescription() {\n\t\tif (this.props.project) { //a project may not be loaded\n\t\t\tthis.setState({editingDescription: true});\n\t\t}\n\t}\n\tstartStopPuEditSession(evt) {\n\t\t(this.props.puEditing) ? this.stopPuEditSession(): this.startPuEditSession();\n\t}\n\tstartPuEditSession() {\n\t\tthis.setState({ puEditing: true });\n\t\tthis.props.startPuEditSession();\n\t}\n\n\tstopPuEditSession() { \n\t\tthis.setState({ puEditing: false});\n\t\tthis.props.stopPuEditSession();\n\t}\n\t\n\tchangeIucnCategory(event,key,payload){\n\t\tthis.props.changeIucnCategory(CONSTANTS.IUCN_CATEGORIES[key]);\n\t}\n\tchangeCostname(event,key,payload){\n\t\t//get the costname\n\t\tlet costname = this.costnames[key];\n\t\tif (costname==='Custom..'){\n\t\t\tthis.props.openCostsDialog();\n\t\t}else{\n\t\t\t//update the cost profile on the server\n\t\t\tthis.props.changeCostname(costname).then(_=>{\n\t\t\t\t//load the costs \n\t\t\t\tthis.props.loadCostsLayer(true);\n\t\t\t});\n\t\t}\n\t}\n\ttoggleProjectPrivacy(evt, isInputChecked){\n\t\tlet checkedString = (isInputChecked) ? \"True\" : \"False\";\n\t\tthis.props.toggleProjectPrivacy(checkedString);\n\t}\n\tstopProcess(){\n\t\tthis.props.stopProcess(this.props.pid);\n\t}\n\ttogglePlanningUnits(event, isInputChecked) {\n\t\t//toggles the visibility of the planning grid\n\t\tthis.setState({showPlanningGrid: !this.state.showPlanningGrid});\n\t\tthis.props.togglePULayer(isInputChecked);\n\t}\n\ttoggleProtectedAreas(event, isInputChecked) {\n\t\t//toggles the visibility of the protected areas\n\t\tthis.setState({showProtectedAreas: !this.state.showProtectedAreas});\n\t\tthis.props.togglePALayer(isInputChecked);\n\t}\n\ttoggleCosts(event, isInputChecked) {\n\t\t//toggles the visibility of the costs\n\t\tthis.setState({showCosts: !this.state.showCosts});\n\t\tthis.props.toggleCostsLayer(isInputChecked);\n\t}\n\ttoggleStatuses(event, isInputChecked) {\n\t\t//toggles the visibility of the statuses\n\t\tthis.setState({showStatuses: !this.state.showStatuses});\n\t\tthis.props.toggleStatuses(isInputChecked);\n\t}\n\trender() {\n\t\tthis.costnames = [];\n\t\t//add a custom item to the end of the cost profiles\n\t\tif (this.props.costnames){\n\t\t\tthis.costnames = this.props.costnames.slice();\n\t\t\tthis.costnames.push(\"Custom..\");\n\t\t}\n\t\treturn (\n\t\t\t<React.Fragment>  \n\t\t\t\t<div className={'infoPanel'} style={{display: this.props.open ? 'block' : 'none'}}>\n\t\t\t\t\t<Paper zDepth={2} className=\"InfoPanelPaper\"> \n\t\t\t\t\t\t<Paper zDepth={2} className=\"titleBar\">\n\t\t\t\t\t\t\t{(this.props.userRole === \"ReadOnly\") ? <span className={'projectNameEditBox'} title={this.props.project + \" (Read-only)\"}><FontAwesomeIcon style={{color: 'white', height: '16px', marginTop:'4px',marginBottom: '2px', marginRight: '5px'}} icon={faLock}/>{this.props.project}</span> : <span onClick={this.startEditingProjectName.bind(this)} className={'projectNameEditBox'} title=\"Click to rename the project\">{this.props.project}</span>}\n\t\t\t\t\t\t\t{(this.props.userRole === \"ReadOnly\") ? null : <input id=\"projectName\" style={{position:'absolute', 'display': (this.state.editingProjectName) ? 'block' : 'none',left:'39px',top:'32px',width:'365px', border:'1px lightgray solid'}} className={'projectNameEditBox'} onKeyPress={this.onKeyPress.bind(this)} onBlur={this.onBlur.bind(this)}/>}\n\t\t\t\t\t\t</Paper>\n\t\t\t\t\t\t<Tabs contentContainerStyle={{'margin':'20px'}} className={'tabs'} value={this.props.activeTab} style={{backgroundColor: (this.state.puEditing) ? '#eee' : 'unset'}}>\n\t\t\t\t\t\t\t<Tab label=\"Project\" onActive={this.props.project_tab_active} value=\"project\" disabled={(this.props.puEditing) ? true : false}>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<div className={'tabTitle'}>Description</div>\n\t\t\t\t\t\t\t\t\t{(this.props.userRole === \"ReadOnly\") ? null : <Textarea minRows={5} id=\"descriptionEdit\" style={{'display': (this.state.editingDescription) ? 'block' : 'none'}} className={'descriptionEditBox'} onKeyPress={this.onKeyPress.bind(this)} onBlur={this.onBlur.bind(this)}/>}\n\t\t\t\t\t\t\t\t\t{(this.props.userRole === \"ReadOnly\") ? <div className={'description'} title={this.props.metadata.DESCRIPTION} dangerouslySetInnerHTML={{__html: this.props.metadata.DESCRIPTION}}/> : <div className={'description'} onClick={this.startEditingDescription.bind(this)} style={{'display': (!this.state.editingDescription) ? 'block' : 'none'}} title=\"Click to edit\" dangerouslySetInnerHTML={{__html: this.props.metadata.DESCRIPTION}}/>}\n\t\t\t\t\t\t\t\t\t<div className={'tabTitle tabTitleTopMargin'}>Created</div>\n\t\t\t\t\t\t\t\t\t<div className={'createDate'}>{this.props.metadata.CREATEDATE}</div>\n\t\t\t\t\t\t\t\t\t<div style={{display: (this.props.user!==this.props.owner) ? 'block' : 'none'}}>\n\t\t\t\t\t\t\t\t\t\t<div className={'tabTitle tabTitleTopMargin'}>Created by</div>\n\t\t\t\t\t\t\t\t\t\t<div className={'createDate'}>{this.props.owner}</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className={'tabTitle tabTitleTopMargin'}>{(this.props.metadata.OLDVERSION) ? \"Imported project\" : \"\"}</div>\n\t\t\t\t\t\t\t\t\t<div style={{position:'absolute', top:'413px', display: (this.props.userRole === \"ReadOnly\") ? 'none' : 'block'}}>\n\t\t\t\t\t\t\t\t\t\t<Checkbox\n\t\t\t\t\t\t\t\t\t\t\tlabel=\"Private\"\n\t\t\t\t\t\t\t\t\t\t\tstyle={{fontSize:'12px'}}\n\t\t\t\t\t\t\t\t\t\t\tchecked={this.props.metadata.PRIVATE}\n\t\t\t\t\t\t\t\t\t\t\tonCheck={this.toggleProjectPrivacy.bind(this)}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</Tab>\n\t\t\t\t\t\t\t<Tab label=\"Features\" onActive={this.props.features_tab_active} value=\"features\" disabled={(this.props.puEditing) ? true : false}>\n\t\t\t\t\t\t\t\t<SelectFeatures\n\t\t\t\t\t\t\t\t\tfeatures={this.props.features}\n\t\t\t\t\t\t\t\t\topenFeatureMenu={this.props.openFeatureMenu}\n\t\t\t\t\t\t\t\t\topenFeaturesDialog={this.props.openFeaturesDialog} \n\t\t\t\t\t\t\t\t\tmetadata={this.props.metadata}\n\t\t\t\t\t\t\t\t\tupdateFeature={this.props.updateFeature}\n\t\t\t\t\t\t\t\t\tleftmargin={'10px'}\n\t\t\t\t\t\t\t\t\tmaxheight={'409px'}\n\t\t\t\t\t\t\t\t\tsimple={false}\n\t\t\t\t\t\t\t\t\tshowTargetButton={true}\n\t\t\t\t\t\t\t\t\topenTargetDialog={this.props.openTargetDialog}\n\t\t\t\t\t\t\t\t\tuserRole={this.props.userRole}\n\t\t\t\t\t\t\t\t\ttoggleFeatureLayer={this.props.toggleFeatureLayer}\n\t\t\t\t\t\t\t\t\ttoggleFeaturePUIDLayer={this.props.toggleFeaturePUIDLayer}\n\t\t\t\t\t\t\t\t\tuseFeatureColors={this.props.useFeatureColors}\n\t\t\t\t\t\t\t\t\tsmallLinearGauge={this.props.smallLinearGauge}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Tab>\n\t\t\t\t\t\t\t<Tab label=\"Planning units\" onActive={this.props.pu_tab_active} value=\"planning_units\">\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<div className={'tabTitle tabTitleInlineBlock'}>Planning Grid</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className={'description'}>{this.props.metadata.pu_alias}</div>\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<div className={'tabTitle tabTitleTopMargin'}>Statuses</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div style={{display: (this.props.userRole === \"ReadOnly\") ? 'none' : 'block'}}>\n\t\t\t\t\t    \t        \t<div className={'puManualEditContainer'}>\n\t\t\t\t\t\t\t\t\t\t\t<FontAwesomeIcon icon={(this.props.puEditing) ? faSave : faLock} onClick={this.startStopPuEditSession.bind(this)} title={(this.props.puEditing) ? \"Save\" : \"Manually edit\"} style={{cursor:'pointer', marginLeft:'3px',marginRight: '10px', color: 'rgba(255, 64, 129, 0.7)'}}/>\n\t\t\t\t\t\t\t\t\t\t\t<div style={{display: (this.props.puEditing) ? \"inline-block\" : \"none\"}} className={'puManualEditClear'}>\n\t\t\t\t\t\t\t\t\t\t\t\t<FontAwesomeIcon icon={faEraser} onClick={this.props.clearManualEdits.bind(this)} title={'Clear all manual edits'} style={{cursor:'pointer',color: 'rgba(255, 64, 129, 0.7)'}}/>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div className={'description'} style={{display: 'inline-block',fontSize:'12px',paddingLeft:'7px'}}>{(this.props.puEditing) ? \"Click on the map to change the status\" : \"Manually edit\"}</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<SelectField \n\t\t\t\t\t\t\t\t\t\tfloatingLabelText={'Lock in protected areas'} \n\t\t\t\t\t\t\t\t\t\tfloatingLabelFixed={true} \n\t\t\t\t\t\t\t\t\t\tunderlineShow={false}\n\t\t\t\t\t\t\t\t\t\tdisabled={(this.props.preprocessing)||(this.props.userRole === \"ReadOnly\")}\n\t\t\t\t\t\t\t\t\t\tmenuItemStyle={{fontSize:'12px'}} \n\t\t\t\t\t\t\t\t\t\tlabelStyle={{fontSize:'12px'}} \n\t\t\t\t\t\t\t\t\t\tstyle={{marginTop:'-14px',width:'180px'}}\n\t\t\t\t\t\t\t\t\t\tvalue={this.props.metadata.IUCN_CATEGORY} \n\t\t\t\t\t\t\t\t\t\tonChange={this.changeIucnCategory.bind(this)}\n\t\t\t\t\t\t\t\t\t\tchildren= {CONSTANTS.IUCN_CATEGORIES.map((item)=> {\n\t\t\t\t\t\t\t\t\t\t\treturn  <MenuItem \n\t\t\t\t\t\t\t\t\t\t\t\tvalue={item} \n\t\t\t\t\t\t\t\t\t\t\t\tkey={item} \n\t\t\t\t\t\t\t\t\t\t\t\tprimaryText={item}\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{fontSize:'12px'}}\n\t\t\t\t\t\t\t\t\t\t\t\t/>; \n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t/> \n\t\t\t\t\t    \t        {/*<FontAwesomeIcon icon={faExclamationTriangle} style={{color:'red', display:(this.props.metadata.IUCN_CATEGORY!=='None' && this.props.protected_area_intersections && this.props.protected_area_intersections.length===0) ? 'inline' : 'none', position:'absolute'}} title={'Protected areas have been updated since you locked these ones in'}/>*/}\n\t\t\t\t\t    \t        <div>\n\t\t\t\t\t\t\t\t\t\t<div className={'tabTitle'}>Costs</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<SelectField \n\t\t\t\t\t\t\t\t\t\tfloatingLabelText={'Use cost surface'} \n\t\t\t\t\t\t\t\t\t\tfloatingLabelFixed={true} \n\t\t\t\t\t\t\t\t\t\tunderlineShow={false}\n\t\t\t\t\t\t\t\t\t\tdisabled={(this.props.preprocessing)||(this.props.userRole === \"ReadOnly\")}\n\t\t\t\t\t\t\t\t\t\tmenuItemStyle={{fontSize:'12px'}} \n\t\t\t\t\t\t\t\t\t\tlabelStyle={{fontSize:'12px'}} \n\t\t\t\t\t\t\t\t\t\tstyle={{marginTop:'-14px',width:'230px'}}\n\t\t\t\t\t\t\t\t\t\tvalue={this.props.costname} \n\t\t\t\t\t\t\t\t\t\tonChange={this.changeCostname.bind(this)}\n\t\t\t\t\t\t\t\t\t\tchildren= {this.costnames.map((item)=> {\n\t\t\t\t\t\t\t\t\t\t\treturn  <MenuItem \n\t\t\t\t\t\t\t\t\t\t\t\tvalue={item} \n\t\t\t\t\t\t\t\t\t\t\t\tkey={item} \n\t\t\t\t\t\t\t\t\t\t\t\tprimaryText={item}\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{fontSize:'12px'}}\n\t\t\t\t\t\t\t\t\t\t\t\t/>; \n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t/> \n\t\t\t\t\t\t\t\t</div>  \n\t\t\t\t\t\t\t</Tab>\n\t\t\t\t\t\t</Tabs>     \n\t\t\t\t\t\t<Paper className={'lowerToolbar'}>\n\t\t\t\t\t\t\t\t<ToolbarButton   \n\t\t\t\t\t\t\t\t\ticon={<FontAwesomeIcon icon={faShareAlt}/>} \n\t\t\t\t\t\t\t\t\ttitle={\"Get a shareable link to this project\"}\n\t\t\t\t\t\t\t\t\tonClick={this.props.getShareableLink} \n\t\t\t\t\t\t\t\t\tshow={(this.props.marxanServer.type ==='remote')}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<ToolbarButton   \n\t\t\t\t\t\t\t\t\ticon={<Settings style={{height:'20px',width:'20px'}}/>} \n\t\t\t\t\t\t\t\t\ttitle=\"Run Settings\"\n\t\t\t\t\t\t\t\t\tonClick={this.props.showRunSettingsDialog} \n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<div className='toolbarSpacer'/>\n\t\t\t\t\t\t\t\t<ToolbarButton \n\t\t\t\t\t\t\t\t\tlabel=\"Stop\" \n\t\t\t\t\t\t\t\t\ttitle=\"Click to stop the current run\"  \n\t\t\t\t\t\t\t\t\tshow={this.props.userRole !== \"ReadOnly\"}\n\t\t\t\t\t\t\t\t\tstyle={{marginLeft: '194px'}}\n\t\t\t\t\t\t\t\t\tonClick={this.stopProcess.bind(this)} \n\t\t\t\t\t\t\t\t\tdisabled={this.props.pid===0}  \n\t\t\t\t\t\t\t\t\tsecondary={true} \n\t\t\t\t\t\t\t\t/>  \n\t\t\t\t\t\t\t\t<ToolbarButton \n\t\t\t\t\t\t\t\t\tlabel=\"Run\" \n\t\t\t\t\t\t\t\t\ttitle=\"Click to run this project\"  \n\t\t\t\t\t\t\t\t\tshow={this.props.userRole !== \"ReadOnly\"}\n\t\t\t\t\t\t\t\t\tonClick={this.props.runMarxan} \n\t\t\t\t\t\t\t\t\tdisabled={this.props.preprocessing || (this.props.features.length === 0) || this.props.puEditing}  \n\t\t\t\t\t\t\t\t\tsecondary={true} \n\t\t\t\t\t\t\t\t/>  \n\t\t\t\t\t\t</Paper>\n\t\t\t\t\t</Paper>\n\t\t\t\t</div>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nexport default InfoPanel;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from \"react\";\nimport Slider from 'material-ui/Slider';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faEye } from '@fortawesome/free-regular-svg-icons';\nimport { faEyeSlash } from '@fortawesome/free-regular-svg-icons';\n\nclass TransparencyControl extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tshowSlider: false\n\t\t};\n\t\tthis.old_opacity = 0.5;\n\t}\n\tonChange(evt, newValue) {\n\t\t//set a local property to capture the old opacity\n\t\tthis.old_opacity = this.props.opacity;\n\t\tthis.props.changeOpacity(newValue);\n\t}\n\n\ttoggleLayer() {\n\t\t//see if the layer is currently visible\n\t\tif (this.props.opacity > 0) {\n\t\t\t//hide the layer\n\t\t\tthis.onChange(undefined, 0);\n\t\t}\n\t\telse {\n\t\t\t//show the layer\n\t\t\tthis.onChange(undefined, this.old_opacity);\n\t\t}\n\t}\n\tmouseEnter(event) {\n\t\tthis.setState({\n\t\t\tshowSlider: true\n\t\t});\n\t}\n\n\tmouseLeave(event) {\n\t\tthis.setState({\n\t\t\tshowSlider: false\n\t\t});\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div className={'transparencyControl'} onMouseEnter={ this.mouseEnter.bind(this) } onMouseLeave={ this.mouseLeave.bind(this) } title={ \"Click to toggle visibility\" }>\n\t\t\t\t<div className={'opacityToggleContainer'}>\n\t\t\t\t\t<FontAwesomeIcon icon={(this.props.opacity === 0 ) ? faEyeSlash : faEye } style={ { color: 'gainsboro' } } onClick={ this.toggleLayer.bind(this) } />\n\t\t\t\t</div>\n\t\t\t\t<Slider value={ this.props.opacity } onChange={ this.onChange.bind(this) } className={'opacitySlider'} style={ { display: (this.state.showSlider) ? \"inline-block\" : \"none\", width: '100px' } } sliderStyle={ { margin: '0px' } } />\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default TransparencyControl;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from 'react';\nimport Hexagon from 'react-hexagon';\n\nclass Swatch extends React.Component {\n\trender() {\n\t    //get a slightly wider line if hte fill-color is not specified\n\t    let lineWidth = (this.props.item.fillColor === 'none') ? '1.5px' : '1px';\n        switch (this.props.shape) {\n            case 'hexagon':\n                return <div className={'hexDiv'} ><Hexagon className={'hexLegendItem'} style={{fill: this.props.item.fillColor, stroke: this.props.item.strokeColor, strokeWidth: 30}}/></div>;\n            default:\n                return <div style={ { backgroundColor: this.props.item.fillColor, width: '14px', height: '16px', border: this.props.item.strokeColor + ' ' + lineWidth + ' solid', margin: '3px', display: 'inline-flex', verticalAlign: 'top' } }></div>;\n        }\n\t}\n}\n\nexport default Swatch;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport * as React from 'react';\nimport TransparencyControl from './TransparencyControl';\nimport Swatch from './Swatch';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faCog } from '@fortawesome/free-solid-svg-icons';\nimport Sync from 'material-ui/svg-icons/notification/sync'; \n\nclass LayerLegend extends React.Component {\n    constructor(props){\n        super(props);\n        //set the initial opacity of the layer based on the layers paint property or for legends with subLayers, the first layers opacity\n        let layer = (this.props.hasOwnProperty('subLayers')) ? this.props.subLayers[0] : this.props.layer;\n        let opacity = 0;\n        switch (layer.type) {\n            case 'fill':\n                opacity = layer.paint['fill-opacity'];\n                break;\n            case 'line':\n                opacity = layer.paint['line-opacity'];\n                break;\n            default:\n                // code\n        }\n        this.state = {opacity: opacity};\n    }\n    changeOpacity(opacity){\n        //set the state\n        this.setState({opacity: opacity});\n        //the layer legend may in fact represent many separate layers (e.g. for features) - these are passed in as subLayers and each needs to have the opacity set\n        if (this.props.hasOwnProperty('subLayers')){\n            this.props.subLayers.forEach(layer => {\n                this.props.changeOpacity(layer.id, opacity);\n            });\n        }else{\n            //call the change opacity method on a single layer - this actually changes the opacity of the layer\n            this.props.changeOpacity(this.props.layer.id, opacity);\n        }\n    }\n    renderItems(){\n        //iterate through the items in this layers legend\n        return this.props.items.map((item, index) => {\n            //get a unique key\n            let key = 'legend_' + this.props.layer.id + '_item_' + index;\n            //if the legend is showing a range in values then put in a horizontal separator between the items\n            let separator = (this.props.range && index === 1) ? <div className={'separator'}>-</div> : null;\n            return <div key={key} style={{display: (this.props.range) ? 'inline' : 'block'}}>\n                {separator}\n    \t\t\t<Swatch item={item} key={key} shape={this.props.shape}/>\n    \t\t\t<div style={ { display: 'inline-flex', verticalAlign: 'top', marginLeft: '7px', fontSize: '12px' } } key={key + '_label'}>{item.label}</div>\n    \t\t </div>;\n        });\n    }\n    render() {\n        //get the items to render - if the layer is loading then get a spinner\n        let items = (this.props.loading) ? <Sync className='spin costsLayerSpinner' style={{display: (this.props.loading) ? 'inline-block' : 'none'}} key={\"costsspinner\"}/>\n        : this.renderItems();\n        //set symbology button\n        let setSymbologyBtn = (this.props.hasOwnProperty('setSymbology')) ? <FontAwesomeIcon className={'setSymbologyBtn'} icon={faCog} style={{color: 'gainsboro'}} onClick={this.props.setSymbology} title={'Configure symbology'}/> : null;\n        return (\n            <React.Fragment>\n                <div className={\"tabTitle tabTitleInlineBlock\"} style={{marginTop: (this.props.hasOwnProperty('topMargin')) ? this.props.topMargin : 'unset'}} key={'legend_' + this.props.layer.id}>{this.props.layer.metadata.name}</div>\n                {setSymbologyBtn}\n    \t\t\t<TransparencyControl changeOpacity={this.changeOpacity.bind(this)} opacity={this.state.opacity}/>\n                <div>{items}</div>\n            </React.Fragment>\n        );\n    }\n}\n\nexport default LayerLegend;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport * as React from 'react';\nimport CONSTANTS from './constants';\nimport { getMaxNumberOfClasses } from './Helpers.js';\nimport LayerLegend from './LayerLegend';\n\nclass MapLegend extends React.Component {\n    //gets the summed solutions legend item\n    getSummedSolution(layer, colorCode) {\n        let items;\n        //get the data value for the highest break in the data to see if we are viewing the sum solutions or an individual solution\n        let summed = (this.props.brew.breaks[this.props.brew.breaks.length - 1] === 1) ? false : true;\n        if (summed) {\n            //get the number of classes the user currently has selected\n            let numClasses = this.props.brew.getNumClasses();\n            //get the maximum number of colors in this scheme\n            let colorSchemeLength = getMaxNumberOfClasses(this.props.brew, colorCode);\n            //get the color scheme\n            let colorScheme = this.props.brew.colorSchemes[colorCode];\n            //get the number of colors to show as an array\n            let numClassesArray = (numClasses <= colorSchemeLength) ? Array.apply(null, {\n                length: numClasses\n            }).map(Number.call, Number) : Array.apply(null, {\n                length: colorSchemeLength\n            }).map(Number.call, Number);\n            let classesToShow = numClassesArray.length;\n            //get the legend items\n            items = numClassesArray.map((item) => {\n                //see if the data is a range - if the difference in the number of solutions is only 1, then it is not a range\n                let range = (this.props.brew.breaks[item + 1] - this.props.brew.breaks[item] > 1) ? true : false;\n                let suffix = (this.props.brew.breaks[item + 1] === 1) ? \" solution\" : \" solutions\";\n                let legendLabel = (range) ? (this.props.brew.breaks[item] + 1) + ' - ' + this.props.brew.breaks[item + 1] + suffix : this.props.brew.breaks[item + 1] + suffix;\n                return { layer: layer, fillColor: colorScheme[classesToShow][item], strokeColor: 'lightgray', label: legendLabel };\n            });\n            //return the items\n            return items;\n        }\n        else {\n            //viewing a single solution rather than the sum solution\n            return [{fillColor: 'rgba(255, 0, 136,1)', strokeColor:'lightgray', label: 'Proposed network'}];\n        }\n    }\n\n    render() {\n        let layers = [];\n        //get the planning grid shape\n        this.planning_grid_shape = (this.props.metadata && this.props.metadata.PLANNING_UNIT_NAME && this.props.metadata.PLANNING_UNIT_NAME.includes('hexagon')) ? 'hexagon' : 'square';\n        //move the costs layer to the end of the map legend - first see if it is present\n        let costLayers = this.props.visibleLayers.filter(item => (item.id === CONSTANTS.COSTS_LAYER_NAME));\n        //cost layer present - move it to the end of the array\n        if (costLayers.length){\n            //get the other layers\n            layers = this.props.visibleLayers.filter(item => (item.id !== CONSTANTS.COSTS_LAYER_NAME));\n            //append the cost layer to the end\n            layers.push(costLayers[0]);\n        }else{\n            layers = this.props.visibleLayers;\n        }\n        //get the legend items for non-feature layers\n        let nonFeatureLegendItems = layers.map(layer => {\n            //get a unique key\n            let key = 'legend_' + layer.id;\n            //create the legend for non-feature layers\n            if (layer.metadata.type!==CONSTANTS.LAYER_TYPE_FEATURE_LAYER){\n                switch (layer.metadata.type) {\n                    case CONSTANTS.LAYER_TYPE_SUMMED_SOLUTIONS: //get the summed solutions legend\n                        let items = (this.props.brew && this.props.brew.breaks && this.props.brew.colorCode) ? this.getSummedSolution(layer, this.props.brew.colorCode) : [];\n                        return <LayerLegend key={key} topMargin={'15px'} changeOpacity={this.props.changeOpacity} layer={layer} items={items} shape={this.planning_grid_shape} setSymbology={this.props.openClassificationDialog}/>;\n                    case CONSTANTS.LAYER_TYPE_PLANNING_UNITS_COST:\n                        let minColor = layer.paint['fill-color'][3]; //min paint color\n                        let maxColor = layer.paint['fill-color'][layer.paint['fill-color'].length-2]; //max paint color\n                        //if the min and max costs are the same only create a single legend item\n                        if (layer.metadata.min === layer.metadata.max){\n                            return <LayerLegend key={key} loading={this.props.costsLoading} topMargin={'15px'} changeOpacity={this.props.changeOpacity} layer={layer} items={[{fillColor: minColor, strokeColor:'lightgray', label: layer.metadata.min}]} shape={this.planning_grid_shape} />;\n                        }else{\n                            return <LayerLegend key={key} loading={this.props.costsLoading} topMargin={'15px'}  changeOpacity={this.props.changeOpacity} layer={layer} items={[{fillColor: minColor, strokeColor:'lightgray', label: layer.metadata.min}, {fillColor: maxColor, strokeColor:'lightgray', label: layer.metadata.max}]} shape={this.planning_grid_shape} range={true} />;\n                        }\n                    case CONSTANTS.LAYER_TYPE_PLANNING_UNITS_STATUS:\n                        //get the layers that will be subLayers in the legend\n                        let puLayer = layers.filter(layer => (layer.id === CONSTANTS.PU_LAYER_NAME))[0];\n                        let puStatusLayer = layers.filter(layer => (layer.id === CONSTANTS.STATUS_LAYER_NAME))[0];\n                        return <LayerLegend key={key} topMargin={'15px'} changeOpacity={this.props.changeOpacity} layer={layer} subLayers={[puLayer, puStatusLayer]} items={[CONSTANTS.PU_STATUS_DEFAULT, CONSTANTS.PU_STATUS_LOCKED_IN, CONSTANTS.PU_STATUS_LOCKED_OUT]} shape={this.planning_grid_shape} />;\n                    case CONSTANTS.LAYER_TYPE_PROTECTED_AREAS:\n                        return <LayerLegend key={key} changeOpacity={this.props.changeOpacity} layer={layer} items={[{fillColor:'rgba(63,127,191)', strokeColor:'lightgray', label: 'Marine'},{fillColor:'rgba(99,148,69)', strokeColor:'lightgray', label: 'Terrestrial'}]} shape={'square'} />;\n                    default:\n                        return null;\n                }\n            }else{\n                return null;\n            }\n        });\n        //get any feature legend items - these are combined into a single legend - first populate the legend items for each feature\n        let featureLayers = layers.filter(layer => (layer.metadata.type===CONSTANTS.LAYER_TYPE_FEATURE_LAYER));\n        //populate the colors of the feature swatches and their labels\n        let items = featureLayers.map((layer) => {\n            return {fillColor: layer.paint['fill-color'], strokeColor:'lightgray', label: layer.metadata.name};\n        });\n        //sort the items by label\n        items.sort((a, b) => {\n          if (a.label.toLowerCase() < b.label.toLowerCase())\n            return -1;\n          if (a.label.toLowerCase() > b.label.toLowerCase())\n            return 1;\n          return 0;\n        });\n        //now create the legend for features\n        let featureLegendItems = (items.length > 0) ? <LayerLegend topMargin={'15px'}  changeOpacity={this.props.changeOpacity} layer ={{metadata:{name:'Features'}}} subLayers={featureLayers} items={items} shape={'square'}/> : null;\n        //get any feature planning unit legend items - these are combined into a single legend - first populate the legend items for each feature planning unit\n        let featurePUIDLayers = layers.filter(layer => (layer.metadata.type===CONSTANTS.LAYER_TYPE_FEATURE_PLANNING_UNIT_LAYER));\n        //populate the colors of the feature planning grid swatches and their labels\n        items = featurePUIDLayers.map((layer) => {\n            return {fillColor: 'none', strokeColor: layer.metadata.lineColor, label: layer.metadata.name};\n        });\n        //now create the legend for feature planning grids\n        let featurePUIDLegendItems = (items.length > 0) ? <LayerLegend topMargin={'15px'}  changeOpacity={this.props.changeOpacity} layer ={{metadata:{name:'Planning units for features'}}} subLayers={featurePUIDLayers} items={items} shape={this.planning_grid_shape}/> : null;\n        return (\n            <React.Fragment>\n                {nonFeatureLegendItems}\n                {featureLegendItems}\n                {featurePUIDLegendItems}\n    \t    </React.Fragment>\n        );\n    }\n}\n\nexport default MapLegend;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport * as React from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faExclamationTriangle } from '@fortawesome/free-solid-svg-icons';\nimport { faCheckCircle } from '@fortawesome/free-solid-svg-icons';\nimport { faArrowAltCircleRight } from '@fortawesome/free-solid-svg-icons';\nimport Sync from 'material-ui/svg-icons/notification/sync';\n\nclass Log extends React.Component {\n\t\n\trender() {\n    \treturn (\n    \t    <div className={this.props.className}>\n    \t    \t{/*spinner*/}\n    \t    \t<Sync className='spin' style={{display: (this.props.message.status === \"Preprocessing\") ? 'inline' : 'none', height: '16px', width: '16px', verticalAlign: 'sub', color: 'rgb(255, 64, 129)', marginRight:'6px'}} title={this.props.message.info}/>\n    \t    \t{/*preprocessing complete*/}\n    \t    \t<FontAwesomeIcon icon={faCheckCircle} style={{display: ((this.props.message.status === 'Finished')&&(!this.props.message.hasOwnProperty('error'))) ? 'inline' : 'none', color:'green', marginRight:'6px'}} title={'Preprocessing completed'}/>\n    \t    \t{/*upload complete*/}\n    \t    \t<FontAwesomeIcon icon={faArrowAltCircleRight} style={{display: (this.props.message.status === 'UploadComplete') ? 'inline' : 'none', color:'green', marginRight:'6px'}} title={'Upload complete'}/>\n    \t    \t{/*error*/}\n    \t        <FontAwesomeIcon icon={faExclamationTriangle} style={{color:'red', display:(this.props.message.hasOwnProperty('error') ? 'inline' : 'none'), marginRight:'6px'}} title={this.props.message.info}/>\n    \t        {/*all other messages*/}\n    \t        <div style={{display:'inline'}} dangerouslySetInnerHTML={{__html: this.props.message.info}}/>\n    \t        {/*timestamp*/}\n    \t        <div className='timestamp' style={{display: (this.props.className.includes(\"logFinish\")) ? 'inline' : 'none'}}>{(this.props.message.hasOwnProperty('timestamp')) ? this.props.message.timestamp.toLocaleString() : ''}</div>\n    \t    </div>\n    \t);\n\t}\n}\n\nexport default Log;","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport * as React from 'react';\nimport LogItem from './LogItem';\n\nclass Log extends React.Component {\n\trender() {\n\t\tlet children = this.props.messages.map((message, index) => {\n\t\t\tlet className = '';\n\t\t\t//message cleaning and formatting\n\t\t\tswitch (message.status) {\n\t\t\t\tcase 'RunningMarxan': //from marxan runs - remove all the double line endings\n\t\t\t\t\tclassName = 'logItem logMessage';\n\t\t\t\t\tObject.assign(message, { info: message.info.replace(/(\\n\\n {2}Init)/gm, \"\\n  Init\").replace(/(\\n\\n {2}ThermalAnnealing)/gm, \"\\n  ThermalAnnealing\").replace(/(\\n\\n {2}Iterative)/gm, \"\\n  Iterative\").replace(/(\\n\\n {2}Best)/gm, \"\\n  Best\") });\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'Started':\n\t\t\t\tcase 'Uploading':\n\t\t\t\t\tclassName = 'logItem logStart';\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"Preprocessing\":\n\t\t\t\tcase \"FeatureCreated\":\n\t\t\t\t\tclassName = 'logItem logMessageBlock';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'Finished':\n\t\t\t\tcase 'UploadComplete':\n\t\t\t\tcase 'UploadFailed':\n\t\t\t\t\tclassName = 'logItem logFinish';\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tclassName = 'logItem logNone';\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\t//if there is an error, then set that as the message\n\t\t\tif (message.hasOwnProperty('error')) Object.assign(message, { info: message.error });\n\t\t\treturn <LogItem message={message} key={index} preprocessing={this.props.preprocessing} className={className}/>;\n\t\t});\n\t\treturn (\n\t\t\t<div id=\"log\" onMouseEnter={this.props.mouseEnter} onMouseLeave={this.props.mouseLeave}>{children}</div>\n\t\t);\n\t}\n}\n\nexport default Log;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from 'react';\nimport ToolbarButton from './ToolbarButton';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faEraser } from '@fortawesome/free-solid-svg-icons';\nimport ReactTable from \"react-table\";\nimport Paper from 'material-ui/Paper';\nimport { Tabs, Tab } from 'material-ui/Tabs';\nimport MapLegend from './MapLegend';\nimport Log from './Log'; \nimport Clipboard from 'material-ui/svg-icons/action/assignment';\nimport Sync from 'material-ui/svg-icons/notification/sync';\n\nlet runtime=0;\n\nclass ResultsPanel extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = { showClipboard: false, selectedSolution: undefined,runtimeStr:'00:00s' };\n\t}\n\tcomponentDidUpdate(prevProps, prevState) {\n\t\t//scroll the log div to the bottom\n\t\t// if (this.props.messages.length !== prevProps.messages.length) {\n\t\t// \tvar objDiv = document.getElementById(\"log\");\n\t\t// \tif (objDiv) objDiv.scrollTop = objDiv.scrollHeight;\n\t\t// }\n\t\t\tvar objDiv = document.getElementById(\"log\");\n\t\t\tif (objDiv) objDiv.scrollTop = objDiv.scrollHeight;\n\t\tif (this.props.solutions !== prevProps.solutions) {\n\t\t\tthis.resetSolution();//unselect a solution\n\t\t}\n\t\tif (this.props && this.props.preprocessing && prevProps && !prevProps.preprocessing) this.startTimer();\n\t\tif (prevProps && prevProps.preprocessing && this.props && !this.props.preprocessing) this.stopTimer();\n\t}\n\tstr_pad_left(string,pad,length) {\n\t    return (new Array(length+1).join(pad)+string).slice(-length);\n\t}\n\tstartTimer(){\n\t\truntime = 0;\n\t    this.timer = setInterval(() => {\n\t    \tvar minutes = Math.floor(runtime / 60);\n\t    \tvar seconds = runtime - (minutes * 60);\n\t\t\tvar finalTime = this.str_pad_left(minutes,'0',2)+':'+this.str_pad_left(seconds,'0',2);\n\t\t\tthis.setState({runtimeStr: finalTime });\n\t\t\truntime = runtime + 1;\n\t    }, 1000);\n\t}\n\tstopTimer(){\n    //clear the timer\n    clearInterval(this.timer);\n    this.timer = null;\n\t}\n\tloadSolution(solution) { //loads the solution using the projects owner\n\t\tthis.props.loadSolution(solution, this.props.owner);\n\t}\n\n\tmouseEnter(event) {\n\t\tthis.setState({ showClipboard: true });\n\t}\n\n\tmouseLeave(event) {\n\t\tif (event.relatedTarget.id !== 'buttonsDiv') this.setState({ showClipboard: false });\n\t}\n\n\tselectText(node) {\n\t\tnode = document.getElementById(node);\n\t\tif (document.body.createTextRange) {\n\t\t\tconst range = document.body.createTextRange();\n\t\t\trange.moveToElementText(node);\n\t\t\trange.select();\n\t\t}\n\t\telse if (window.getSelection) {\n\t\t\tconst selection = window.getSelection();\n\t\t\tconst range = document.createRange();\n\t\t\trange.selectNodeContents(node);\n\t\t\tselection.removeAllRanges();\n\t\t\tselection.addRange(range);\n\t\t}\n\t\telse {\n\t\t\tconsole.warn(\"Could not select text in node: Unsupported browser.\");\n\t\t}\n\t}\n\n\tcopyLog(evt) {\n\t\tthis.selectText(\"log\");\n\t\tevt.target.focus();\n\t\tdocument.execCommand('copy');\n\t}\n\n\t//resets the currently selected solution\n\tresetSolution(){\n\t\tif (this.state.selectedSolution) this.changeSolution(undefined, undefined); \n\t}\n\t\n\t//fired in the onClick event handler of the react table\n\tchangeSolution(event, solution) {\n\t\tthis.setState({ selectedSolution: solution });\n\t\tif (solution) this.loadSolution(solution.Run_Number);\n\t}\n\t\n\trender() {\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<div style={{width:'300px',height:'400px', position:'absolute',right:'140px','display': (this.props.open ? 'block' : 'none')}}>\n\t\t\t\t\t<Paper zDepth={2} className='ResultsPanelPaper'>\n\t\t\t\t\t\t<div className=\"resultsTitle\">Results</div>\n\t\t\t\t\t\t<Tabs contentContainerStyle={{'margin':'20px'}} className={'resultsTabs'} value={this.props.activeResultsTab} id='resultsTabs'>\n\t\t\t\t\t\t\t<Tab label=\"Legend\" value=\"legend\" onActive={this.props.legend_tab_active} >\n\t\t\t\t\t\t\t\t<div className={'legendTab'}>\n\t\t\t\t\t\t\t\t\t<MapLegend {...this.props} brew={this.props.brew}/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</Tab>\n\t\t\t\t\t\t\t<Tab label=\"Solutions\" value=\"solutions\" onActive={this.props.solutions_tab_active} >\n\t\t\t\t\t\t\t\t<div id=\"solutionsPanel\" style={{'display': (!this.props.processing ? 'block' : 'none')}}>\n\t\t\t\t\t\t\t\t{(this.props.solutions&&this.props.solutions.length>0) ? \n\t\t\t\t\t\t\t\t\t<ReactTable\n\t\t\t\t\t\t\t\t\t\tthisRef={this}\n\t\t\t\t\t\t\t\t\t\tgetTrProps={(state, rowInfo, column, instance) => {\n\t\t\t\t\t\t\t\t\t\t\t\treturn { \n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick: (e) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstate.thisRef.changeSolution(e, rowInfo.original);\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle: { \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbackground: (rowInfo.original.Run_Number === (state.thisRef.state.selectedSolution&&state.thisRef.state.selectedSolution.Run_Number)) ? \"aliceblue\" : \"\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\ttitle: 'Click to show on the map'\n\t\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tclassName={'solutions_infoTable -highlight'}\n\t\t\t\t\t\t\t\t\t\tshowPagination={false}\n\t\t\t\t\t\t\t\t\t\tminRows={0}\n\t\t\t\t\t\t\t\t\t\tpageSize={this.props.solutions.length} \n\t\t\t\t\t\t\t\t\t\tnoDataText=''\n\t\t\t\t\t\t\t\t\t\tdata={this.props.solutions}\n\t\t\t\t\t\t\t\t\t\tcolumns={[{\n\t\t\t\t\t\t\t\t\t\t\t Header: 'Run', \n\t\t\t\t\t\t\t\t\t\t\t accessor: 'Run_Number',\n\t\t\t\t\t\t\t\t\t\t\t width:40,\n\t\t\t\t\t\t\t\t\t\t\t headerStyle:{'textAlign':'left'}                             \n\t\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\t\t Header: 'Score',\n\t\t\t\t\t\t\t\t\t\t\t accessor: 'Score',\n\t\t\t\t\t\t\t\t\t\t\t width:80,\n\t\t\t\t\t\t\t\t\t\t\t headerStyle:{'textAlign':'left'}\n\t\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\t\t Header: 'Cost',\n\t\t\t\t\t\t\t\t\t\t\t accessor: 'Cost' ,\n\t\t\t\t\t\t\t\t\t\t\t width:80,\n\t\t\t\t\t\t\t\t\t\t\t headerStyle:{'textAlign':'left'}\n\t\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\t\t Header: 'Planning Units', \n\t\t\t\t\t\t\t\t\t\t\t accessor: 'Planning_Units' ,\n\t\t\t\t\t\t\t\t\t\t\t width:50,\n\t\t\t\t\t\t\t\t\t\t\t headerStyle:{'textAlign':'left'} \n\t\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\t\t Header: 'Missing Values',\n\t\t\t\t\t\t\t\t\t\t\t accessor: 'Missing_Values' ,\n\t\t\t\t\t\t\t\t\t\t\t width:105,\n\t\t\t\t\t\t\t\t\t\t\t headerStyle:{'textAlign':'left'}\n\t\t\t\t\t\t\t\t\t\t}]}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t: null}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</Tab>\n\t\t\t\t\t\t\t<Tab label=\"Log\" value=\"log\" onActive={this.props.log_tab_active} style={{ display: (this.props.userRole === \"ReadOnly\") ? 'none' : 'block'}}>\n\t\t\t\t\t\t\t\t<Log messages={this.props.messages} id=\"log\" mouseEnter={this.mouseEnter.bind(this)} mouseLeave={this.mouseLeave.bind(this)} preprocessing={this.props.preprocessing}/>\n\t\t\t\t\t\t\t\t<div id='buttonsDiv' style={{position:'absolute',top:'430px',right:'16px',padding:'10px'}}>\n\t\t\t\t\t\t\t\t\t<ToolbarButton  \n\t\t\t\t\t\t\t\t\t\ticon={<Clipboard style={{height:'20px',width:'20px'}}/>} \n\t\t\t\t\t\t\t\t\t\ttitle=\"Copy to clipboard\"\n\t\t\t\t\t\t\t\t\t\tonClick={this.copyLog.bind(this)} \n\t\t\t\t\t\t\t\t\t\tshow={this.state.showClipboard}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<ToolbarButton  \n\t\t\t\t\t\t\t\t\t\ticon={<FontAwesomeIcon icon={faEraser} />} \n\t\t\t\t\t\t\t\t\t\ttitle=\"Clear log\"\n\t\t\t\t\t\t\t\t\t\tonClick={this.props.clearLog.bind(this)} \n\t\t\t\t\t\t\t\t\t\tshow={this.state.showClipboard}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className={\"runtime\"} style={{'display': (this.props.preprocessing ? 'block' : 'none')}}>Runtime: {this.state.runtimeStr}s</div>\n\t\t\t\t\t\t\t</Tab>\n\t\t\t\t\t\t</Tabs>     \n\t\t\t\t\t\t<div className=\"processingDiv\" style={{display:(this.props.preprocessing) ? 'block' : 'none'}} title=\"Processing..\">\n\t\t\t\t\t\t\t<Paper zDepth={2}>\n\t\t\t\t\t\t\t\t<div className=\"processingText\"></div>\n\t\t\t\t\t\t\t\t<Sync className='spin processingSpin' style={{color: 'rgb(255, 64, 129)'}}/>\n\t\t\t\t\t\t\t</Paper>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Paper>\n\t\t\t\t</div>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nexport default ResultsPanel;","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from 'react';\nimport CONSTANTS from './constants';\nimport MarxanDialog from './MarxanDialog';\nimport ReactTable from \"react-table\";\nimport {getArea, isNumber, isValidTargetValue} from './Helpers.js'; \n\nclass FeatureInfoDialog extends React.Component {\n\tonKeyPress(key, e) {\n\t\tif (e.nativeEvent.keyCode === 13 || e.nativeEvent.keyCode === 27) {\n\t\t\t//update the feature\n\t\t\tthis.updateFeatureValue(key,e);\n\t\t\t//closes this window\n\t\t\tthis.props.onOk();\n\t\t}\n\t}\n\tgetHTML(value, title = ''){\n\t\treturn <div title={(title !== '') ? title : value}>{value}</div>;\n\t}\n\t//adds Kms to the area values and rounds to 1 decimal place \n\tgetAreaHTML(props){\n\t\t//set the font color to red if the area protected is less than the target area\n\t\tlet color = (this.props.feature.protected_area < this.props.feature.target_area) && (props.row.key === 'Area protected') ? \"red\" : \"rgba(0, 0, 0, 0.6)\";\n\t\t//rounded to 6 sf in the hint\n\t\tlet html = <div title={getArea(props.row.value, this.props.reportUnits, false, 6)} style={{color:color}}>{getArea(props.row.value, this.props.reportUnits, true)}</div>;\n\t\treturn html;   \n\t}\n\trenderKeyCell(props){\n\t\treturn this.getHTML(props.row.key, props.original.hint);\n\t}\n\t//called when the user moves away from an editable property, e.g. target percent or spf\n\tupdateFeatureValue(key, evt){\n\t\tvar value = evt.currentTarget.innerHTML;\n\t\tif (((key === \"target_value\") && (isValidTargetValue(value))) || ((key === \"spf\") && (isNumber(value)))) {\n\t\t\tvar obj = {};\n\t\t\tobj[key] = value;\n\t\t\tthis.props.updateFeature(this.props.feature, obj);      \n\t\t}else{\n\t\t\talert(\"Invalid value\");\n\t\t}\n\t}\n\trenderValueCell(props){\n\t\tlet html;\n\t\tswitch (props.row.key) {\n\t\t\tcase 'ID':\n\t\t\tcase 'Alias':\n\t\t\tcase 'Feature class name':\n\t\t\t\thtml = this.getHTML(props.row.value, props.original.hint);\n\t\t\t\tbreak;\n\t\t\tcase 'Description':\n\t\t\t\thtml = this.getHTML(props.row.value);\n\t\t\t\tbreak;\n\t\t\tcase 'Creation date': \n\t\t\t\thtml = this.getHTML(props.row.value);\n\t\t\t\tbreak;\n\t\t\tcase 'Mapbox ID':\n\t\t\t\thtml = ((props.row.value === \"\")||(props.row.value === null)) ? this.getHTML(\"Not available\", \"The feature was not uploaded to Mapbox\") : this.getHTML(props.row.value, \"The feature was uploaded to Mapbox with this identifier\");\n\t\t\t\tbreak;\n\t\t\tcase 'Total area':\n\t\t\t\thtml = (props.row.value === -1) ? this.getHTML(\"Not calculated\", \"Total areas are not available for imported projects\") : this.getAreaHTML(props, props.original.hint);\n\t\t\t\tbreak;\n\t\t\tcase 'Target percent':\n\t\t\t\thtml = (this.props.userRole === \"ReadOnly\") ? <div>{props.row.value}</div> : <div contentEditable suppressContentEditableWarning title=\"Click to edit\" onBlur={this.updateFeatureValue.bind(this, \"target_value\")} onKeyPress={this.onKeyPress.bind(this, \"target_value\")}>{props.row.value}</div>;\n\t\t\t\tbreak;\n\t\t\tcase 'Species Penalty Factor':\n\t\t\t\thtml = (this.props.userRole === \"ReadOnly\") ? <div>{props.row.value}</div> : <div contentEditable suppressContentEditableWarning title=\"Click to edit\" onBlur={this.updateFeatureValue.bind(this, \"spf\")} onKeyPress={this.onKeyPress.bind(this, \"spf\")}>{props.row.value}</div>;\n\t\t\t\tbreak;\n\t\t\tcase 'Preprocessed':\n\t\t\t\thtml = (props.row.value) ? this.getHTML(\"Yes\", \"The feature has been intersected with the planning units\") : this.getHTML(\"No\", \"The feature has not yet been intersected with the planning units\");\n\t\t\t\tbreak;\n\t\t\tcase 'Planning grid area':\n\t\t\t\thtml = (props.row.value === -1) ? this.getHTML(\"Not calculated\", \"Calculated during pre-processing\") : this.getAreaHTML(props);\n\t\t\t\tbreak;\n\t\t\tcase 'Planning unit count':\n\t\t\t\thtml = (props.row.value === -1) ? this.getHTML(\"Not calculated\", \"Calculated during pre-processing\") : this.getHTML(props.row.value);\n\t\t\t\tbreak;\n\t\t\tcase 'Target area':\n\t\t\t\thtml = (props.row.value === -1) ? this.getHTML(\"Not calculated\", \"Calculated during a Marxan run\") : this.getAreaHTML(props);\n\t\t\t\tbreak;\n\t\t\tcase 'Area protected':\n\t\t\t\thtml = (props.row.value === -1) ? this.getHTML(\"Not calculated\", \"Calculated during a Marxan run\") : this.getAreaHTML(props);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t\treturn html;\n\t} \n\t\trender(){\n\t\t\tif (this.props.feature){\n\t\t\t\tlet data =[];\n\t\t\t\t//iterate through the feature properties and set the data to bind to the table - if it is a feature from the old version of marxan then showForOld must be true for that property to be shown\n\t\t\t\tCONSTANTS.FEATURE_PROPERTIES.forEach((item)=>{\n\t\t\t\t\tif ((!this.props.feature.old_version && item.showForNew) || (this.props.feature.old_version && item.showForOld)){\n\t\t\t\t\t\tdata.push({key: item.key, value: this.props.feature[item.name], hint: item.hint});\n\t\t\t\t\t}\n\t\t\t\t}, this);\n\t\t\t\treturn (\n\t\t\t\t\t<MarxanDialog title=\"Properties\" \n\t\t\t\t\t\t{...this.props}  \n\t\t\t\t\t\tcontentWidth={380}\n\t\t\t\t\t\thelpLink={\"user.html#feature-properties-window\"}\n\t\t\t\t\t\toffsetX={135}\n\t\t\t\t\t\toffsetY={250}\n\t\t\t\t\t\tchildren={\n\t\t\t\t\t\t\t<ReactTable \n\t\t\t\t\t\t\t\tshowPagination={false} \n\t\t\t\t\t\t\t\tclassName={(this.props.feature.old_version) ? 'infoTableOldVersion' : 'infoTable'}\n\t\t\t\t\t\t\t\tminRows={0}\n\t\t\t\t\t\t\t\tpageSize={data.length}\n\t\t\t\t\t\t\t\tdata={data}\n\t\t\t\t\t\t\t\tnoDataText=''\n\t\t\t\t\t\t\t\tcolumns={[{\n\t\t\t\t\t\t\t\t\t Header: 'Key', \n\t\t\t\t\t\t\t\t\t accessor: 'key',\n\t\t\t\t\t\t\t\t\t width:150,\n\t\t\t\t\t\t\t\t\t headerStyle:{'textAlign':'left'},\n\t\t\t\t\t\t\t\t\t Cell: props => this.renderKeyCell(props)\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t Header: 'Value',\n\t\t\t\t\t\t\t\t\t accessor: 'value',\n\t\t\t\t\t\t\t\t\t width:185,\n\t\t\t\t\t\t\t\t\t headerStyle:{'textAlign':'left'},\n\t\t\t\t\t\t\t\t\t Cell: props => this.renderValueCell(props)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t key=\"k9\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t}\n\t\t\t\t\t/>);\n\t\t\t}else{\n\t\t\t\treturn null;\n\t\t}\n\t}\n}\n\nexport default FeatureInfoDialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n// import { faBookOpen } from '@fortawesome/free-solid-svg-icons';\nimport { faPlusCircle } from '@fortawesome/free-solid-svg-icons';\nimport { faTrashAlt } from '@fortawesome/free-regular-svg-icons';\nimport Import from 'material-ui/svg-icons/action/get-app';\nimport Export from 'material-ui/svg-icons/editor/publish';\nimport Clone from 'material-ui/svg-icons/content/content-copy';\nimport ToolbarButton from './ToolbarButton';\nimport MarxanDialog from './MarxanDialog';\nimport MarxanTable from \"./MarxanTable\";\nimport Popover from 'material-ui/Popover';\nimport Menu from 'material-ui/Menu';\nimport MenuItem from 'material-ui/MenuItem';\n\nclass ProjectsDialog extends React.Component { \n\t\tconstructor(props) {\n\t\t\tsuper(props);\n\t\t\tthis.state = { searchText: \"\",selectedProject: undefined };\n\t\t}\n\t\t_delete() {\n\t\t\tthis.props.deleteProject(this.state.selectedProject.user, this.state.selectedProject.name);\n\t\t\tthis.setState({ selectedProject: false });\n\t\t}\n\t\tload() {\n\t\t\tif ((this.props.oldVersion === true) && (this.state.selectedProject.oldVersion === false)) {\n\t\t\t\t//get all the features again otherwise the allFeatures state will be bound to the old versions features\n\t\t\t\tthis.props.getAllFeatures().then(function() {\n\t\t\t\t\tthis.loadAndClose();\n\t\t\t\t}.bind(this));\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.loadAndClose();\n\t\t\t}\n\t\t}\n\t\tloadAndClose() {\n\t\t\t//load the project\n\t\t\tthis.props.loadProject(this.state.selectedProject.name, this.state.selectedProject.user);\n\t\t\tthis.closeDialog();\n\t\t}\n\t    showImportProjectPopover(event) {\n\t      this.setState({ importProjectAnchor: event.currentTarget });\n\t      this.props.showImportProjectPopover();\n\t    }\n\t\t_new() {\n\t\t\t//get all the features again otherwise the allFeatures state may be bound to an old version of marxans features\n\t\t\tthis.props.getAllFeatures().then(function() {\n\t\t\t\tthis.props.openNewProjectDialog();\n\t\t\t\tthis.closeDialog();\n\t\t\t}.bind(this));\n\t\t}\n\t\tcloneProject() {\n\t\t\tthis.props.cloneProject(this.state.selectedProject.user, this.state.selectedProject.name);\n\t\t}\n\t\texportProject(){\n\t\t\tthis.props.exportProject(this.state.selectedProject.user, this.state.selectedProject.name).then(url=>{\n\t\t\t\twindow.location = url;\n\t\t\t});\n\t\t\tthis.closeDialog();\n\t\t}\n\t\topenImportProjectDialog() {\n\t\t\tthis.props.openImportProjectDialog();\n\t\t\tthis.closeDialog();\n\t\t}\n\t\topenImportMXWDialog(){\n\t\t\tthis.props.openImportMXWDialog();\n\t\t\tthis.closeDialog();\n\t\t}\n\t\tchangeProject(event, project) {\n\t\t\tthis.setState({ selectedProject: project });\n\t\t}\n\t\tcloseDialog() {\n\t\t\tthis.setState({ selectedProject: undefined });\n\t\t\tthis.props.onOk(); \n\t\t}\n\t\tsortDate(a, b, desc){\n\t\t\treturn (new Date(a.slice(6,8),a.slice(3,5)-1,a.slice(0,2),a.slice(9,11),a.slice(12,14),a.slice(15,17)) > new Date(b.slice(6,8),b.slice(3,5)-1,b.slice(0,2),b.slice(9,11),b.slice(12,14),b.slice(15,17))) ? 1 : -1;\n\t\t}\n\t\trenderDate(row){\n\t\t\treturn <div style={{width: '100%',height: '100%',backgroundColor: '#dadada',borderRadius: '2px'}} title={row.original.createdate}>{row.original.createdate.substr(0,8)}</div>;        \t\t}\n\t\trenderTitle(row){\n\t\t\treturn <div style={{width: '100%',height: '100%',backgroundColor: '#dadada',borderRadius: '2px'}} title={row.original.description}>{row.original.description}</div>;        \n\t\t}\n\t\trenderName(row){\n\t\t\treturn <div style={{width: '100%',height: '100%',backgroundColor: '#dadada',borderRadius: '2px'}} title={row.original.name}>{row.original.name}</div>;        \n\t\t}\n\t    searchTextChanged(value){\n\t      this.setState({searchText: value});\n\t    }\n\t\trender() {\n\t\t\t\tlet tableColumns = [];\n\t\t\t\tif (['Admin', 'ReadOnly'].includes(this.props.userRole)) {\n\t\t\t\t\ttableColumns = [{ Header: 'User', accessor: 'user', width: 90, headerStyle: { 'textAlign': 'left' } }, { Header: 'Name', accessor: 'name', width: 200, headerStyle: { 'textAlign': 'left' }, Cell: this.renderName.bind(this) }, { Header: 'Description', accessor: 'description', width: 360, headerStyle: { 'textAlign': 'left' }, Cell: this.renderTitle.bind(this) }, { Header: 'Created', accessor: 'createdate', width: 70, headerStyle: { 'textAlign': 'left' }, Cell: this.renderDate.bind(this), sortMethod: this.sortDate.bind(this)}];\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\ttableColumns = [{ Header: 'Name', accessor: 'name', width: 260, headerStyle: { 'textAlign': 'left' }, Cell: this.renderName.bind(this) }, { Header: 'Description', accessor: 'description', width: 390, headerStyle: { 'textAlign': 'left' }, Cell: this.renderTitle.bind(this) }, { Header: 'Created', accessor: 'createdate', width: 220, headerStyle: { 'textAlign': 'left' }, Cell: this.renderDate.bind(this), sortMethod: this.sortDate.bind(this) }];\n\t\t\t\t}\n\t\t\t\tif (this.props.projects) {\n\t\t\t\t\treturn (\n\t\t\t\t\t<MarxanDialog \n\t\t\t\t\t{...this.props} \n\t\t\t\t\t// titleBarIcon={faBookOpen}\n\t\t\t\t\tokLabel={(this.props.userRole === \"ReadOnly\") ? \"Open (Read-only)\" : \"Open\"}\n\t\t\t\t\tonOk={this.load.bind(this)}\n\t\t\t\t\tonCancel={this.closeDialog.bind(this)}\n\t\t\t\t\tokDisabled={!this.state.selectedProject}\n\t\t\t\t\tshowCancelButton={true}\n\t\t\t\t\thelpLink={\"user.html#the-projects-window\"}\n\t\t\t\t\tautoDetectWindowHeight={false}\n\t\t\t\t\tbodyStyle={{ padding:'0px 24px 0px 24px'}}\n\t\t\t\t\ttitle=\"Projects\"  \n\t\t\t\t\tshowSearchBox={true} \n\t\t\t\t\tsearchTextChanged={this.searchTextChanged.bind(this)}\n\t\t\t\t\tchildren={\n\t\t\t\t\t\t<React.Fragment key=\"k2\">\n\t\t\t\t\t\t\t\t<div id=\"projectsTable\">\n\t\t\t\t\t\t\t\t\t<MarxanTable \n\t\t\t\t\t\t\t\t\t\tdata={this.props.projects}\n\t\t\t\t\t\t\t\t\t\tcolumns={tableColumns}\n\t\t\t                            searchColumns={['user','name','description']}\n\t\t\t                            searchText={this.state.searchText}\n\t\t\t                            selectedProject={this.state.selectedProject}\n\t\t\t                            changeProject={this.changeProject.bind(this)}\n\t\t\t\t\t\t\t\t\t\tgetTrProps={(state, rowInfo, column) => {\n\t\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t\t\t\t\t\t\tbackground: ((rowInfo.original.user === (state.selectedProject&&state.selectedProject.user))&&(rowInfo.original.name === (state.selectedProject&&state.selectedProject.name))) ? \"aliceblue\" : \"\"\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\tonClick: (e) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tstate.changeProject(e, rowInfo.original);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t  </div>\n\t\t\t\t\t\t\t  <div id=\"projectsToolbar\" style={{display: (this.props.userRole === \"ReadOnly\") ? 'none' : 'block'}}>\n\t\t\t\t\t\t\t\t<ToolbarButton \n\t\t\t\t\t\t\t\t\tshow={!this.props.unauthorisedMethods.includes(\"createProject\")}\n\t\t\t\t\t\t\t\t\ticon={<FontAwesomeIcon icon={faPlusCircle} />} \n\t\t\t\t\t\t\t\t\ttitle=\"New project\" \n\t\t\t\t\t\t\t\t\tonClick={this._new.bind(this)} \n\t\t\t\t\t\t\t\t\tlabel={\"New\"}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<ToolbarButton \n\t\t\t\t\t\t\t\t\tshow={!(this.props.userRole === \"ReadOnly\")}\n\t\t\t\t\t\t\t\t\ticon={<Import style={{height:'20px',width:'20px'}}/>} \n\t\t\t\t\t\t\t\t\ttitle=\"Import a project from Marxan Web or Marxan DOS\"\n\t\t\t\t\t\t\t\t\tonClick={ this.showImportProjectPopover.bind(this) }\n\t\t\t\t\t\t\t\t\tdisabled={ this.props.loading }  \n\t\t\t\t\t\t\t\t\tlabel={\"Import\"}\n\t\t\t\t\t\t\t\t/>\n\t\t                         <Popover open={ this.props.importProjectPopoverOpen } anchorEl={ this.state.importProjectAnchor } anchorOrigin={ { horizontal: 'left', vertical: 'bottom' } } targetOrigin={ { horizontal: 'left', vertical: 'top' } } onRequestClose={ this.props.hideImportProjectPopover }>\n\t\t                           <Menu desktop={ true }>\n\t\t                             <MenuItem style={{display: (!this.props.unauthorisedMethods.includes(\"importProject\")) ? 'inline-block' : 'none'}} primaryText=\"From Marxan Web\" title=\"Import a project from a Marxan Web *.mxw file\" onClick={this.openImportMXWDialog.bind(this)} />\n\t\t                             <MenuItem style={{display: (!this.props.unauthorisedMethods.includes(\"createImportProject\")) ? 'inline-block' : 'none'}} primaryText=\"From Marxan DOS\" title=\"Import a project from a Marxan DOS\" onClick={this.openImportProjectDialog.bind(this)} />\n\t\t                           </Menu>\n\t\t                         </Popover>\n\t\t\t\t\t\t\t\t<ToolbarButton \n\t\t\t\t\t\t\t\t\tshow={!this.props.unauthorisedMethods.includes(\"exportProject\")}\n\t\t\t\t\t\t\t\t\ticon={<Export style={{height:'20px',width:'20px'}}/>} \n\t\t\t\t\t\t\t\t\ttitle=\"Export project\" \n\t\t\t\t\t\t\t\t\tonClick={this.exportProject.bind(this)} \n\t\t\t\t\t\t\t\t\tdisabled={!this.state.selectedProject || this.props.loading || this.state.selectedProject.oldVersion}\n\t\t\t\t\t\t\t\t\tlabel={\"Export\"}\n\t\t\t\t\t\t\t\t/> \n\t\t\t\t\t\t\t\t<ToolbarButton \n\t\t\t\t\t\t\t\t\tshow={!this.props.unauthorisedMethods.includes(\"cloneProject\")}\n\t\t\t\t\t\t\t\t\ticon={<Clone style={{height:'20px',width:'20px'}}/>} \n\t\t\t\t\t\t\t\t\ttitle=\"Clone project\" \n\t\t\t\t\t\t\t\t\tonClick={this.cloneProject.bind(this)} \n\t\t\t\t\t\t\t\t\tdisabled={!this.state.selectedProject || this.props.loading}\n\t\t\t\t\t\t\t\t\tlabel={\"Clone\"}\n\t\t\t\t\t\t\t\t/> \n\t\t\t\t\t\t\t\t<ToolbarButton  \n\t\t\t\t\t\t\t\t\tshow={!this.props.unauthorisedMethods.includes(\"deleteProject\")}\n\t\t\t\t\t\t\t\t\ticon={<FontAwesomeIcon icon={faTrashAlt}  color='rgb(255, 64, 129)'/>} \n\t\t\t\t\t\t\t\t\ttitle=\"Delete project\" \n\t\t\t\t\t\t\t\t\tdisabled={!this.state.selectedProject || this.props.loading}\n\t\t\t\t\t\t\t\t\tonClick={this._delete.bind(this)} \n\t\t\t\t\t\t\t\t\tlabel={\"Delete\"}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t  </div>\n\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t} \n\t\t\t\t/>\n\t\t\t);\n\t\t}else{\n\t\t\treturn null;\n\t\t}\n\t}\n}\n\nexport default ProjectsDialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport * as React from 'react';\nimport MarxanTextField from './MarxanTextField';\n\nclass Metadata extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props); \n\t\tthis.state = {\n\t\t\tvalidName: undefined\n\t\t};\n\t}\n\tchangeName(event, newValue) {\n\t\tthis.props.setName(newValue);\n\t}\n\tchangeDescription(event, newValue) {\n\t\tthis.props.setDescription(newValue);\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<div style={{'marginTop':'-13px'}}> \n\t\t\t\t\t<MarxanTextField style={{width:\"310px\"}} errorText={this.state.validName === false ? 'Required field' : ''} value={this.props.name} onChange={this.changeName.bind(this)} floatingLabelText=\"Enter a name for the project\"/>\n\t\t\t\t\t<MarxanTextField style={{width:\"310px\"}} value={this.props.description} onChange={this.changeDescription.bind(this)} multiLine={true} rows={3} floatingLabelText=\"Enter a description for the project\"/>\n\t\t\t\t</div>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nexport default Metadata;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport * as React from 'react';\nimport MenuItem from 'material-ui/MenuItem';\nimport SelectField from 'material-ui/SelectField';\n\n//this is a generic component for selecting and dynamically displaying a layer from mapbox on a mapbox map\n//the following are property requirements:\n// map:         the mapbox map where the layer will be displayed\n// mapboxUser   the mapbox user id where the tilesets are stored, e.g. blished\n// items:       the items that you want to display in the select box. these must contain the following properties: \n//  alias               - a string for the text that will be shown in the select box\n//  feature_class_name  - the actual value that determines which item is selected - this should be the tileset name, e.g. pupng_terrestrial_hexagon_50\n//  envelope            - a well-known-text representation of the bounds of the mapbox layer, e.g. \"POLYGON((60.4758290002083 29.3772500001874,60.4758290002083 38.4906960004201,74.8898619998315 38.4906960004201,74.8898619998315 29.3772500001874,60.4758290002083 29.3772500001874))\" (optional)\n// selectedValue the value that is selected (controlled from the controlling component)\n//prerequisitives:\n// request library\n\nclass SelectFieldMapboxLayer extends React.Component {\n\tchangeItem(event, newValue) {\n\t\t//get the selected item\n\t\tlet item = this.props.items[newValue];\n\t\t//zoom to the layer\n\t\tif (item.envelope !== null){\n\t\t\tvar envelope = this.getLatLngLikeFromWKT(item.envelope);\n\t\t\tthis.props.map.fitBounds(envelope, { easing: function(num) { return 1; } });\n\t\t}\n\t\t// this.props.map.setPitch(60);\n\t\t//add the layer to the map\n\t\tthis.addLayerToMap(item.feature_class_name);\n\t\t//update the state in the owner\n\t\tthis.props.changeItem(item.feature_class_name);\n\t}\n\n\tgetLatLngLikeFromWKT(wkt) {\n\t\tlet envelope, returnVal;\n\t\tvar parse = require('wellknown');\n\t\tvar geometry = parse(wkt);\n\t\t//see if the envelope spans the dateline\n\t\tif (geometry.coordinates.length>1){\n\t\t\t//if the envelope spans the dateline then the first polygon is in the western hemisphere\n\t\t\tlet west = parse(wkt).coordinates[0];\n\t\t\tlet east = parse(wkt).coordinates[1];\n\t\t\treturnVal= [[east[0][1][0],east[0][1][1]],[west[0][1][0]+360,west[0][1][1]]];\n\t\t}else{\n\t\t\tenvelope = parse(wkt).coordinates[0];\n\t\t\treturnVal= [[envelope[0][0], envelope[0][1]],[envelope[2][0], envelope[2][1]]];\n\t\t}\n\t\treturn returnVal;\n\t}\n\n\t//check the layer exists\n\taddLayerToMap(mapboxlayername) {\n\t\tthis.mapboxlayername = mapboxlayername;\n\t\tvar request = require('request');\n\t\trequest('https://api.mapbox.com/v4/' + this.props.mapboxUser + '.' + mapboxlayername + '.json?access_token=' + this.props.registry.MBAT_PUBLIC + '&secure', this.parseUrlExists.bind(this));\n\t}\n\n\tparseUrlExists(err, res) {\n\t\tlet exists = (res && res.statusCode === 200) ? true : false;\n\t\tif (exists) {\n\t\t\t//remove the previous planning unit layer\n\t\t\tlet previousLayerId = this.props.map.getStyle().layers[this.props.map.getStyle().layers.length - 1].id;\n\t\t\t//check it is a planning unit layer\n\t\t\tif (previousLayerId.substr(0, 3) === \"pu_\") {\n\t\t\t\tthis.props.map.removeLayer(this.props.map.getStyle().layers[this.props.map.getStyle().layers.length - 1].id);\n\t\t\t}\n\t\t\t//remove the source if it already exists\n\t\t\tif (this.props.map.getSource(this.props.mapboxUser)) {\n\t\t\t\tthis.props.map.removeSource(this.props.mapboxUser);\n\t\t\t}\n\t\t\t//add the source for this layer\n\t\t\tthis.props.map.addSource('blishten', {\n\t\t\t\ttype: 'vector',\n\t\t\t\turl: \"mapbox://\" + this.props.mapboxUser + \".\" + this.mapboxlayername\n\t\t\t});\n\t\t\t//add the layer\n\t\t\tthis.props.map.addLayer({\n\t\t\t\t'id': this.mapboxlayername,\n\t\t\t\t'type': \"fill\",\n\t\t\t\t'source': this.props.mapboxUser,\n\t\t\t\t'source-layer': this.mapboxlayername, \n\t\t\t\t'paint': {\n\t\t\t\t\t'fill-color': '#f08',\n\t\t\t\t\t'fill-opacity': 0.4\n\t\t\t\t}\n\t\t\t});\n\t\t} \n\t\telse {\n\t\t\tconsole.log(\"The MapBox layer does not exist\"); \n\t\t}\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<SelectField \n\t\t\t\tonChange={this.changeItem.bind(this)} \n\t\t\t\tvalue={this.props.selectedValue} \n\t\t\t\tmenuItemStyle={{fontSize:'12px'}} \n\t\t\t\tlabelStyle={{fontSize:'12px'}} \n\t\t\t\tfloatingLabelText=\"Select the planning units\" \n\t\t\t\tfloatingLabelFixed={true} \n\t\t\t\tstyle={{width:this.props.width, verticalAlign:'middle'}}>\n\t\t\t\t\t{this.props.items.map((item)=>{\n\t\t\t\t\treturn <MenuItem \n\t\t\t\t\tvalue={item.feature_class_name} \n\t\t\t\t\tprimaryText={item.alias} \n\t\t\t\t\tkey={item.feature_class_name}\n\t\t\t\t\tstyle={{fontSize:'12px'}}\n\t\t\t\t\tmenuItemStyle={{fontSize:'12px'}}\n\t\t\t\t\tlabelStyle={{fontSize:'12px'}} \n\t\t\t\t\t/>;\n\t\t\t\t\t})}\n\t\t\t\t</SelectField>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nexport default SelectFieldMapboxLayer;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport * as React from 'react';\nimport mapboxgl from 'mapbox-gl';\nimport SelectFieldMapboxLayer from './SelectFieldMapboxLayer';\n\nclass PlanningUnitsDialog extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = { planning_unit_grids_received: false };\n\t} \n\tcomponentDidMount() {\n\t\tlet map = new mapboxgl.Map({\n\t\t\tcontainer: this.mapContainer,\n\t\t\tstyle: 'mapbox://styles/blishten/cjg6jk8vg3tir2spd2eatu5fd', //north star + marine PAs in pacific\n\t\t\tcenter: [0, 0],\n\t\t\tzoom: 2\n\t\t});\n\t\tthis.setState({map: map});\n\t}\n\t\n\trender() {\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<div className={'newPUDialogPane'}>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<div ref={el => this.mapContainer = el} className=\"absolute top right left bottom\" style={{width:'352px',height:'300px', marginTop: '50px',marginLeft: '24px'}}/>\n\t\t\t\t\t\t<div style={{position: 'absolute', top:'380px', verticalAlign: 'middle'}}>\n\t\t\t\t\t\t\t<SelectFieldMapboxLayer \n\t\t\t\t\t\t\t\t{...this.props}\n\t\t\t\t\t\t\t\tmenuItemStyle={{fontSize:'12px'}}\n\t\t\t\t\t\t\t\tlabelStyle={{fontSize:'12px'}} \n\t\t\t\t\t\t\t\tselectedValue={this.props.pu} \n\t\t\t\t\t\t\t\tmap={this.state.map} \n\t\t\t\t\t\t\t\tmapboxUser={'blishten'} \n\t\t\t\t\t\t\t\titems={this.props.planning_unit_grids} \n\t\t\t\t\t\t\t\tchangeItem={this.props.changeItem} \n\t\t\t\t\t\t\t\tdisabled={!this.state.planning_unit_grids_received}\n\t\t\t\t\t\t\t\twidth={'352px'}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nexport default PlanningUnitsDialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from 'react';\nimport { List, ListItem} from 'material-ui/List';\nimport IconMenu from 'material-ui/IconMenu';\nimport MenuItem from 'material-ui/MenuItem';\nimport { grey400 } from 'material-ui/styles/colors';\nimport IconButton from 'material-ui/IconButton';\nimport MoreVertIcon from 'material-ui/svg-icons/navigation/more-vert';\nimport ToolbarButton from './ToolbarButton';\n\nclass SelectCostFeatures extends React.Component { \n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = { selectedFeature: undefined };\n\t}\n\tcomponentWillMount() {\n\t\tListItem.defaultProps.disableTouchRipple = true;\n\t\tListItem.defaultProps.disableFocusRipple = true;\n\t}\n\tchangeFeature(event, feature) {\n\t\tthis.setState({ selectedFeature: feature });\n\t} \n\tclickListItem(event) {\n\t}\n\trender() {\n\t\tconst iconButtonElement = (\n\t\t\t<IconButton\n\t\t\t\ttouch={true}\n\t\t\t\ttooltipPosition=\"bottom-left\"\n\t\t\t>\n\t\t\t<MoreVertIcon color={grey400} />\n\t\t\t</IconButton>\n\t\t);\n\n\t\tconst rightIconMenu = (\n\t\t\t<IconMenu iconButtonElement={iconButtonElement}>\n\t\t\t<MenuItem>Info</MenuItem>\n\t\t\t<MenuItem title=\"Not implemented\">View</MenuItem>\n\t\t\t<MenuItem title=\"Not implemented\">Prioritise</MenuItem>\n\t\t</IconMenu>\n\t\t);\n\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<div className={'newPUDialogPane'}>\n\t\t\t\t\t<div>Select the costs</div>\n\t\t\t\t\t<List>\n\t\t\t\t\t\t{this.props.selectedCosts.map((item)=>{\n\t\t\t\t\t\t\treturn <ListItem \n\t\t\t\t\t\t\t  disableFocusRipple={true}\n\t\t\t\t\t\t\t\tprimaryText={item.alias} \n\t\t\t\t\t\t\t\tsecondaryText={item.description} \n\t\t\t\t\t\t\t\tkey={item.id} \n\t\t\t\t\t\t\t\tvalue={item.alias}\n\t\t\t\t\t\t\t\trightIconButton={rightIconMenu}\n\t\t\t\t\t\t\t/>}\n\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t</List>\n\t\t\t\t\t<ToolbarButton \n\t\t\t\t\t\tlabel=\"Select\" \n\t\t\t\t\t\tonClick={this.props.openCostsDialog}/>\n\t\t\t\t</div>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nexport default SelectCostFeatures;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faPlusCircle } from '@fortawesome/free-solid-svg-icons';\nimport { faCircle } from '@fortawesome/free-regular-svg-icons';\nimport { faCheckCircle } from '@fortawesome/free-regular-svg-icons';\nimport { faTrashAlt } from '@fortawesome/free-regular-svg-icons';\n// import { faSync } from '@fortawesome/free-solid-svg-icons';\nimport Import from 'material-ui/svg-icons/action/get-app';\nimport ToolbarButton from './ToolbarButton';\nimport MarxanDialog from './MarxanDialog';\nimport MarxanTable from \"./MarxanTable\";\nimport Popover from 'material-ui/Popover';\nimport Menu from 'material-ui/Menu';\nimport MenuItem from 'material-ui/MenuItem';\n//import gbif_logo from './gbif.jpg';\n//import FontIcon from 'material-ui/FontIcon';\n// add this to the gbif item: leftIcon={<FontIcon className=\"gbifLogo\"/> \n\nclass FeaturesDialog extends React.Component {\n\n    constructor(props) {\n      super(props);\n      this.state = {\n        selectedFeature: undefined,\n        previousRow: undefined,\n        searchText: \"\",\n      };\n      //initialise the filteredRows variable\n      this.filteredRows = [];\n    }\n    _delete() {\n      this.props.deleteFeature(this.state.selectedFeature);\n      this.setState({ selectedFeature: undefined });\n    }\n    showNewFeaturePopover(event) {\n      this.setState({ newFeatureAnchor: event.currentTarget });\n      this.props.showNewFeaturePopover();\n    }\n    showImportFeaturePopover(event) {\n      this.setState({ importFeatureAnchor: event.currentTarget });\n      this.props.showImportFeaturePopover();\n    }\n    _openImportFeaturesDialog() {\n      //close the dialog\n      this.props.onCancel();\n      //show the new feature dialog\n      this.props.openImportFeaturesDialog(\"import\");\n    }\n    _openImportFromWebDialog(){\n      //close the dialog\n      this.props.onCancel();\n      //show the new feature dialog\n      this.props.openImportFromWebDialog();\n    }\n    _newByDigitising() {\n      //hide this dialog\n      this.onOk();\n      //show the drawing controls\n      this.props.initialiseDigitising();\n    }\n    openImportGBIFDialog() {\n      this.props.openImportGBIFDialog();\n      this.props.onCancel();\n    }\n    clickFeature(event, rowInfo) {\n      //if adding or removing features from a project\n      if (this.props.addingRemovingFeatures) {\n        //if the shift key is pressed then select/deselect the features in between\n        if (event.shiftKey) {\n          //get the selected feature ids\n          let selectedIds = this.getFeaturesBetweenRows(this.state.previousRow, rowInfo);\n          //update the selected ids\n          this.props.selectFeatures(selectedIds);\n        }\n        else { //single feature has been clicked\n          this.props.clickFeature(rowInfo.original, event.shiftKey, this.state.previousRow);\n        }\n        this.setState({ previousRow: rowInfo });\n      }\n      else {\n        this.setState({ selectedFeature: rowInfo.original });\n      }\n    }\n\n    //toggles the selection state of the features between the first and last indices and returns an array of the selected featureIds\n    toggleSelectionState(selectedIds, features, first, last){\n      //get the features between the first and last positions\n      let spannedFeatures = features.slice(first, last);\n      //iterate through them and toggle their selected state\n      spannedFeatures.forEach((feature) => {\n        if (selectedIds.includes(feature.id)) {\n          selectedIds.splice(selectedIds.indexOf(feature.id), 1);\n        }\n        else {\n          selectedIds.push(feature.id);\n        }\n      });\n      return selectedIds;\n    }\n    //gets the features ids between the two passed rows and toggles their selection state\n    getFeaturesBetweenRows(previousRow, thisRow) {\n      let selectedIds;\n      //get the index position of the previous row that was clicked\n      let idx1 = (previousRow.index < thisRow.index) ? previousRow.index + 1 : thisRow.index;\n      //get the index position of this row that was clicked\n      let idx2 = (previousRow.index < thisRow.index) ? thisRow.index + 1 : previousRow.index;\n      //toggle the selected features depending on if the current features are filtered\n      if (this.filteredRows.length<this.props.allFeatures.length){\n        selectedIds = this.toggleSelectionState(this.props.selectedFeatureIds, this.filteredRows, idx1, idx2);\n      }else{\n        selectedIds = this.toggleSelectionState(this.props.selectedFeatureIds, this.props.allFeatures, idx1, idx2);\n      }\n      return selectedIds;\n    }\n    //selects all feature depending on whether the data is filtered or not\n    selectAllFeatures(){\n      let selectedIds = [];\n      //if the table is filtered then select only the filtered rows\n      if (this.filteredRows.length<this.props.allFeatures.length){\n        this.filteredRows.forEach((feature) => {\n            selectedIds.push(feature.id);\n        });\n        this.props.selectFeatures(selectedIds);\n      }else{\n        //select all features\n        this.props.selectAllFeatures();\n      }\n    }\n    onOk(evt) {\n      if (this.props.addingRemovingFeatures) {\n        this.props.onOk();\n      }\n      else {\n        this.unselectFeature();\n      }\n    }\n    unselectFeature(evt) {\n      this.setState({\n        selectedFeature: undefined\n      });\n      this.props.onCancel();\n    }\n    sortDate(a, b, desc) {\n      return (new Date(a.slice(6, 8), a.slice(3, 5) - 1, a.slice(0, 2), a.slice(9, 11), a.slice(12, 14), a.slice(15, 17)) > new Date(b.slice(6, 8), b.slice(3, 5) - 1, b.slice(0, 2), b.slice(9, 11), b.slice(12, 14), b.slice(15, 17))) ? 1 : -1;\n    }\n    preview(feature_metadata) {\n      this.props.previewFeature(feature_metadata);\n    }\n    renderTitle(row) {\n      return <div style={{width: '100%',height: '100%',backgroundColor: '#dadada',borderRadius: '2px'}} title={row.original.description}>{row.original.description}</div>;\n    }\n    renderSource(row) {\n      return <div style={{width: '100%',height: '100%',backgroundColor: '#dadada',borderRadius: '2px'}} title={row.original.source}>{row.original.source}</div>;\n    }\n    renderDate(row) {\n      return <div style={{width: '100%',height: '100%',backgroundColor: '#dadada',borderRadius: '2px'}} title={row.original.creation_date}>{row.original.creation_date.substr(0,8)}</div>;\n    }\n    renderCreatedBy(row) {\n      return <div style={{width: '100%',height: '100%',backgroundColor: '#dadada',borderRadius: '2px'}} title={row.original.created_by}>{row.original.created_by}</div>;\n    }\n    renderPreview(row) {\n      return <div style={{width: '100%',height: '100%',backgroundColor: '#dadada',borderRadius: '2px'}} title='Click to preview'>..</div>;\n    }\n    searchTextChanged(value){\n      this.setState({searchText: value});\n    }\n    //called when the data in the marxantable is filtered\n    dataFiltered(filteredRows){\n      //set the local filteredRows variable which is used to get filtered features between clicked rows\n      this.filteredRows = filteredRows;\n    }\n    render() {\n        if (this.props.allFeatures) {\n          return (\n              <MarxanDialog {...this.props} autoDetectWindowHeight={ false } bodyStyle={ { padding: '0px 24px 0px 24px' } } title=\"Features\" onOk={ this.onOk.bind(this) } showCancelButton={this.props.addingRemovingFeatures} helpLink={(this.props.addingRemovingFeatures) ? \"user.html#adding-and-removing-features\" :\"user.html#the-features-window\"} showSearchBox={true} searchTextChanged={this.searchTextChanged.bind(this)}\n          children={ <React.Fragment key=\"k10\">\n                        <div id=\"projectsTable\">\n                          <MarxanTable \n                            data={this.props.allFeatures} \n                            searchColumns={['alias','description','source','created_by']}\n                            searchText={this.state.searchText}\n                            dataFiltered={this.dataFiltered.bind(this)}\n                            addingRemovingFeatures={this.props.addingRemovingFeatures}\n                            selectedFeatureIds={this.props.selectedFeatureIds}\n                            selectedFeature={this.state.selectedFeature}\n                            clickFeature={this.clickFeature.bind(this)}\n                            preview={this.preview.bind(this)}\n                            columns={[{Header: 'Name', accessor: 'alias', width: 193, headerStyle: {'textAlign': 'left'}},  \n                            {Header: 'Description', accessor: 'description', width: 246, headerStyle: {'textAlign': 'left'}, Cell: this.renderTitle.bind(this)},\n                            {Header: 'Source', accessor: 'source', width: 120, headerStyle: {'textAlign': 'left'}, Cell: this.renderSource.bind(this)}, \n                            {Header: 'Created', accessor: 'creation_date', width: 70, headerStyle: {'textAlign': 'left'}, Cell: this.renderDate.bind(this), sortMethod: this.sortDate.bind(this)},\n                            {Header: 'Created by', accessor: 'created_by', width: 70, headerStyle: {'textAlign': 'left'}, Cell: this.renderCreatedBy.bind(this)},\n                            {Header: '', width: 8, headerStyle: {'textAlign': 'center'}, Cell: this.renderPreview.bind(this)}]}\n                            getTrProps={(state, rowInfo, column) => {\n                              return {\n                                style: {background: ((state.addingRemovingFeatures && state.selectedFeatureIds.includes(rowInfo.original.id)) || (!state.addingRemovingFeatures && state.selectedFeature && state.selectedFeature.id === rowInfo.original.id)) ? \"aliceblue\" : \"\"},\n                                onClick: (e) => {\n                                  state.clickFeature(e, rowInfo);\n                                }\n                              };\n                            }}\n                            getTdProps={(state, rowInfo,column) => {\n                              return {\n                                onClick: (e) => {\n                                  if (column.Header === \"\") state.preview(rowInfo.original);\n                                }\n                              };\n                            }}\n                          />\n                       </div>\n                       <div id=\"projectsToolbar\">\n                         <div style={ { display: (this.props.metadata.OLDVERSION) ? \"block\" : \"none\" } } className={ 'tabTitle' }>This is an imported project. Only features from this project are shown.</div>\n                         <ToolbarButton show={ (this.props.userRole !== \"ReadOnly\") && (!this.props.metadata.OLDVERSION) && (!this.props.addingRemovingFeatures) } icon={ <FontAwesomeIcon icon={ faPlusCircle } /> } title=\"New feature\" disabled={ this.props.loading } onClick={ this.showNewFeaturePopover.bind(this) } label={ \"New\" }/>\n                         <Popover open={ this.props.newFeaturePopoverOpen} anchorEl={ this.state.newFeatureAnchor } anchorOrigin={ { horizontal: 'left', vertical: 'bottom' } } targetOrigin={ { horizontal: 'left', vertical: 'top' } } onRequestClose={ this.props.hideNewFeaturePopover }>\n                           <Menu desktop={ true }>\n                             <MenuItem primaryText=\"Draw on screen\" title=\"Create a new feature by digitising it on the screen\" onClick={ this._newByDigitising.bind(this) } />\n                           </Menu>\n                         </Popover>\n                         <ToolbarButton show={ (!this.props.metadata.OLDVERSION) && (!this.props.addingRemovingFeatures) && (this.props.userRole !== \"ReadOnly\") } icon={<Import style={{height:'20px',width:'20px'}}/>} title=\"Create new features from existing data\" disabled={ this.props.loading }  onClick={ this.showImportFeaturePopover.bind(this) } label={ \"Import\" }/>\n                         <Popover open={ this.props.importFeaturePopoverOpen } anchorEl={ this.state.importFeatureAnchor } anchorOrigin={ { horizontal: 'left', vertical: 'bottom' } } targetOrigin={ { horizontal: 'left', vertical: 'top' } } onRequestClose={ this.props.hideImportFeaturePopover }>\n                           <Menu desktop={ true }>\n                             <MenuItem primaryText=\"From a shapefile\" title=\"Import one or more features from a shapefile\" onClick={this._openImportFeaturesDialog.bind(this)} />\n                             <MenuItem primaryText=\"From the web\" title=\"Import one or more features from a web resource\" onClick={this._openImportFromWebDialog.bind(this)} />\n                             <MenuItem primaryText=\"From the Global Biodiversity Information Facility\" title=\"The worlds largest provider of species observations\" onClick={ this.openImportGBIFDialog.bind(this) } />\n                             <MenuItem primaryText=\"From the IUCN Red List of Threatened Species\" disabled={ true } />\n                           </Menu>\n                         </Popover>\n                         <ToolbarButton show={ (this.props.userRole === \"Admin\") && (!this.props.metadata.OLDVERSION) && (!this.props.addingRemovingFeatures) } icon={ <FontAwesomeIcon icon={ faTrashAlt } color='rgb(255, 64, 129)' /> } title=\"Delete feature\" disabled={ this.state.selectedFeature === undefined || this.props.loading  || (this.state.selectedFeature && this.state.selectedFeature.created_by === 'global admin')} onClick={ this._delete.bind(this) } label={ \"Delete\" }/>\n             \t\t\t\t\t\t\t{/*<ToolbarButton  \n            \t\t\t\t\t\t\t\tshow={(this.props.marxanServer&&this.props.marxanServer.system !== \"Windows\")&&(!this.props.addingRemovingFeatures)}\n            \t\t\t\t\t\t\t\ticon={<FontAwesomeIcon icon={faSync} color='rgb(51, 153, 51)'/>} \n            \t\t\t\t\t\t\t\ttitle=\"Refresh features\" \n            \t\t\t\t\t\t\t\tdisabled={this.props.loading}\n            \t\t\t\t\t\t\t\tlabel={\"Refresh\"}\n            \t\t\t\t\t\t\t\tonClick={ this.props.refreshFeatures }\n            \t\t\t\t\t\t\t/>*/}\n                         <ToolbarButton show={ this.props.addingRemovingFeatures } icon={ <FontAwesomeIcon icon={ faCircle } /> } title=\"Clear all features\" onClick={ this.props.clearAllFeatures } label={ \"Clear all\" } />\n                         <ToolbarButton show={ this.props.addingRemovingFeatures } icon={ <FontAwesomeIcon icon={ faCheckCircle } /> } title=\"Select all features\" onClick={ this.selectAllFeatures.bind(this) } label={ \"Select all\" } />\n                       </div>\n                     </React.Fragment> } />\n        );\n    } else {\n      return null;\n    }\n  }\n}\n\nexport default FeaturesDialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from 'react';\nimport Metadata from './Metadata';\nimport PlanningUnitsDialog from './PlanningUnitsDialog';\nimport SelectFeatures from './SelectFeatures';\nimport SelectCostFeatures from './SelectCostFeatures';\nimport MarxanDialog from './MarxanDialog';\nimport FeaturesDialog from './FeaturesDialog';\nimport ToolbarButton from './ToolbarButton';\n\nclass NewProjectDialog extends React.Component {\n\tconstructor(props) {\n\t\t\tsuper(props);\n\t\t\tthis.state = {\n\t\t\t\t\tsteps: ['Info', 'Planning units', 'Features'],\n\t\t\t\t\tloadingFeatures: false,\n\t\t\t\t\tfinished: false,\n\t\t\t\t\tstepIndex: 0,\n\t\t\t\t\tname: '',\n\t\t\t\t\tdescription: '',\n\t\t\t\t\tpu: '',\n\t\t\t\t\tfeaturesDialogOpen: false,\n\t\t\t\t\tallFeatures: [],\n\t\t\t\t\tselectedFeatureIds: []\n\t\t\t};\n\t}\n\tcomponentDidUpdate(prevProps, prevState) {\n\t\t\tif (prevProps.features !== this.props.features) { //this is probably an unreliable check but it seems to work!\n\t\t\t\t\tthis.setState({ allFeatures: JSON.parse(JSON.stringify(this.props.features)) }); //a copy of all the features\n\t\t\t}\n\t}\n\thandleNext = () => {\n\t\t\tconst { stepIndex } = this.state;\n\t\t\tthis.setState({\n\t\t\t\t\tstepIndex: stepIndex + 1\n\t\t\t});\n\t};\n\thandlePrev = () => {\n\t\t\tconst { stepIndex } = this.state;\n\t\t\tif (stepIndex > 0) {\n\t\t\t\t\tthis.setState({ stepIndex: stepIndex - 1 });\n\t\t\t}\n\t};\n\topenFeaturesDialog() {\n\t\t\tthis.setState({ featuresDialogOpen: true });\n\t}\n\tsetName(value) {\n\t\t\tthis.setState({ name: value });\n\t}\n\tsetDescription(value) {\n\t\t\tthis.setState({ description: value });\n\t}\n\tchangePU(value) {\n\t\t\tthis.setState({ pu: value });\n\t}\n\tonOk(evt) {\n\t\t\tthis.gotoStart();\n\t\t\tthis.props.onOk();\n\t}\n\tgotoStart() {\n\t\t\t//reset to the beginning\n\t\t\tthis.setState({ stepIndex: 0 });\n\t}\n\tcloseFeaturesDialog() {\n\t\t\tthis.setState({ featuresDialogOpen: false });\n\t}\n\t//updates the allFeatures to set the various properties based on which features have been selected in the FeaturesDialog\n\tupdateSelectedFeatures() {\n\t\t\tlet allFeatures = this.state.allFeatures;\n\t\t\tallFeatures.forEach((feature) => { \n\t\t\t\t\tif (this.state.selectedFeatureIds.includes(feature.id)) {\n\t\t\t\t\t\t\tObject.assign(feature, { selected: true });\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\t\tObject.assign(feature, { selected: false });\n\t\t\t\t\t}\n\t\t\t}, this);\n\t\t\t//update allFeatures to reflect those that are selected\n\t\t\tthis.setState({ allFeatures: allFeatures});\n\t\t\tthis.closeFeaturesDialog();\n\t}\n\n\tclickFeature(feature) {\n\t\t\tlet ids = this.state.selectedFeatureIds;\n\t\t\tif (ids.includes(feature.id)) {\n\t\t\t\t\t//remove the feature if it is already selected\n\t\t\t\t\tthis.removeFeature(feature);\n\t\t\t}\n\t\t\telse {\n\t\t\t\t\t//add the feautre to the selected feature array\n\t\t\t\t\tthis.addFeature(feature);\n\t\t\t}\n\t}\n\t//selects all the features\n\tselectAllFeatures() {\n\t\t\tlet ids = [];\n\t\t\tthis.state.allFeatures.forEach((feature) => {\n\t\t\t\t\tids.push(feature.id);\n\t\t\t});\n\t\t\tthis.selectFeatures(ids);\n\t}\n\n\t//clears all the Conservation features\n\tclearAllFeatures() {\n\t\t\tthis.setState({ selectedFeatureIds: [] });\n\t}\n\n\tselectFeatures(ids){\n\t\tthis.setState({ selectedFeatureIds: ids });\n\t}\n\n\t//removes a feature from the selectedFeatureIds array\n\tremoveFeature(feature) {\n\t\t\tlet ids = this.state.selectedFeatureIds;\n\t\t\t//remove the feature  - this requires a callback on setState otherwise the state is not updated before updateSelectedFeatures is called\n\t\t\tids = ids.filter(function(value, index, arr) { return value !== feature.id });\n\t\t\treturn new Promise(function(resolve, reject) {\n\t\t\t\t\tthis.setState({ selectedFeatureIds: ids }, function() {\n\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t});\n\t\t\t}.bind(this));\n\t}\n\n\t//adds a feature to the selectedFeatureIds array\n\taddFeature(feature) {\n\t\t\tlet ids = this.state.selectedFeatureIds;\n\t\t\t//add the feautre to the selected feature array\n\t\t\tids.push(feature.id);\n\t\t\tthis.setState({ selectedFeatureIds: ids });\n\t}\n\n\tcreateNewProject() {\n\t\t\tthis.props.createNewProject({ name: this.state.name, description: this.state.description, planning_grid_name: this.state.pu, features: this.state.allFeatures.filter((item) => { return item.selected }) });\n\t\t\tthis.onOk();\n\t}\n\n\trender() {\n\t\t\tconst { stepIndex } = this.state;\n\t\t\tconst contentStyle = { margin: '0 16px' };\n\t\t\tconst actions = [\n\t\t\t\t\t<div style={{width: '100%', maxWidth: '500px', margin: 'auto',textAlign:'center'}}>\n\t\t\t\t\t\t\t{/*dynamically create the stepper\n\t\t\t\t\t\t\t<Stepper activeStep={stepIndex}>\n\t\t\t\t\t\t\t\t\t{this.state.steps.map((item) => {return <Step key={item}><StepLabel>{item}</StepLabel></Step>})}\n\t\t\t\t\t\t\t</Stepper> */}\n\t\t\t\t\t\t\t<div style={contentStyle}>\n\t\t\t\t\t\t\t\t\t<div style={{marginTop: 12}}>\n\t\t\t\t\t\t\t\t\t\t\t<ToolbarButton \n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"Back\" \n\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={stepIndex === 0}  \n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={this.handlePrev} \n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t<ToolbarButton \n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={stepIndex === (this.state.steps.length-1) ? 'Finish' : 'Next'} \n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={stepIndex === (this.state.steps.length-1) ? this.createNewProject.bind(this) : this.handleNext} \n\t\t\t\t\t\t\t\t\t\t\t\t\tprimary={true} \n\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={(stepIndex===0 && (this.state.name==='' || this.state.description==='')) || \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t(stepIndex===1 && this.state.pu==='') || \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t(stepIndex===2 && this.state.selectedFeatureIds.length===0)\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t];\n\t\t\tlet c = <div key=\"k3\">\n\t\t\t\t\t\t\t\t\t{stepIndex === 0 ? <Metadata name={this.state.name} description={this.state.description} setName={this.setName.bind(this)} setDescription={this.setDescription.bind(this)}/> : null}\n\t\t\t\t\t\t\t\t\t{stepIndex === 1 ? <PlanningUnitsDialog \n\t\t\t\t\t\t\t\t\t\t{...this.props}\n\t\t\t\t\t\t\t\t\t\tgetPlanningUnitGrids={this.props.getPlanningUnitGrids} \n\t\t\t\t\t\t\t\t\t\tplanning_unit_grids={this.props.planning_unit_grids} \n\t\t\t\t\t\t\t\t\t\tchangeItem={this.changePU.bind(this)} pu={this.state.pu} \n\t\t\t\t\t\t\t\t\t\topenImportPlanningGridDialog={this.props.openImportPlanningGridDialog}/> : null}\n\t\t\t\t\t\t\t\t\t{stepIndex === 2 ? \n\t\t\t\t\t\t\t\t\t\t<div style={{height:'390px'}}>\n\t\t\t\t\t\t\t\t\t\t\t<div className={'tabTitle'}>Select the features</div>\n\t\t\t\t\t\t\t\t\t\t\t<SelectFeatures \n\t\t\t\t\t\t\t\t\t\t\t\tfeatures={this.state.allFeatures.filter((item)=>{return item.selected;})}\n\t\t\t\t\t\t\t\t\t\t\t\topenFeaturesDialog={this.openFeaturesDialog.bind(this)}  \n\t\t\t\t\t\t\t\t\t\t\t\tsimple={true}\n\t\t\t\t\t\t\t\t\t\t\t\tshowTargetButton={false}\n\t\t\t\t\t\t\t\t\t\t\t\tleftmargin={'0px'}\n\t\t\t\t\t\t\t\t\t\t\t\tmaxheight={'356px'}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t: null}\n\t\t\t\t\t\t\t\t\t{stepIndex === 3 ? <SelectCostFeatures\n\t\t\t\t\t\t\t\t\t\t\topenCostsDialog={this.props.openCostsDialog}\n\t\t\t\t\t\t\t\t\t\t\tselectedCosts={this.props.selectedCosts}\n\t\t\t\t\t\t\t\t\t/> : null}\n\t\t\t\t\t\t\t</div>;\n\t\t\treturn (\n\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t<MarxanDialog \n\t\t\t\t\t\t\t{...this.props} \n\t\t\t\t\t\t\ttitle={'New project'}\n\t\t\t\t\t\t\tcontentWidth={400}\n\t\t\t\t\t\t\tchildren={c} \n\t\t\t\t\t\t\tactions={actions} \n\t\t\t\t\t\t\tokLabel={\"Cancel\"}\n\t\t\t\t\t\t\tonOk={this.onOk.bind(this)}\n\t\t\t\t\t\t\tonCancel={this.onOk.bind(this)}\n\t\t\t\t\t\t\tonRequestClose={this.onOk.bind(this)} \n\t\t\t\t\t\t\thelpLink={\"user.html#creating-new-projects\"}\n\t\t\t\t\t/>\n\t\t\t\t\t\t<FeaturesDialog\n\t\t\t\t\t\t\topen={this.state.featuresDialogOpen}\n\t\t\t\t\t\t\tonOk={this.updateSelectedFeatures.bind(this)}\n\t\t\t\t\t\t\tonCancel={this.closeFeaturesDialog.bind(this)}\n\t\t\t\t\t\t\tloadingFeatures={this.state.loadingFeatures}\n\t\t\t\t\t\t\tallFeatures={this.state.allFeatures}\n\t\t\t\t\t\t\tselectAllFeatures={this.selectAllFeatures.bind(this)}\n\t\t\t\t\t\t\tclearAllFeatures={this.clearAllFeatures.bind(this)}\n\t\t\t\t\t\t\tselectFeatures={this.selectFeatures.bind(this)}\n\t\t\t\t\t\t\tclickFeature={this.clickFeature.bind(this)}\n\t\t\t\t\t\t\taddingRemovingFeatures={true}\n\t\t\t\t\t\t\tselectedFeatureIds={this.state.selectedFeatureIds}\n\t\t\t\t\t\t\tmetadata={{OLDVERSION:false}}\n\t\t\t\t\t\t\tuserRole={\"User\"}\n            \t\t\t\tpreviewFeature={this.props.previewFeature} \n\t\t\t\t\t\t/>\n\t\t\t\t\t</React.Fragment>\n\t\t\t);\n\t}\n}\n\nexport default NewProjectDialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport * as React from 'react';\nimport CONSTANTS from './constants';\nimport MarxanDialog from './MarxanDialog';\nimport ToolbarButton from './ToolbarButton';\nimport SelectField from \"material-ui/SelectField\";\nimport MenuItem from \"material-ui/MenuItem\";\nimport Checkbox from 'material-ui/Checkbox';\n\nclass NewProjectWizardDialog extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {domainEnabled: true, steps: ['Country', 'Planning units', 'Habitats','Species', 'Existing PAs'],  stepIndex: 0, stepComplete: false, iso3:'', country: '', domain:'', shape:'Hexagon', areakm2: 50, worldEcosystems:false, allSpecies:false, endemicSpecies:false, endangeredSpecies:false,includeExistingPAs:false, iucn_category:'None'};\n    }\n    //moves to the next step of the wizard\n\thandleNext = () => {\n\t\tthis.setState({stepIndex: this.state.stepIndex + 1});\n\t};\n    //moves to the previous step of the wizard\n\thandlePrev = () => {\n\t\tthis.setState({stepIndex: this.state.stepIndex - 1});\n\t};\n\t//function to return true if the inputs are complete\n\tgetComplete(){\n\t    let complete = false;\n\t    switch (this.state.stepIndex) {\n\t        case 0:\n                complete = (this.state.country !=='' && this.state.domain !=='');\t            \n\t            break;\n\t        case 1:\n                complete = (this.state.shape !=='' && this.state.areakm2 !==0);\t            \n\t            break;\n\t        default:\n\t            // code\n\t    }\n\t    this.setState({stepComplete: complete});\n\t}\n\tchangeCountry(evt, value) {\n\t\t//set the value of the domain to terrestrial only if the country has no marine area\n\t\tif (!this.props.countries[value].has_marine) {\n\t\t\tthis.changeDomain(null, 1);\n\t\t\tthis.setState({ domainEnabled: false });\n\t\t}\n\t\telse {\n\t\t\tthis.setState({ domainEnabled: true });\n\t\t}\n\t\tthis.setState({iso3: this.props.countries[value].iso3, country: this.props.countries[value].name_iso31}, () => this.getComplete());\n\t}\n\tchangeDomain(evt, value) {\n\t\tthis.setState({domain: CONSTANTS.DOMAINS[value]}, () => this.getComplete());\n\t}\n\tchangeShape(evt, value) {\n\t\tthis.setState({shape: CONSTANTS.SHAPES[value]}, () => this.getComplete());\n\t}\n\tchangeAreaKm2(evt, value) {\n\t\tthis.setState({areakm2: CONSTANTS.AREAKM2S[value]}, () => this.getComplete());\n\t}\n    toggleWorldEcosystems(evt, isInputChecked){\n        this.setState({worldEcosystems: isInputChecked});\n    }\n    toggleAllSpecies(evt, isInputChecked){\n        this.setState({allSpecies: isInputChecked});\n    }\n    toggleEndemicSpecies(evt, isInputChecked){\n        this.setState({endemicSpecies: isInputChecked});\n    }\n    toggleEndangeredSpecies(evt, isInputChecked){\n        this.setState({endangeredSpecies: isInputChecked});\n    }\n    toggleIncludeExistingPAs(evt, isInputChecked){\n        this.setState({includeExistingPAs: isInputChecked});\n    }\n    changeIucnCategory(evt, value){\n\t\tthis.setState({iucn_category: CONSTANTS.IUCN_CATEGORIES[value]});\n    }\n    //create a new national project\n\tcreateNewNationalProject(){\n\t    this.props.createNewNationalProject(this.state);\n\t}\n    render() {\n        let dropDownStyle = {width: \"240px\"};\n        const actions = [\n            <div style={{width: '100%', maxWidth: '500px', margin: 'auto',textAlign:'center'}}>\n\t\t\t\t<div style={{margin: '0 16px'}}>\n\t\t\t\t\t<div style={{marginTop: 12}}>\n\t\t\t\t\t\t<ToolbarButton label=\"Back\" disabled={this.state.stepIndex === 0}  onClick={this.handlePrev} />\n\t\t\t\t\t\t<ToolbarButton label={this.state.stepIndex === (this.state.steps.length-1) ? 'Finish' : 'Next'} onClick={this.state.stepIndex === (this.state.steps.length-1) ? this.createNewNationalProject.bind(this) : this.handleNext} primary={true} disabled={!this.state.stepComplete}/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n        ];\n        const children =    <div className={'newNationalProjectContent'}>\n                                {this.state.stepIndex === 0 ? \n                                <React.Fragment key={'_wiz01'}>\n                                    <div>Choose a country and domain</div>\n        \t\t\t\t\t\t\t<SelectField menuItemStyle={{ fontSize: \"12px\" }} labelStyle={{ fontSize: \"12px\" }} onChange={this.changeCountry.bind(this)} value={this.state.iso3} floatingLabelText=\"Country\" floatingLabelFixed={true}>\n        \t\t\t\t\t\t\t\t{this.props.countries.map(item => {\n        \t\t\t\t\t\t\t\t\treturn (\n        \t\t\t\t\t\t\t\t\t\t<MenuItem style={{ fontSize: \"12px\" }} value={item.iso3} primaryText={item.name_iso31} key={item.iso3} />\n        \t\t\t\t\t\t\t\t\t);\n        \t\t\t\t\t\t\t\t})}\n        \t\t\t\t\t\t\t</SelectField> \n        \t\t\t\t\t\t\t<br/>\n        \t\t\t\t\t\t\t<SelectField menuItemStyle={{ fontSize: \"12px\" }} labelStyle={{ fontSize: \"12px\" }} onChange={this.changeDomain.bind(this)} value={this.state.domain} style={dropDownStyle} floatingLabelText=\"Domain\" floatingLabelFixed={true} disabled={!this.state.domainEnabled}>\n        \t\t\t\t\t\t\t\t{CONSTANTS.DOMAINS.map(item => {\n        \t\t\t\t\t\t\t\t\treturn (\n        \t\t\t\t\t\t\t\t\t\t<MenuItem style={{ fontSize: \"12px\" }} value={item} primaryText={item} key={item} />\n        \t\t\t\t\t\t\t\t\t);\n        \t\t\t\t\t\t\t\t})}\n        \t\t\t\t\t\t\t</SelectField>\n                                </React.Fragment>\n                                : null}\n                                {this.state.stepIndex === 1 ? \n                                <React.Fragment key={'_wiz02'}>\n                                    <div>Choose the shape and size of the planning units</div>\n        \t\t\t\t\t\t\t<SelectField menuItemStyle={{ fontSize: \"12px\" }} labelStyle={{ fontSize: \"12px\" }} onChange={this.changeShape.bind(this)} value={this.state.shape} style={dropDownStyle} floatingLabelText=\"Planning unit shape\" floatingLabelFixed={true}>\n        \t\t\t\t\t\t\t\t{CONSTANTS.SHAPES.map(item => {\n        \t\t\t\t\t\t\t\t\treturn (\n        \t\t\t\t\t\t\t\t\t\t<MenuItem style={{ fontSize: \"12px\" }} value={item} primaryText={item} key={item} />\n        \t\t\t\t\t\t\t\t\t);\n        \t\t\t\t\t\t\t\t})}\n        \t\t\t\t\t\t\t</SelectField>\n        \t\t\t\t\t\t\t<br/>\n        \t\t\t\t\t\t\t<SelectField menuItemStyle={{ fontSize: \"12px\" }} labelStyle={{ fontSize: \"12px\" }} onChange={this.changeAreaKm2.bind(this)} value={this.state.areakm2} style={dropDownStyle} floatingLabelText=\"Area of each planning unit\" floatingLabelFixed={true}>\n        \t\t\t\t\t\t\t\t{CONSTANTS.AREAKM2S.map(item => {\n        \t\t\t\t\t\t\t\t\treturn (\n        \t\t\t\t\t\t\t\t\t\t<MenuItem style={{ fontSize: \"12px\" }} value={item} primaryText={item + \" Km2\"} key={item} />\n        \t\t\t\t\t\t\t\t\t);\n        \t\t\t\t\t\t\t\t})}\n        \t\t\t\t\t\t\t</SelectField>\n                                </React.Fragment>\n                                : null}\n                                {this.state.stepIndex === 2 ? \n                                <React.Fragment key={'_wiz03'}>\n                                    <div>What habitats do you want to include in your project?</div>\n                                    <div className={'habitatsList'}>\n                                        <Checkbox label=\"World Ecosystems\" style={{fontSize:'12px'}} onCheck={this.toggleWorldEcosystems.bind(this)} />\n                                    </div>\n                                </React.Fragment>\n                                : null}\n                                {this.state.stepIndex === 3 ? \n                                <React.Fragment key={'_wiz04'}>\n                                    <div>What species do you want to include in your project?</div>\n                                    <div className={'speciesList'}>\n                                        <Checkbox label={\"All species that occur in \" + this.state.country} style={{fontSize:'12px'}} onCheck={this.toggleAllSpecies.bind(this)} />\n                                        <Checkbox label={\"All species that are endemic to \" + this.state.country} style={{fontSize:'12px'}} onCheck={this.toggleEndemicSpecies.bind(this)} />\n                                        <Checkbox label={\"All endangered species that occur in \" + this.state.country} style={{fontSize:'12px'}} onCheck={this.toggleEndangeredSpecies.bind(this)} />\n                                    </div>\n                                </React.Fragment>\n                                : null}\n                                {this.state.stepIndex === 4 ? \n                                <React.Fragment key={'_wiz05'}>\n                                    <div>Do you want to include existing protected areas?</div>\n                                    <div className={'speciesList'}>\n                                        <Checkbox label={\"Include existing protected areas\"} style={{fontSize:'12px'}} onCheck={this.toggleIncludeExistingPAs.bind(this)} />\n            \t\t\t\t\t\t\t<SelectField menuItemStyle={{ fontSize: \"12px\" }} labelStyle={{ fontSize: \"12px\" }} onChange={this.changeIucnCategory.bind(this)} value={this.state.iucn_category} style={dropDownStyle} floatingLabelText=\"IUCN Category\" floatingLabelFixed={true} disabled={!this.state.includeExistingPAs}>\n            \t\t\t\t\t\t\t\t{CONSTANTS.IUCN_CATEGORIES.map((item)=> {\n    \t\t\t\t\t\t\t\t\t\t\treturn  <MenuItem value={item} key={item} primaryText={item} style={{fontSize:'12px'}} />; \n    \t\t\t\t\t\t\t\t\t\t})}\n            \t\t\t\t\t\t\t</SelectField>\n            \t\t\t\t\t\t</div>\n                                </React.Fragment>\n                                : null}\n                            </div>;\n        return (\n            <MarxanDialog \n            \t{...this.props} \n\t\t\t\ttitle={'New national project'}\n\t\t\t\tcontentWidth={600}\n\t\t\t\tshowCancelButton={true}\n\t\t\t\tonCancel={this.props.closeNewProjectWizardDialog}\n\t\t\t\tonRequestClose={this.props.closeNewProjectWizardDialog} \n\t\t\t\thelpLink={\"user.html#creating-new-projects\"}\n\t\t\t\tactions={actions}\n\t\t\t\tchildren={children}\n\t\t\t/>\n        );\n    }\n}\n\nexport default NewProjectWizardDialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from 'react';\nimport MarxanDialog from './MarxanDialog';\nimport ReactTable from \"react-table\";\n\nclass ProjectsListDialog extends React.Component { \n\t\trenderName(row){\n\t\t\treturn <div style={{width: '100%',height: '100%',backgroundColor: '#dadada',borderRadius: '2px'}} title={row.original.name}>{row.original.name}</div>;        \n\t\t}\n\t\trender() {\n\t\t\t\tlet tableColumns = [];\n\t\t\t\tif (['Admin'].includes(this.props.userRole)) {\n\t\t\t\t\ttableColumns = [{ Header: 'User', accessor: 'user', width: 90, headerStyle: { 'textAlign': 'left' } }, { Header: 'Name', accessor: 'name', width: 200, headerStyle: { 'textAlign': 'left' }, Cell: this.renderName.bind(this) }];\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\ttableColumns = [{ Header: 'Name', accessor: 'name', width: 200, headerStyle: { 'textAlign': 'left' }, Cell: this.renderName.bind(this) }];\n\t\t\t\t}\n\t\t\t\tif (this.props.projects) {\n\t\t\t\t\treturn (\n\t\t\t\t\t<MarxanDialog \n\t\t\t\t\t{...this.props} \n\t\t\t\t\t// titleBarIcon={faBookOpen}\n\t\t\t\t\tshowCancelButton={false}\n\t\t\t\t\tautoDetectWindowHeight={false}\n\t\t\t\t\tbodyStyle={{ padding:'0px 24px 0px 24px'}}\n\t\t\t\t\ttitle= {this.props.title} \n\t\t\t\t\tcontentWidth={500}\n\t\t\t\t\thelpLink={\"user.html#projects-list\"}\n\t\t\t\t\tchildren={\n\t\t\t\t\t\t<React.Fragment key=\"k24\">\n\t\t\t\t\t\t\t<div style={{marginBottom:'5px'}}>{this.props.heading}</div>\n\t\t\t\t\t\t\t\t<div id=\"failedProjectsTable\">\n\t\t\t\t\t\t\t\t\t<ReactTable \n\t\t\t\t\t\t\t\t\t  pageSize={ this.props.projects.length }\n\t\t\t\t\t\t\t\t\t\tclassName={'projectsReactTable'}\n\t\t\t\t\t\t\t\t\t\tshowPagination={false} \n\t\t\t\t\t\t\t\t\t\tminRows={0}\n\t\t\t\t\t\t\t\t\t\tnoDataText=''\n\t\t\t\t\t\t\t\t\t\tdata={this.props.projects}\n\t\t\t\t\t\t\t\t\t\tthisRef={this} \n\t\t\t\t\t\t\t\t\t\tcolumns={tableColumns}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t  </div>\n\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t} \n\t\t\t\t/>\n\t\t\t);\n\t\t}else{\n\t\t\treturn null;\n\t\t}\n\t}\n}\n\nexport default ProjectsListDialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport * as React from 'react';\nimport mapboxgl from 'mapbox-gl';\nimport {zoomToBounds } from './Helpers.js';\n//TODO: Combine this with MapContainer.js as they do similar things\nclass MapContainer2 extends React.Component {\n\tcomponentDidMount() {\n\t\tthis.map = new mapboxgl.Map({\n\t\t\tcontainer: this.mapContainer,\n\t\t\tstyle: 'mapbox://styles/blishten/cjg6jk8vg3tir2spd2eatu5fd', //north star + marine PAs in pacific\n\t\t\tcenter: [0, 0],\n\t\t\tzoom: 2,\n            attributionControl: false,\n\t\t});\n        this.map.on(\"load\", (evt) => {\n            let color = (this.props.color) ? this.props.color : \"rgba(255, 0, 0, 0.4)\";\n            let outlineColor = (this.props.outlineColor) ? this.props.outlineColor : \"rgba(255, 0, 0, 0.5)\";\n            evt.target.addLayer({\n                'id': 'planning_grid',\n                'type': \"fill\",\n                'source': {\n                    'type': \"vector\",\n                    'url': \"mapbox://\" + this.props.planning_grid_metadata.tilesetid\n                },\n                'source-layer': this.props.planning_grid_metadata.feature_class_name,\n                'paint': {\n                    'fill-color': color, \n                    'fill-opacity': 0.9,\n                    'fill-outline-color': outlineColor\n                }\n            });\n        });\n        this.props.getTilesetMetadata(this.props.planning_grid_metadata.tilesetid).then((tileset)=>{\n            if (tileset.bounds != null) zoomToBounds(this.map, tileset.bounds);\n        }).catch((error) => {\n            this.props.setSnackBar(error);\n        });\n\t}\n\t\n    componentWillUnmount() {\n        //remove the map and free all resources\n        if (this.map) this.map.remove();\n    }\n    \n\trender() {\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<div className={'floatLeft mapContainer2'}>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<div ref={el => this.mapContainer = el} className=\"absolute top right left bottom\" style={{width:'352px',height:'300px', marginTop: '50px',marginLeft: '24px'}}/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nexport default MapContainer2;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from 'react';\nimport MarxanDialog from './MarxanDialog';\nimport MapContainer2 from './MapContainer2';\nimport FontAwesome from 'react-fontawesome';\n\nclass PlanningGridDialog extends React.Component { \n\tconstructor (props){\n\t\tsuper(props);\n\t\tthis.state = {expanded: false};\n\t}\n\texpand(){\n\t\tthis.setState({expanded: !this.state.expanded});\n\t}\n\tgetProjectList(){\n\t\tthis.props.getProjectList(this.props.planning_grid_metadata, \"planning_grid\");\n\t}\n\trender() {\n\t\tlet areaTD = (this.props.planning_grid_metadata._area) ? <td className='metadataItemValue'>{this.props.planning_grid_metadata._area}Km<span className='superscript'>2</span></td> : <td/>;\n\t\t// let country_idTD = (this.props.planning_grid_metadata.country_id) ? <td className='metadataItemValue'>{this.props.planning_grid_metadata.country_id}</td> : <td/>;\n\t\treturn (\n\t\t\t<MarxanDialog\n\t\t\t\t{...this.props}\n\t\t\t\tonRequestClose={this.props.onCancel}\n\t\t\t\tshowCancelButton={false}\n\t\t\t\ttitle={this.props.planning_grid_metadata.alias}\n\t\t\t\thelpLink={\"user.html#the-planning-grid-details-window\"}\n\t\t\t\tcontentWidth={768}\n\t\t\t\tchildren={\n\t\t\t\t\t<React.Fragment key=\"k27\">\n\t\t\t\t\t\t<MapContainer2\n\t\t\t\t\t\t\tplanning_grid_metadata={this.props.planning_grid_metadata}\n\t\t\t\t\t\t\tgetTilesetMetadata={this.props.getTilesetMetadata}\n\t\t\t\t\t\t\tsetSnackBar={this.props.setSnackBar}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div className=\"metadataPanel\">\n\t\t\t\t\t\t\t<table>\n\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td colSpan='2' className='metadataItemTitle'>Description:</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td colSpan='2' className='metadataItemValue2'>{this.props.planning_grid_metadata.description}</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td className='metadataItemTitle'>Country:</td>\n\t\t\t\t\t\t\t\t\t\t<td className='metadataItemValue'>{this.props.planning_grid_metadata.country}</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td className='metadataItemTitle'>Domain:</td>\n\t\t\t\t\t\t\t\t\t\t<td className='metadataItemValue'>{this.props.planning_grid_metadata.domain}</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td className='metadataItemTitle'>Area:</td>\n\t\t\t\t\t\t\t\t\t\t{areaTD}\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td className='metadataItemTitle'>Unit count:</td>\n\t\t\t\t\t\t\t\t\t\t<td className='metadataItemValue'>{this.props.planning_grid_metadata.planning_unit_count}</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td className='metadataItemTitle'>Created:</td>\n\t\t\t\t\t\t\t\t\t\t<td className='metadataItemValue'>{this.props.planning_grid_metadata.creation_date}</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td className='metadataItemTitle'>Created by:</td>\n\t\t\t\t\t\t\t\t\t\t<td className='metadataItemValue'>{this.props.planning_grid_metadata.created_by}</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td className='metadataItemTitle'>Source:</td>\n\t\t\t\t\t\t\t\t\t\t<td className='metadataItemValue'>{this.props.planning_grid_metadata.source}</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr style={{display:(this.state.expanded) ? 'table-row' : 'none'}}>\n\t\t\t\t\t\t\t\t\t\t<td className='metadataItemTitle'>aoi_id:</td>\n\t\t\t\t\t\t\t\t\t\t<td className='metadataItemValue'>{this.props.planning_grid_metadata.aoi_id}</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t{/*<tr style={{display:(this.state.expanded) ? 'table-row' : 'none'}}>\n\t\t\t\t\t\t\t\t\t\t<td className='metadataItemTitle'>country_id:</td>\n\t\t\t\t\t\t\t\t\t\t{country_idTD}\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr style={{display:(this.state.expanded) ? 'table-row' : 'none'}}>\n\t\t\t\t\t\t\t\t\t\t<td className='metadataItemTitle'>guid:</td>\n\t\t\t\t\t\t\t\t\t\t<td className='metadataItemValue'>{this.props.planning_grid_metadata.feature_class_name}</td>\n\t\t\t\t\t\t\t\t\t</tr>*/}\n\t\t\t\t\t\t\t\t\t<tr style={{display:(this.state.expanded) ? 'table-row' : 'none'}}>\n\t\t\t\t\t\t\t\t\t\t<td className='metadataItemTitle'>tilesetid:</td>\n\t\t\t\t\t\t\t\t\t\t<td className='metadataItemValue'>{this.props.planning_grid_metadata.tilesetid}</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr style={{display:(this.state.expanded) ? 'table-row' : 'none'}}>\n\t\t\t\t\t\t\t\t\t\t<td className='metadataItemTitle'>Projects:</td>\n\t\t\t\t\t\t\t\t\t\t<td className='metadataItemValue'><FontAwesome name='external-link-alt' onClick={this.getProjectList.bind(this)} title='View a list of projects that this planning grid is used in' style={{'cursor':'pointer', 'paddingTop':'6px'}}/></td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t\t<div onClick={this.expand.bind(this)} title={(this.state.expanded) ? \"Show less details\" : \"Show more details\"} className={'textHyperlink'}>{(this.state.expanded) ? 'less' : 'more..'}</div>\n\t\t\t\t\t\t\t<div>You may need to zoom in to see the planning grid units</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</React.Fragment>\n\t\t\t\t}\n\t\t\t/>\n\t\t); //return\n\t}\n}\n\nexport default PlanningGridDialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n// import { faBookOpen } from '@fortawesome/free-solid-svg-icons';\nimport { faPlusCircle } from '@fortawesome/free-solid-svg-icons';\nimport { faTrashAlt } from '@fortawesome/free-regular-svg-icons';\n// import { faSync } from '@fortawesome/free-solid-svg-icons';\nimport Import from 'material-ui/svg-icons/action/get-app';\nimport Export from 'material-ui/svg-icons/editor/publish';\nimport ToolbarButton from './ToolbarButton';\nimport MarxanDialog from './MarxanDialog';\nimport MarxanTable from \"./MarxanTable\";\n\nclass PlanningGridsDialog extends React.Component { \n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {searchText: \"\", selectedPlanningGrid: undefined};\n\t}\n\t_delete() {\n\t\tthis.props.deletePlanningGrid(this.state.selectedPlanningGrid.feature_class_name);\n\t\tthis.setState({ selectedPlanningGrid: false });\n\t}\n\t_new() {\n\t\tthis.props.openNewPlanningGridDialog();\n\t\tthis.closeDialog();\n\t}\n\topenImportDialog() {\n\t\tthis.props.openImportPlanningGridDialog();\n\t\tthis.closeDialog();\n\t}\n\texportPlanningGrid(){\n\t\tthis.props.exportPlanningGrid(this.state.selectedPlanningGrid.feature_class_name).then(url=>{\n\t\t\twindow.location = url;\n\t\t});\n\t\tthis.closeDialog();\n\t}\n\tchangePlanningGrid(event, planningGrid) {\n\t\tthis.setState({ selectedPlanningGrid: planningGrid });\n\t}\n\tcloseDialog() {\n\t\tthis.setState({ selectedPlanningGrid: undefined });\n\t\tthis.props.onOk(); \n\t}\n\tpreview(planning_grid_metadata){\n\t\tthis.props.previewPlanningGrid(planning_grid_metadata);\n\t}\n    sortDate(a, b, desc) {\n      return (new Date(a.slice(6, 8), a.slice(3, 5) - 1, a.slice(0, 2), a.slice(9, 11), a.slice(12, 14), a.slice(15, 17)) > new Date(b.slice(6, 8), b.slice(3, 5) - 1, b.slice(0, 2), b.slice(9, 11), b.slice(12, 14), b.slice(15, 17))) ? 1 : -1;\n    }\n\trenderName(row){\n\t\treturn <div style={{width: '100%',height: '100%',backgroundColor: '#dadada',borderRadius: '2px'}} title={row.original.alias + \" (\" + row.original.feature_class_name + \")\"}>{row.original.alias}</div>;        \n\t}\n\trenderTitle(row){\n\t\treturn <div style={{width: '100%',height: '100%',backgroundColor: '#dadada',borderRadius: '2px'}} title={row.original.description}>{row.original.description}</div>;        \n\t}\n    renderDate(row) {\n      return <div style={{width: '100%',height: '100%',backgroundColor: '#dadada',borderRadius: '2px'}} title={row.original.creation_date}>{row.original.creation_date.substr(0,8)}</div>;\n    }\n    renderCreatedBy(row) {\n      return <div style={{width: '100%',height: '100%',backgroundColor: '#dadada',borderRadius: '2px'}} title={row.original.created_by}>{row.original.created_by}</div>;\n    }\n\trenderCountry(row){\n\t\treturn <div style={{width: '100%',height: '100%',backgroundColor: '#dadada',borderRadius: '2px'}} title={row.original.country}>{row.original.country}</div>;        \n\t}\n\trenderArea(row){\n\t\treturn <div style={{width: '100%',height: '100%',backgroundColor: '#dadada',borderRadius: '2px'}}>{(isNaN(row.original._area)) ? '' : row.original._area}</div>;        \n\t}\n\trenderPreview(row){\n\t\treturn <div style={{width: '100%',height: '100%',backgroundColor: '#dadada',borderRadius: '2px'}} title='Click to preview'>..</div>;        \n\t}\n    searchTextChanged(value){\n      this.setState({searchText: value});\n    }\n\trender() {\n\t\tlet tableColumns = [];\n\t\ttableColumns = [\n\t\t\t{ Header: 'Name', accessor: 'alias', width: 290, headerStyle: { 'textAlign': 'left' }, Cell: this.renderName.bind(this) }, \n\t\t\t{ Header: 'Description', accessor: 'description', width: 269, headerStyle: { 'textAlign': 'left' }, Cell: this.renderTitle.bind(this) }, \n\t\t\t// { Header: 'Country', accessor: 'country', width: 70, headerStyle: { 'textAlign': 'left' }, Cell: this.renderCountry.bind(this)}, \n\t\t\t// { Header: 'Domain', accessor: 'domain', width: 70, headerStyle: { 'textAlign': 'left' }}, \n\t\t\t// { Header: 'Area (Km2)', accessor: '_area', width: 73, headerStyle: { 'textAlign': 'left' }, Cell: this.renderArea.bind(this) },\n            { Header: 'Created', accessor: 'creation_date', width: 70, headerStyle: {'textAlign': 'left'}, Cell: this.renderDate.bind(this), sortMethod: this.sortDate.bind(this)},\n            { Header: 'Created by', accessor: 'created_by', width: 70, headerStyle: {'textAlign': 'left'}, Cell: this.renderCreatedBy.bind(this)},\n\t\t\t{ Header: '', width: 8, headerStyle: { 'textAlign': 'center' }, Cell: this.renderPreview.bind(this) }\n\t\t];\n\t\treturn (\n\t\t\t<MarxanDialog \n\t\t\t\t{...this.props} \n\t\t\t\t// titleBarIcon={faBookOpen}\n\t\t\t\tonOk={this.closeDialog.bind(this)}\n\t\t\t\tshowCancelButton={false}\n\t\t\t\thelpLink={\"user.html#the-planning-grids-window\"}\n\t\t\t\tautoDetectWindowHeight={false}\n\t\t\t\tbodyStyle={{ padding:'0px 24px 0px 24px'}}\n\t\t\t\ttitle=\"Planning grids\"  \n\t\t\t\tshowSearchBox={true} \n\t\t\t\tsearchTextChanged={this.searchTextChanged.bind(this)}\n\t\t\t\tchildren={\n\t\t\t\t\t<React.Fragment key=\"k2\">\n\t\t\t\t\t\t\t<div id=\"projectsTable\">\n\t\t\t\t\t\t\t\t<MarxanTable \n\t\t\t\t\t\t\t\t\tdata={this.props.planningGrids}\n\t\t\t\t\t\t\t\t\tcolumns={tableColumns}\n\t\t                            searchColumns={['country','domain','alias','description','created_by']}\n\t\t                            searchText={this.state.searchText}\n\t\t                            selectedPlanningGrid={this.state.selectedPlanningGrid}\n\t\t                            changePlanningGrid={this.changePlanningGrid.bind(this)}\n\t\t\t\t\t\t\t\t\tgetTrProps={(state, rowInfo) => {\n\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t\t\t\t\t\tbackground: (rowInfo.original.alias === (state.selectedPlanningGrid && state.selectedPlanningGrid.alias)) ? \"aliceblue\" : \"\"\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\tonClick: (e) => {\n\t\t\t\t\t\t\t\t\t\t\t\tstate.changePlanningGrid(e, rowInfo.original);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tgetTdProps={(state, rowInfo,column) => {\n\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\tonClick: (e) => {\n\t\t\t\t\t\t\t\t\t\t\t\tif (column.Header === \"\") this.preview(rowInfo.original);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div id=\"projectsToolbar\" style={{display: (this.props.userRole === \"ReadOnly\") ? 'none' : 'block'}}>\n\t\t\t\t\t\t\t<ToolbarButton \n\t\t\t\t\t\t\t\tshow={!this.props.unauthorisedMethods.includes(\"createPlanningUnitGrid\")} \n\t\t\t\t\t\t\t\ticon={<FontAwesomeIcon icon={faPlusCircle} />} \n\t\t\t\t\t\t\t\ttitle=\"New planning grid\"\n\t\t\t\t\t\t\t\tonClick={this._new.bind(this)} \n\t\t\t\t\t\t\t\tlabel={\"New\"}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<ToolbarButton \n\t\t\t\t\t\t\t\tshow={!this.props.unauthorisedMethods.includes(\"importPlanningUnitGrid\")}\n\t\t\t\t\t\t\t\ticon={<Import style={{height:'20px',width:'20px'}}/>} \n\t\t\t\t\t\t\t\ttitle=\"Import an existing planning grid from the local machine\"\n\t\t\t\t\t\t\t\tonClick={this.openImportDialog.bind(this)} \n\t\t\t\t\t\t\t\tlabel={\"Import\"}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<ToolbarButton \n\t\t\t\t\t\t\t\tshow={!this.props.unauthorisedMethods.includes(\"exportPlanningUnitGrid\")}\n\t\t\t\t\t\t\t\ticon={<Export style={{height:'20px',width:'20px'}}/>} \n\t\t\t\t\t\t\t\ttitle=\"Export planning grid\" \n\t\t\t\t\t\t\t\tonClick={this.exportPlanningGrid.bind(this)} \n\t\t\t\t\t\t\t\tdisabled={!this.state.selectedPlanningGrid || this.props.loading}\n\t\t\t\t\t\t\t\tlabel={\"Export\"}\n\t\t\t\t\t\t\t/> \n\t\t\t\t\t\t\t<ToolbarButton  \n\t\t\t\t\t\t\t\tshow={!this.props.unauthorisedMethods.includes(\"deletePlanningUnitGrid\")}\n\t\t\t\t\t\t\t\ticon={<FontAwesomeIcon icon={faTrashAlt}  color='rgb(255, 64, 129)'/>} \n\t\t\t\t\t\t\t\ttitle=\"Delete planning grid\" \n\t\t\t\t\t\t\t\tdisabled={!this.state.selectedPlanningGrid || this.props.loading || (this.state.selectedPlanningGrid && this.state.selectedPlanningGrid.created_by === 'global admin')}\n\t\t\t\t\t\t\t\tonClick={this._delete.bind(this)} \n\t\t\t\t\t\t\t\tlabel={\"Delete\"}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{/*<ToolbarButton  \n\t\t\t\t\t\t\t\tshow={(this.props.marxanServer.system !== \"Windows\")}\n\t\t\t\t\t\t\t\ticon={<FontAwesomeIcon icon={faSync} color='rgb(51, 153, 51)'/>} \n\t\t\t\t\t\t\t\ttitle=\"Refresh planning grids\" \n\t\t\t\t\t\t\t\tdisabled={this.props.loading}\n\t\t\t\t\t\t\t\tonClick={this.props.getPlanningUnitGrids} \n\t\t\t\t\t\t\t\tlabel={\"Refresh\"}\n\t\t\t\t\t\t\t/>*/}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</React.Fragment>\n\t\t\t\t} \n\t\t\t/>\n\t\t); //return\n\t}\n}\n\nexport default PlanningGridsDialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport * as React from \"react\";\nimport CONSTANTS from './constants';\nimport MarxanDialog from \"./MarxanDialog\";\nimport SelectField from \"material-ui/SelectField\";\nimport MenuItem from \"material-ui/MenuItem\";\n// import ToolbarButton from \"./ToolbarButton\";\n// import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n// import { faArrowAltCircleUp } from '@fortawesome/free-regular-svg-icons';\n\nclass NewPlanningGridDialog extends React.Component {\n\t\tconstructor(props) {\n\t\t\tsuper(props);\n\t\t\tthis.state = { iso3: '', domain: '', shape: '', areakm2: undefined, domainEnabled: true };\n\t\t}\n\t\tchangeIso3(evt, value) {\n\t\t\tlet iso3 = this.props.countries[value].iso3;\n\t\t\tif (['FJI', 'KIR', 'NZL', 'RUS', 'TUV', 'USA', 'WLF'].includes(iso3)) { //no support currently for countries that span the meridian\n\t\t\t\t// this.setState({iso3: undefined});\n\t\t\t\t// this.props.setSnackBar(\"Countries that span the meridian are currently not supported. See <a href='\" + CONSTANTS.ERRORS_PAGE + \"#planning-grids-cannot-be-created-for-countries-that-span-the-meridian' target='blank'>here</a>\");\n\t\t\t\tthis.setState({ iso3: this.props.countries[value].iso3 });\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.setState({ iso3: this.props.countries[value].iso3 });\n\t\t\t}\n\t\t\t//set the value of the domain to terrestrial only if the country has no marine area\n\t\t\tif (!this.props.countries[value].has_marine) {\n\t\t\t\tthis.changeDomain(null, 1);\n\t\t\t\tthis.setState({ domainEnabled: false });\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.setState({ domainEnabled: true });\n\t\t\t}\n\t\t}\n\t\tchangeDomain(evt, value) {\n\t\t\tthis.setState({ domain: CONSTANTS.DOMAINS[value] });\n\t\t}\n\t\tchangeShape(evt, value) {\n\t\t\tthis.setState({ shape: CONSTANTS.SHAPES[value] });\n\t\t}\n\t\tchangeAreaKm2(evt, value) {\n\t\t\tthis.setState({ areakm2: CONSTANTS.AREAKM2S[value] });\n\t\t}\n\t\tonOk() {\n\t\t\t//create the new planning grid\n\t\t\tthis.props.createNewPlanningUnitGrid(this.state.iso3, this.state.domain, this.state.areakm2, this.state.shape).then(function(response) {\n\t\t\t\t//close the dialog\n\t\t\t\tthis.props.onCancel();\n\t\t\t}.bind(this));\n\t\t}\n\t\trender() {\n\t\t\t\tlet dropDownStyle = { width: \"240px\" };\n\t\t\t\treturn (\n\t\t\t\t\t\t<MarxanDialog\n\t\t\t\t{...this.props}\n\t\t\t\tonOk={this.onOk.bind(this)}\n\t\t\t\tonRequestClose={this.props.onCancel}\n\t\t\t\tokDisabled={ !this.state.iso3 ||!this.state.domain ||!this.state.areakm2 ||this.props.loading}\n\t\t\t\tcancelLabel={\"Cancel\"}\n\t\t\t\tshowCancelButton={true}\n\t\t\t\thelpLink={\"user.html#creating-new-planning-grids-using-marxan-web\"}\n\t\t\t\ttitle=\"New planning grid\"\n\t\t\t\tcontentWidth={358}\n\t\t\t\tchildren={\n\t\t\t\t\t<React.Fragment key=\"k13\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<SelectField menuItemStyle={{ fontSize: \"12px\" }} labelStyle={{ fontSize: \"12px\" }} onChange={this.changeIso3.bind(this)} value={this.state.iso3} floatingLabelText=\"Area of interest\" floatingLabelFixed={true}>\n\t\t\t\t\t\t\t\t{this.props.countries.map(item => {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\t\tstyle={{ fontSize: \"12px\" }}\n\t\t\t\t\t\t\t\t\t\t\tvalue={item.iso3}\n\t\t\t\t\t\t\t\t\t\t\tprimaryText={item.name_iso31}\n\t\t\t\t\t\t\t\t\t\t\tkey={item.iso3}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</SelectField> \n\t\t\t\t\t\t\t{/*<ToolbarButton icon={<FontAwesomeIcon icon={faArrowAltCircleUp} />} title=\"Load a custom area of interest from a shapefile (not currently implemented)\" style={{position: 'absolute', top: '83px', right: '32px'}}/>*/}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<SelectField menuItemStyle={{ fontSize: \"12px\" }} labelStyle={{ fontSize: \"12px\" }} onChange={this.changeDomain.bind(this)} value={this.state.domain} style={dropDownStyle} floatingLabelText=\"Domain\" floatingLabelFixed={true} disabled={!this.state.domainEnabled}>\n\t\t\t\t\t\t\t\t{CONSTANTS.DOMAINS.map(item => {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\t\tstyle={{ fontSize: \"12px\" }}\n\t\t\t\t\t\t\t\t\t\t\tvalue={item}\n\t\t\t\t\t\t\t\t\t\t\tprimaryText={item}\n\t\t\t\t\t\t\t\t\t\t\tkey={item}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</SelectField>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<SelectField menuItemStyle={{ fontSize: \"12px\" }} labelStyle={{ fontSize: \"12px\" }} onChange={this.changeShape.bind(this)} value={this.state.shape} style={dropDownStyle} floatingLabelText=\"Planning unit shape\" floatingLabelFixed={true}>\n\t\t\t\t\t\t\t\t{CONSTANTS.SHAPES.map(item => {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\t\tstyle={{ fontSize: \"12px\" }}\n\t\t\t\t\t\t\t\t\t\t\tvalue={item}\n\t\t\t\t\t\t\t\t\t\t\tprimaryText={item}\n\t\t\t\t\t\t\t\t\t\t\tkey={item}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</SelectField>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<SelectField menuItemStyle={{ fontSize: \"12px\" }} labelStyle={{ fontSize: \"12px\" }} onChange={this.changeAreaKm2.bind(this)} value={this.state.areakm2} style={dropDownStyle} floatingLabelText=\"Area of each planning unit\" floatingLabelFixed={true}>\n\t\t\t\t\t\t\t\t{CONSTANTS.AREAKM2S.map(item => {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\t\tstyle={{ fontSize: \"12px\" }}\n\t\t\t\t\t\t\t\t\t\t\tvalue={item}\n\t\t\t\t\t\t\t\t\t\t\tprimaryText={item + \" Km2\"}\n\t\t\t\t\t\t\t\t\t\t\tkey={item}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</SelectField>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</React.Fragment>\n\t\t\t\t}\n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default NewPlanningGridDialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from 'react';\n/*eslint-disable no-unused-vars*/\nimport axios, { post } from 'axios';\n/*eslint-enable no-unused-vars*/\nimport FontAwesome from 'react-fontawesome';\nimport Sync from 'material-ui/svg-icons/notification/sync'; \n\n//From AshikNesin https://gist.github.com/AshikNesin/e44b1950f6a24cfcd85330ffc1713513\n\nclass FileUpload extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = { loading: false,active:false };\n\t\tthis.onChange = this.onChange.bind(this);\n\t\t//the destination folder on the server where the file will be uploaded\n\t\tthis.destFolder = (props.hasOwnProperty('destFolder')) ? props.destFolder : '';\n\t}\n \n\tonClick(e){\n\t\tthis.setState({active:true});\n\t}\n\tonChange(e) {\n\t\tif (e.target.files.length) {\n\t\t\t//set the loading state \n\t\t\tthis.setState({ loading: true });\n\t\t\t//get the filename\n\t\t\tthis.filename = e.target.files[0].name;\n\t\t\t//upload the file\n\t\t\tthis.props.fileUpload(e.target.files[0], this.filename, this.destFolder).then(response=>{\n\t\t\t\tthis.setState({ loading: false,active:false});\n\t\t\t\tthis.props.setFilename(this.filename);\n\t\t\t});\n\t\t\t//reset the file selector\n\t\t\tdocument.getElementById(this.id).value = \"\";\n\t\t}\n\t}\n\n\trender() {\n\t\tthis.id = \"upload\" + this.props.parameter;\n\t\treturn (\n\t\t\t<form style={this.props.style}>\n\t\t\t\t<div className='uploadLabel' style={{color: (this.state.active) ? 'rgb(0, 188, 212)' : 'rgba(0, 0, 0, 0.3)'}}>{this.props.label}</div> \n\t\t\t\t<div className='uploadFileField'>\n\t\t\t\t\t<div className='uploadFileFieldIcon'>\n\t\t\t\t\t\t<label htmlFor={this.id}><FontAwesome name='file' title='Click to upload a file' style={{'cursor':'pointer'}}/></label>\n\t\t\t\t\t\t<input type=\"file\" onChange={this.onChange} onClick={this.onClick.bind(this)} accept={this.props.fileMatch} style={{'display':'none', 'width':'10px'}} id={this.id} />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className='uploadFileFieldLabel' style={{width:'168px'}}>{this.props.filename}</div>\n\t\t\t\t</div>\n\t\t\t\t<Sync className='spin' style={{'display': (this.state.loading ? \"inline-block\" : \"none\"), 'marginLeft':'6px',color: 'rgb(255, 64, 129)', height:\"22px\",width:\"22px\",'verticalAlign':'middle'}} key={\"spinner\"}/>\n\t\t\t</form>\n\t\t);\n\t}\n}\n\nexport default FileUpload;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport * as React from 'react';\nimport MarxanTextField from './MarxanTextField';\nimport MarxanDialog from \"./MarxanDialog\";\nimport FileUpload from './FileUpload';\n\nclass ImportPlanningGridDialog extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {planning_grid_name:'', zipFilename: '', description:\"\"}; \n\t}\n\tchangeName(event, newValue) {\n\t\tthis.setState({planning_grid_name: newValue});\n\t}\n\tchangeDescription(event, newValue) {\n\t\tthis.setState({ description: newValue });\n\t}\n\tsetzipFilename(filename) { \n\t\tthis.setState({ zipFilename: filename }); \n\t} \n\tonOk(){\n\t\tlet _description = (this.state.description === \"\") ? 'Imported using the import planning grid dialog' : this.state.description;\n\t\tthis.props.onOk(this.state.zipFilename, this.state.planning_grid_name, _description).then(function(response){\n\t\t\t//reset the state\n\t\t\tthis.setState({planning_grid_name:'', zipFilename: '', description:\"\"});\n\t\t}).catch(function(ex) {\n\t\t\t//error uploading the shapefile\n\t  });\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<MarxanDialog \n\t\t\t\t{...this.props} \n\t\t\t\ttitle={'Import planning grid'}\n\t\t\t\tcontentWidth={390}\n\t\t\t\tchildren={\n\t\t\t\t\t<React.Fragment key=\"22\">\n\t\t\t\t\t\t<FileUpload \n\t\t\t\t\t\t\t{...this.props} \n\t\t\t\t\t\t\tfileMatch={'.zip'}\n\t\t\t\t\t\t\tdestFolder='imports' \n\t\t\t\t\t\t\tmandatory={true} \n\t\t\t\t\t\t\tfilename={this.state.zipFilename} \n\t\t\t\t\t\t\tsetFilename={this.setzipFilename.bind(this)} \n\t\t\t\t\t\t\tlabel=\"Shapefile\" \n\t\t\t\t\t\t/> \n\t\t\t\t\t\t<MarxanTextField style={{width:'310px'}} value={this.state.planning_grid_name} onChange={this.changeName.bind(this)} floatingLabelText=\"Name\"/>\n\t\t\t\t\t\t<MarxanTextField style={{width:'310px'}} value={this.state.description} onChange={this.changeDescription.bind(this)} multiLine={true} rows={2} floatingLabelText=\"Enter a description\"/>\n\t\t\t\t\t</React.Fragment>\n\t\t\t\t} \n\t\t\t\tshowCancelButton={true}\n\t\t\t\tonOk={this.onOk.bind(this)}\n\t\t\t\tokDisabled={this.props.loading || this.state.planning_grid_name==='' || this.state.zipFilename==='' || this.state.description===\"\"}\n\t\t\t\tonRequestClose={this.props.onCancel.bind(this)} \n\t\t\t\thelpLink={\"user.html#importing-existing-planning-grids\"}\n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default ImportPlanningGridDialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from 'react';\nimport MarxanDialog from './MarxanDialog';\nimport MapContainer2 from './MapContainer2';\nimport { getArea } from './Helpers.js';\nimport FontAwesome from 'react-fontawesome';\n\nclass FeatureDialog extends React.Component { \n\tconstructor (props){\n\t\tsuper(props);\n\t\tthis.state = {expanded: false};\n\t}\n\texpand(){\n\t\tthis.setState({expanded: !this.state.expanded});\n\t}\n\tgetProjectList(){\n\t\tthis.props.getProjectList(this.props.feature_metadata, \"feature\");\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<MarxanDialog\n\t\t\t\t{...this.props}\n\t\t\t\tonRequestClose={this.props.onCancel}\n\t\t\t\tshowCancelButton={false}\n\t\t\t\ttitle={this.props.feature_metadata.alias}\n\t\t\t\thelpLink={\"user.html#the-feature-details-window\"}\n\t\t\t\tcontentWidth={768}\n\t\t\t\tchildren={\n\t\t\t\t\t<React.Fragment key=\"k26\">\n\t\t\t\t\t\t<MapContainer2\n\t\t\t\t\t\t\tplanning_grid_metadata={this.props.feature_metadata}\n\t\t\t\t\t\t\tgetTilesetMetadata={this.props.getTilesetMetadata}\n\t\t\t\t\t\t\tsetSnackBar={this.props.setSnackBar}\n\t\t\t\t\t\t\tcolor={this.props.feature_metadata.color}\n\t\t\t\t\t\t\toutlineColor={\"rgba(0, 0, 0, 0.2)\"}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div className=\"metadataPanel\">\n\t\t\t\t\t\t\t<table>\n\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td colSpan='2' className='metadataItemTitle'>Description:</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td colSpan='2' className='metadataItemValue2'>{this.props.feature_metadata.description}</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td className='metadataItemTitle'>Area:</td>\n\t\t\t\t\t\t\t\t\t\t<td className='metadataItemValue'>{getArea(this.props.feature_metadata.area, this.props.reportUnits, true)}</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td className='metadataItemTitle'>Created:</td>\n\t\t\t\t\t\t\t\t\t\t<td className='metadataItemValue'>{this.props.feature_metadata.creation_date}</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td className='metadataItemTitle'>Created by:</td>\n\t\t\t\t\t\t\t\t\t\t<td className='metadataItemValue'>{this.props.feature_metadata.created_by}</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td className='metadataItemTitle'>Source:</td>\n\t\t\t\t\t\t\t\t\t\t<td className='metadataItemValue'>{this.props.feature_metadata.source}</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr style={{display:(this.state.expanded) ? 'table-row' : 'none'}}>\n\t\t\t\t\t\t\t\t\t\t<td className='metadataItemTitle'>id:</td>\n\t\t\t\t\t\t\t\t\t\t<td className='metadataItemValue'>{this.props.feature_metadata.id}</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr style={{display:(this.state.expanded) ? 'table-row' : 'none'}}>\n\t\t\t\t\t\t\t\t\t\t<td className='metadataItemTitle'>guid:</td>\n\t\t\t\t\t\t\t\t\t\t<td className='metadataItemValue'>{this.props.feature_metadata.feature_class_name}</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr style={{display:(this.state.expanded) ? 'table-row' : 'none'}}>\n\t\t\t\t\t\t\t\t\t\t<td className='metadataItemTitle'>tileset:</td>\n\t\t\t\t\t\t\t\t\t\t<td className='metadataItemValue'>{this.props.feature_metadata.tilesetid}</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr style={{display:(this.state.expanded) ? 'table-row' : 'none'}}>\n\t\t\t\t\t\t\t\t\t\t<td className='metadataItemTitle'>Projects:</td>\n\t\t\t\t\t\t\t\t\t\t<td className='metadataItemValue'><FontAwesome name='external-link-alt' onClick={this.getProjectList.bind(this)} title='View a list of projects that this feature is used in' style={{'cursor':'pointer', 'paddingTop':'6px'}}/></td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t\t<div onClick={this.expand.bind(this)} title={(this.state.expanded) ? \"Show less details\" : \"Show more details\"} className={'textHyperlink'}>{(this.state.expanded) ? 'less' : 'more..'}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</React.Fragment>\n\t\t\t\t}\n\t\t\t/>\n\t\t); //return\n\t}\n}\n\nexport default FeatureDialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport * as React from 'react';\nimport MarxanDialog from './MarxanDialog';\nimport MarxanTextField from './MarxanTextField';\nimport Checkbox from 'material-ui/Checkbox';\n\nclass NewFeatureDialog extends React.Component {\n\tconstructor(props){\n\t\tsuper(props);\n\t\tthis.state = {name:\"\",description:\"\"};\n\t}\n\tchangeName(event, newValue) {\n\t\tthis.setState({name:newValue});\n\t}\n\tchangeDescription(event, newValue) {\n\t\tthis.setState({description: newValue});\n\t}\n\tcreateNewFeature(){\n\t\tthis.props.createNewFeature(this.state.name, this.state.description);\n\t}\n\trender() {\n\t\tlet c = \n\t\t\t<React.Fragment key=\"k12\">\n\t\t\t\t<div> \n\t\t\t\t\t<MarxanTextField value={this.state.name} onChange={this.changeName.bind(this)} floatingLabelText=\"Enter a name\"/>\n\t\t\t\t\t<MarxanTextField value={this.state.description} onChange={this.changeDescription.bind(this)} multiLine={true} rows={2} floatingLabelText=\"Enter a description\"/>\n\t\t\t\t\t<Checkbox label=\"Add to project\" style={{fontSize:'12px', width:'200px',display:'inline-block', 'marginTop':'10px'}} onCheck={this.props.setAddToProject} checked={this.props.addToProject} />\t\t\t\t\t\n\t\t\t\t</div>\n\t\t\t</React.Fragment>;\n\t\treturn (\n\t\t\t<MarxanDialog  \n\t\t\t\t{...this.props} \n\t\t\t\tonOk={this.createNewFeature.bind(this)}\n\t\t\t\tokDisabled={!(this.state.name!=='' && this.state.description!=='' && this.props.loading===false)}\n\t\t\t\tshowCancelButton={true}\n\t\t\t\tcontentWidth={390}\n\t\t\t\ttitle=\"Create new feature\" \n\t\t\t\tchildren={c} \n\t\t\t\tonRequestClose={this.props.onOk} \n\t\t\t\thelpLink={\"user.html#drawing-features-on-screen\"}\n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default NewFeatureDialog;","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport * as React from 'react';\nimport MarxanDialog from './MarxanDialog';\nimport MarxanTextField from './MarxanTextField';\nimport FileUpload from './FileUpload.js';\nimport SelectField from \"material-ui/SelectField\";\nimport MenuItem from \"material-ui/MenuItem\";\nimport ToolbarButton from './ToolbarButton';\nimport { RadioButton, RadioButtonGroup } from 'material-ui/RadioButton';\nimport Checkbox from 'material-ui/Checkbox';\n\nlet INITIAL_STATE = { steps: ['shapefile', 'single_or_multiple', 'metadata'], stepIndex: 0, fieldnames: [], splitField: \"\", name: \"\", description: \"\" };\nclass ImportFeaturesDialog extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = INITIAL_STATE;\n\t}\n\thandleNext(){\n\t\tconst { stepIndex } = this.state;\n\t\tswitch (stepIndex) {\n\t\t\tcase 0:\n\t\t\t\t//unzip the shapefile on the server\n\t\t\t\tthis.props.unzipShapefile(this.props.filename).then((response) => {\n\t\t\t\t\t//get the name of the shapefile in the zip file\n\t\t\t\t\tthis.shapefile = response.rootfilename + \".shp\";\n\t\t\t\t\tthis.setState({ stepIndex: stepIndex + 1 });\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tcase (this.state.steps.length - 1):\n\t\t\t\tthis.importFeatures();\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthis.setState({ stepIndex: stepIndex + 1 });\n\t\t}\n\t}\n\thandlePrev(){\n\t\tconst { stepIndex } = this.state;\n\t\tthis.setState({ stepIndex: stepIndex - 1 });\n\t}\n\tchangeName(event, newValue) {\n\t\tthis.setState({ name: newValue });\n\t}\n\tchangeDescription(event, newValue) {\n\t\tthis.setState({ description: newValue });\n\t}\n\tchangeSplitField(event, index) {\n\t\tthis.setState({ splitField: this.state.fieldnames[index] });\n\t}\n\tgetShapefileFieldnames() {\n\t\t//get the field names from the unzipped shapefile on the server\n\t\tthis.props.getShapefileFieldnames(this.shapefile).then((response) => {\n\t\t\t//set the fieldnames in local state\n\t\t\tthis.setState({ fieldnames: response.fieldnames });\n\t\t});\n\t}\n\tresetFieldnames() {\n\t\tthis.setState({ fieldnames: [] });\n\t}\n\timportFeatures() {\n\t\tthis.props.importFeatures(this.props.filename, this.state.name, this.state.description, this.shapefile, this.state.splitField).then((response) => {\n\t\t\tthis.closeDialog();\n\t\t});\n\t}\n\tcloseDialog() {\n\t\t//delete the zip file and shapefile\n\t\tthis.props.deleteShapefile(this.props.filename, this.shapefile);\n\t\tthis.setState(INITIAL_STATE);\n\t\tthis.shapefile = \"\";\n\t\tthis.props.setFilename(\"\");\n\t\tthis.props.onCancel();\n\t}\n\trender() {\n\t\tlet _disabled = false;\n\t\tconst { stepIndex } = this.state;\n\t\tconst contentStyle = { margin: '0 16px' };\n\t\t//get the disabled state for the next/finish button\n\t\tswitch (stepIndex) {\n\t\t\tcase 0:\n\t\t\t\t_disabled = (this.props.filename === \"\");\n\t\t\t\tbreak;\n\t\t\tcase 1:\n\t\t\t\t_disabled = (this.props.loading);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\t// code\n\t\t}\n\t\tconst actions = [\n\t\t\t<div style={{width: '100%', maxWidth: '500px', margin: 'auto',textAlign:'center'}}>\n\t\t\t\t<div style={contentStyle}>\n\t\t\t\t\t<div style={{marginTop: 12}}>\n\t\t\t\t\t\t<ToolbarButton label=\"Back\" disabled={stepIndex === 0 || this.props.loading} onClick={this.handlePrev.bind(this)} />\n\t\t\t\t\t\t<ToolbarButton label={stepIndex === (this.state.steps.length-1) ? 'Finish' : 'Next'} onClick={this.handleNext.bind(this)} \n\t\t\t\t\t\tdisabled={_disabled || this.props.loading || \n\t\t\t\t\t\t\t(stepIndex===2 && this.state.fieldnames.length === 0 && (this.state.name==='' || this.state.description==='')) || \n\t\t\t\t\t\t\t(stepIndex===2 && this.state.fieldnames.length !== 0 && this.state.splitField==='')\n\t\t\t\t\t\t} \n\t\t\t\t\t\tprimary={true}/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t];\n\t\tlet children =\n\t\t\t<div key=\"k12\">\n\t\t\t\t{stepIndex === 0 ? \n\t\t\t\t\t<div>\n\t\t\t\t\t\t<FileUpload \n\t\t\t\t\t\t{...this.props} \n\t\t\t\t\t\tfileMatch={'.zip'}\n\t\t\t\t\t\tmandatory={true} \n\t\t\t\t\t\tfilename={this.props.filename} \n\t\t\t\t\t\tsetFilename={this.props.setFilename} \n\t\t\t\t\t\tdestFolder={'imports'}\n\t\t\t\t\t\tlabel=\"Shapefile\" \n\t\t\t\t\t\tstyle={{'paddingTop':'10px'}} \n\t\t\t\t\t\t/> \n\t\t\t\t\t</div>\n\t\t\t\t: null}\n\t\t\t\t{stepIndex === 1 ? \n\t\t\t\t\t<div>\n\t\t\t\t\t    <RadioButtonGroup name=\"createFeatureType\" defaultSelected=\"single\">\n\t\t\t\t\t      <RadioButton className={'radioButton'} value=\"single\" label=\"Create single feature\" style={{padding:'10px'}} onClick={this.resetFieldnames.bind(this)}/>\n\t\t\t\t\t      <RadioButton className={'radioButton'} value=\"multiple\" label=\"Split into multiple features\" style={{padding:'10px'}} onClick={this.getShapefileFieldnames.bind(this)}/>\n\t\t\t\t\t    </RadioButtonGroup>\n\t\t\t\t\t</div>\n\t\t\t\t: null}\n\t\t\t\t{(stepIndex === 2) ? \n\t\t\t\t(this.state.fieldnames.length === 0) ?\n\t\t\t\t\t<div> \n\t\t\t\t\t\t<MarxanTextField value={this.state.name} onChange={this.changeName.bind(this)} floatingLabelText=\"Enter a name\" />\n\t\t\t\t\t\t<MarxanTextField value={this.state.description} onChange={this.changeDescription.bind(this)} multiLine={true} rows={2} floatingLabelText=\"Enter a description\"/>\n\t\t\t\t\t\t<Checkbox label=\"Add to project\" style={{fontSize:'12px', width:'200px',display:'inline-block', 'marginTop':'10px'}} onCheck={this.props.setAddToProject} checked={this.props.addToProject} />\t\t\t\t\t\n\t\t\t\t\t</div> :\n\t\t\t\t\t<div> \n\t\t\t\t\t\t<SelectField menuItemStyle={{ fontSize: \"12px\" }} labelStyle={{ fontSize: \"12px\" }} onChange={this.changeSplitField.bind(this)} value={this.state.splitField} floatingLabelText=\"Split features by\" floatingLabelFixed={true}>\n\t\t\t\t\t\t\t{this.state.fieldnames.map(item => {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<MenuItem style={{ fontSize: \"12px\" }} value={item} primaryText={item} key={item} />\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</SelectField> \n\t\t\t\t\t\t<Checkbox label=\"Add to project\" style={{fontSize:'12px', width:'200px',display:'inline-block', 'marginTop':'10px'}} onCheck={this.props.setAddToProject} checked={this.props.addToProject} />\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t</div> \n\t\t\t\t: null}\n\t\t\t</div>;\n\t\treturn (\n\t\t\t<MarxanDialog  \n\t\t\t\t{...this.props} \n\t\t\t\tonOk={this.closeDialog.bind(this)}\n\t\t\t\tokLabel={\"Cancel\"}\n\t\t\t\tcontentWidth={390}\n\t\t\t\ttitle= {\"Import features\"}\n\t\t\t\tchildren={children} \n\t\t\t\tactions={actions}  \n\t\t\t\tonRequestClose={this.closeDialog.bind(this)} \n\t\t\t\thelpLink={\"user.html#importing-from-a-shapefile\"}\n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default ImportFeaturesDialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\n/*global fetch*/\n/*global DOMParser*/\nimport * as React from 'react';\nimport MarxanDialog from './MarxanDialog';\nimport MarxanTextField from './MarxanTextField';\nimport SelectField from \"material-ui/SelectField\";\nimport MenuItem from \"material-ui/MenuItem\";\nimport ToolbarButton from './ToolbarButton';\nimport Checkbox from 'material-ui/Checkbox';\n\nlet INITIAL_STATE = { steps: ['type', 'endpoint', 'layer','metadata'], stepIndex: 0, name: \"\", description: \"\", sourceType: \"\", endpoint: \"\", srs: \"\", featureTypes: [], featureType: \"\", validendpoint: true, loading: false };\nlet SOURCE_TYPES = ['Web Feature Service'];\n\nclass ImportFromWebDialog extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = INITIAL_STATE;\n\t}\n\thandleNext() {\n\t\tconst { stepIndex } = this.state;\n\t\tswitch (stepIndex) {\n\t\t\tcase (this.state.steps.length - 1):\n\t\t\t\tthis.importFeatures();\n\t\t\t\tbreak;\n\t\t\tdefault: this.setState({ stepIndex: stepIndex + 1 });\n\t\t}\n\t}\n\thandlePrev() {\n\t\tconst { stepIndex } = this.state;\n\t\tthis.setState({ stepIndex: stepIndex - 1 });\n\t}\n\tchangeSourceType(event, index) {\n\t\tthis.setState({ sourceType: SOURCE_TYPES[index] });\n\t}\n\t//loads an WFS getcapabilities endpoint\n\tgetCapabilities(endpoint){\n\t\treturn new Promise((resolve, reject) => {\n\t\t\t//must start with http\n\t\t\tif (endpoint.substr(0,4) !== 'http') {\n\t\t\t\treject(\"Invalid endpoint\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t//fetch the data\n\t\t\tfetch(endpoint).then((response) => {\n\t\t\t\tresponse.text().then((xml) => {\n\t\t\t\t\t//return the xml\n\t\t\t\t\tresolve(xml);\t\t\t\t\t\n\t\t\t\t});\n\t\t\t}).catch ((error) => {\n\t\t\t\t//reject any errors in the call\n\t\t\t\treject(error);\n\t\t\t});\n\t\t});\n\t}\n\t//when the user changes the wfs endpoint\n\tchangeEndpoint(event, newValue) {\n\t\tthis.setState({ endpoint: newValue, loading: true, validendpoint: true });\n\t\t//load the GetCapabilities XML\n\t\tthis.getCapabilities(newValue).then((response) => {\n\t\t\tthis.setState({loading: false, validendpoint: true});\n\t\t\t//parse the reponse as an xml document\n\t\t\tlet parser = new DOMParser();\n\t\t\tlet xmlDoc = parser.parseFromString(response,\"text/xml\");\n\t\t\t//get the required info from the getcapabilities data\n\t\t\tthis.getWFSInfo(xmlDoc);\n\t\t}).catch((err) => {\n\t\t\tthis.setState({loading: false, validendpoint: false});\n\t\t\tconsole.log(err);\n\t\t});\n\t}\n\t//retrieves information from the WFS getcapabilities data\n\tgetWFSInfo(xmlDoc){\n\t\t//get the feature types\n\t\tlet featureTypesElements = xmlDoc.getElementsByTagName('wfs:FeatureType');\n\t\t//initialise the feature names array\n\t\tlet featureTypes = [];\n\t\t//get the feature types (i.e. names)\n\t\tfor (let item of featureTypesElements) {\n\t\t\tfeatureTypes.push(item.getElementsByTagName('wfs:Name')[0].textContent);\n\t\t}\t\t\n\t\t//get the spatial reference system - in WFS it is encoded as 'urn:ogc:def:crs:EPSG::3857'\n\t\tlet srs = \"EPSG:\" + xmlDoc.getElementsByTagName('wfs:DefaultCRS')[0].textContent.substr(-4);\n\t\tthis.setState({featureTypes: featureTypes, srs: srs});\n\t}\n\tchangeFeatureType(event, newValue) {\n\t\tthis.setState({ featureType: this.state.featureTypes[newValue] });\n\t}\n\tchangeName(event, newValue) {\n\t\tthis.setState({ name: newValue });\n\t}\n\tchangeDescription(event, newValue) {\n\t\tthis.setState({ description: newValue });\n\t}\n\timportFeatures() {\n\t\t//remove the &request=getCapabilities from the endpoint\n\t\tlet getFeatureEndpoint = this.state.endpoint.substr(0, this.state.endpoint.indexOf('request')-1);\n\t\tthis.props.importFeatures(this.state.name, this.state.description, getFeatureEndpoint, this.state.srs, this.state.featureType).then((response) => {\n\t\t\tthis.closeDialog();\n        }).catch(error => {\n\t\t\tthis.closeDialog();\n\t\t});\n\t}\n\tcloseDialog() {\n\t\tthis.setState(INITIAL_STATE);\n\t\tthis.props.onCancel();\n\t}\n\trender() {\n\t\tlet _disabled = false;\n\t\tconst { stepIndex } = this.state;\n\t\tconst contentStyle = { margin: '0 16px' };\n\t\t//get the disabled state for the next/finish button\n\t\tswitch (stepIndex) {\n\t\t\tcase 0:\n\t\t\t\t_disabled = (this.state.sourceType === \"\");\n\t\t\t\tbreak;\n\t\t\tcase 1:\n\t\t\t\t_disabled = (!this.state.validendpoint || this.state.endpoint==='' || this.state.loading);\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\t_disabled = (this.state.featureType === '');\n\t\t\t\tbreak;\n\t\t\tcase 3:\n\t\t\t\t_disabled = (this.state.name === '' || this.state.description === '');\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\t// code\n\t\t}\n\t\tconst actions = [\n\t\t\t<div style={{width: '100%', maxWidth: '500px', margin: 'auto',textAlign:'center'}}>\n\t\t\t\t<div style={contentStyle}>\n\t\t\t\t\t<div style={{marginTop: 12}}>\n\t\t\t\t\t\t<ToolbarButton label=\"Back\" disabled={stepIndex === 0 || this.props.loading} onClick={this.handlePrev.bind(this)} />\n\t\t\t\t\t\t<ToolbarButton label={stepIndex === (this.state.steps.length-1) ? 'Finish' : 'Next'} onClick={this.handleNext.bind(this)} disabled={_disabled || this.props.loading} primary={true}/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t];\n\t\tlet children =\n\t\t\t<div key=\"k28\">\n\t\t\t\t{stepIndex === 0 ? \n\t\t\t\t\t<div>\n\t\t\t\t\t\t<SelectField menuItemStyle={{ fontSize: \"12px\" }} labelStyle={{ fontSize: \"12px\" }} onChange={this.changeSourceType.bind(this)} value={this.state.sourceType} floatingLabelText=\"Select source type\" floatingLabelFixed={true}>\n\t\t\t\t\t\t\t{SOURCE_TYPES.map(item => {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<MenuItem style={{ fontSize: \"12px\" }} value={item} primaryText={item} key={item} />\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</SelectField> \n\t\t\t\t\t</div>\n\t\t\t\t: null}\n\t\t\t\t{stepIndex === 1 ? \n\t\t\t\t\t<div>\n\t\t\t\t\t\t<MarxanTextField style={{'width':'330px'}} value={this.state.endpoint} errorText={(this.state.validendpoint ? '' : 'Invalid WFS endpoint')} onChange={this.changeEndpoint.bind(this)} floatingLabelText=\"Enter the WFS endpoint\"/>\n\t\t\t\t\t</div>\n\t\t\t\t: null}\n\t\t\t\t{(stepIndex === 2) ? \n\t\t\t\t\t<div> \n\t\t\t\t\t\t<SelectField menuItemStyle={{ fontSize: \"12px\" }} autoWidth={true} labelStyle={{ fontSize: \"12px\" }} onChange={this.changeFeatureType.bind(this)} value={this.state.featureType} floatingLabelText=\"Select feature type\" floatingLabelFixed={true}>\n\t\t\t\t\t\t\t{this.state.featureTypes.map(item => {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<MenuItem style={{ fontSize: \"12px\" }} value={item} primaryText={item} key={item} />\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</SelectField> \n\t\t\t\t\t</div> \n\t\t\t\t: null}\n\t\t\t\t{stepIndex === 3 ? \n\t\t\t\t\t<div>\n\t\t\t\t\t\t<MarxanTextField value={this.state.name} onChange={this.changeName.bind(this)} floatingLabelText=\"Enter a name\"/>\n\t\t\t\t\t\t<MarxanTextField value={this.state.description} onChange={this.changeDescription.bind(this)} multiLine={true} rows={2} floatingLabelText=\"Enter a description\"/>\n\t\t\t\t\t\t<Checkbox label=\"Add to project\" style={{fontSize:'12px', width:'200px',display:'inline-block', 'marginTop':'10px'}} onCheck={this.props.setAddToProject} checked={this.props.addToProject} />\t\t\t\t\t\n\t\t\t\t\t</div>\n\t\t\t\t: null}\n\t\t\t</div>;\n\t\treturn (\n\t\t\t<MarxanDialog  \n\t\t\t\t{...this.props} \n\t\t\t\tonOk={this.closeDialog.bind(this)}\n\t\t\t\tokLabel={\"Cancel\"}\n\t\t\t\tloading={this.props.loading || this.state.loading}\n\t\t\t\tcontentWidth={390}\n\t\t\t\ttitle= {\"Import from web\"}\n\t\t\t\tchildren={children} \n\t\t\t\tactions={actions}  \n\t\t\t\tonRequestClose={this.closeDialog.bind(this)} \n\t\t\t\thelpLink={\"user.html#importing-from-the-web\"}\n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default ImportFromWebDialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from 'react';\nimport CONSTANTS from './constants';\nimport MarxanDialog from './MarxanDialog';\nimport ReactTable from \"react-table\";\nimport ToolbarButton from './ToolbarButton';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faTrashAlt } from '@fortawesome/free-regular-svg-icons';\nimport Import from 'material-ui/svg-icons/action/get-app';\n\nclass CostsDialog extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {selectedCost: undefined};\n\t}\n\tchangeCost(event, cost) {\n\t\tthis.setState({ selectedCost: cost });\n\t}\n\t_delete(){\n\t\tthis.props.deleteCost(this.state.selectedCost.name);\n\t\tthis.setState({ selectedCost: undefined });\n\t}\n\trender() {\n\t\tlet _data = this.props.data.map(item=>{\n\t\t\treturn{name:item};\t\t\t\n\t\t});\n\t\treturn (\n\t\t\t<MarxanDialog\n\t\t\t{...this.props} \n\t\t\tcontentWidth={390}\n\t\t\tautoDetectWindowHeight={ false } \n\t\t\tbodyStyle={ { padding: '0px 24px 0px 24px' } }\n\t\t\toffsetY={80}\n\t\t\ttitle=\"Costs\" \n\t\t\tonRequestClose={this.props.closeCostsDialog}\n\t\t\thelpLink={\"user.html#importing-a-cost-surface\"}\n\t\t\tchildren={            \n\t\t\t<React.Fragment key=\"k8\">\n\t            <ReactTable \n\t                {...this.props}\n\t                pageSize={_data.length} \n                    columns={[{Header: 'Name', accessor: 'name', headerStyle: {'textAlign': 'left'}}]}\n\t                className={'projectsReactTable noselect'} \n\t                showPagination={false} \n\t                minRows={0} \n\t                data={_data}\n\t                selectedCost={this.state.selectedCost}\n\t                changeCost={this.changeCost.bind(this)}\n\t\t\t\t\tgetTrProps={(state, rowInfo) => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t\tbackground: (rowInfo.original.name === (state.selectedCost && state.selectedCost.name)) ? \"aliceblue\" : \"\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tonClick: (e) => {\n\t\t\t\t\t\t\t\tstate.changeCost(e, rowInfo.original);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t}}\n\t                \n\t            />\n\t            <div id='costsToolbar'>\n            \t<ToolbarButton show={(this.props.userRole !== \"ReadOnly\") } icon={<Import style={{height:'20px',width:'20px'}}/>} title=\"Upload a new costs file\" disabled={ this.props.loading }  onClick={ this.props.openImportCostsDialog.bind(this) } label={ \"Import\" }/>\n\t\t\t\t<ToolbarButton show={!this.props.unauthorisedMethods.includes(\"deletePlanningUnitGrid\")} icon={<FontAwesomeIcon icon={faTrashAlt}  color='rgb(255, 64, 129)'/>} title=\"Delete cost profile\" disabled={!this.state.selectedCost || (this.state.selectedCost && this.state.selectedCost.name === this.props.costname) || (this.state.selectedCost && this.state.selectedCost.name === CONSTANTS.UNIFORM_COST_NAME)} onClick={this._delete.bind(this)} label={\"Delete\"}/>\n\t            </div>\n\t\t\t</React.Fragment>}/>\n\t\t);\n\t}\n}\n\nexport default CostsDialog;","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from 'react';\nimport MarxanDialog from './MarxanDialog';\nimport FileUpload from './FileUpload.js';\nlet INITIAL_STATE = {costs_filename:'', costname:''};\n\nclass ImportCostsDialog extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = INITIAL_STATE; \n\t}\n\tresetState(){\n\t\tthis.setState(INITIAL_STATE);\n\t}\n\tonOk(){\n\t\t//add the cost to the application state\n\t\tthis.props.addCost(this.state.costname);\n\t\t//reset the import cost state\n\t\tthis.resetState();\n\t\t//close the dialog\n\t\tthis.props.closeImportCostsDialog();\n\t}\n\tsetCostsFilename(filename) { \n\t\tthis.setState({ costs_filename: filename, costname: filename.substring(0,filename.length-5)});\n\t} \n\tdeleteCostFileThenClose(){\n\t\tthis.props.deleteCostFileThenClose(this.state.costname).then(_=>{\n\t\t\t//reset the import cost state\n\t\t\tthis.resetState();\n\t\t\t//close the dialog\n\t\t\tthis.props.closeImportCostsDialog();\n\t\t});\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<MarxanDialog\n\t\t\t{...this.props} \n\t\t\tcontentWidth={390}\n\t\t\toffsetY={80}\n\t\t\tokDisabled={this.props.loading}\n\t\t\ttitle=\"Import Cost surface\" \n\t\t\tshowCancelButton={true}\n\t\t\tonOk={this.onOk.bind(this)}\n\t\t\tonCancel={this.deleteCostFileThenClose.bind(this)}\n\t\t\tonRequestClose={this.deleteCostFileThenClose.bind(this)}\n\t\t\thelpLink={\"user.html#importing-a-cost-surface\"}\n\t\t\tchildren={            \n\t\t\t<React.Fragment key=\"k8\">\n\t\t\t\t<FileUpload \n\t\t\t\t{...this.props}\n\t\t\t\tfileMatch={'.cost'}\n\t\t\t\tmandatory={true} \n\t\t\t\tfilename={this.state.costs_filename} \n\t\t\t\tsetFilename={this.setCostsFilename.bind(this)} \n\t\t\t\tlabel=\"Costs surface filename\" \n\t\t\t\tstyle={{'paddingTop':'15px'}}/> \t\t\t\n\t\t\t</React.Fragment>}/>\n\t\t);\n\t}\n}\n\nexport default ImportCostsDialog;","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from 'react';\nimport 'react-table/react-table.css';\nimport ReactTable from \"react-table\";\nimport FontAwesome from 'react-fontawesome';\nimport MarxanDialog from './MarxanDialog';\n\nclass RunSettingsDialog extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = { data: [], updateEnabled: false };\n\t\tthis.renderEditable = this.renderEditable.bind(this); \n\t}\n\tcomponentDidUpdate(prevProps) {\n\t\tif (prevProps.runParams !== this.props.runParams) {\n\t\t\tthis.setState({ data: this.props.runParams });\n\t\t}\n\t}\n\topenParametersDialog(){\n\t\tthis.props.openParametersDialog();\n\t}\n\t//posts the results back to the server\n\tupdateRunParams() {\n\t\t//ui feedback \n\t\tthis.setState({ updateEnabled: false });\n\t\tif (this.props.userRole !== \"ReadOnly\")this.props.updateRunParams(this.state.data);\n\t\tthis.props.onOk();\n\t}\n\tsetUpdateEnabled() {\n\t\tthis.setState({ updateEnabled: true });\n\t}\n\trenderEditable(cellInfo) {\n\t\treturn (\n\t\t\t(this.props.userRole === \"ReadOnly\") ? \n\t\t\t<React.Fragment>\n\t\t\t\t<div>{this.state.data[cellInfo.index][\"value\"]}</div>\n\t\t\t</React.Fragment> \n\t\t\t: \n\t\t\t<React.Fragment>\n\t\t\t\t<div\n\t\t\t\t\tstyle={{ backgroundColor: \"#fafafa\", float: ([...this.state.data][cellInfo.index]['key'] === 'BLM') ? 'left' : 'none'}}\n\t\t\t\t\tcontentEditable\n\t\t\t\t\tsuppressContentEditableWarning\n\t\t\t\t\tonFocus={this.setUpdateEnabled.bind(this)}\n\t\t\t\t\tonBlur={e => {\n\t\t\t\t\t  const data = [...this.state.data];\n\t\t\t\t\t  data[cellInfo.index][cellInfo.column.id] = e.target.innerHTML;\n\t\t\t\t\t  this.setState({ data }); \n\t\t\t\t\t}}\n\t\t\t\t  >{this.state.data[cellInfo.index][\"value\"]}</div>\n\t\t\t\t  <FontAwesome name='external-link-alt' onClick={this.props.showClumpingDialog} title='Click to open the BLM comparison dialog' style={{display: ([...this.state.data][cellInfo.index]['key'] === 'BLM') ? 'block' : 'none', 'cursor':'pointer', 'paddingTop':'6px', 'paddingLeft':'35px'}}/>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<MarxanDialog \n\t\t\t\t{...this.props} \n\t\t\t\tcontentWidth={400}\n\t\t\t\toffsetX={80}\n\t\t\t\toffsetY={260}\n\t\t\t\tonOk={this.updateRunParams.bind(this)}\n\t\t\t\thelpLink={\"user.html#run-settings\"}\n\t\t\t\ttitle=\"Run settings\" \n\t\t\t\tchildren={\n\t\t\t\t\t<div style={{height:'275px'}} key=\"k16\">\n\t\t\t\t\t\t<ReactTable \n\t\t\t\t\t\t\tshowPagination={false} \n\t\t\t\t\t\t\tclassName={'summary_infoTable'}\n\t\t\t\t\t\t\tminRows={0}\n\t\t\t\t\t\t\tpageSize={this.state.data.length}\n\t\t\t\t\t\t\tdata={this.state.data}\n\t\t\t\t\t\t\tnoDataText=''\n\t\t\t\t\t\t\tcolumns={[{\n\t\t\t\t\t\t\t   Header: 'Parameter', \n\t\t\t\t\t\t\t   accessor: 'key',\n\t\t\t\t\t\t\t   width:165,\n\t\t\t\t\t\t\t   headerStyle:{'textAlign':'left'},\n\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t   Header: 'Value',\n\t\t\t\t\t\t\t   accessor: 'value',\n\t\t\t\t\t\t\t   width:193,\n\t\t\t\t\t\t\t   headerStyle:{'textAlign':'left'},\n\t\t\t\t\t\t\t   Cell: this.renderEditable\n\t\t\t\t\t\t\t}]}\n\t\t\t\t\t\t  />\n\t\t\t\t\t</div>\n\t\t\t\t} \n\t\t   />\n\t\t);\n\t}\n}\n\nexport default RunSettingsDialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from 'react';\nimport SelectField from 'material-ui/SelectField';\nimport MenuItem from 'material-ui/MenuItem';\n\nclass RendererSelector extends React.Component {\n\thandleChange(event, index, value) {\n\t\tthis.props.changeValue(value);\n\t}\n\trender() {\n\t\tlet primaryText;\n\t\tlet c = this.props.values.map((item) => {\n\t\t\tif (typeof(item) === 'string') {\n\t\t\t\tprimaryText = item.substr(0, 1).toUpperCase().concat(item.replace(\"_\", \" \").substr(1)); // sentence case and replace _ with space\n\t\t\t}\n\t\t\telse {\n\t\t\t\tprimaryText = item.toString();\n\t\t\t}\n\t\t\treturn <MenuItem value={item} key={item} primaryText={primaryText}/>;\n\t\t});\n\t\treturn (\n\t\t\t<SelectField selectionRenderer={this.props.selectionRenderer} menuItemStyle={{fontSize:'12px'}} labelStyle={{fontSize:'12px'}} listStyle={{fontSize:'12px'}} style={{width:'150px', margin: '0px 10px'}} autoWidth={true} floatingLabelText={this.props.floatingLabelText} floatingLabelFixed={true} children={c} onChange={this.handleChange.bind(this)} value={this.props.property}/>\n\t\t);\n\t}\n}\n\nexport default RendererSelector;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from 'react';\nimport SelectField from 'material-ui/SelectField';\nimport MenuItem from 'material-ui/MenuItem';\nimport { getMaxNumberOfClasses } from './Helpers.js';\n\nclass ColorSelector extends React.Component {\n\thandleChange(event, index, value) {\n\t\tthis.props.changeValue(value);\n\t}\n\tselectionRenderer() {\n\t\tlet c = this.getSwatch(this.props.property, true);\n\t\treturn c;\n\t}\n\tgetSwatch(colorCode, disableHighlight) {\n\t\t//get the number of classes the user currently has selected\n\t\tlet numClasses = this.props.brew.getNumClasses();\n\t\t//get the maximum number of colors in this scheme\n\t\tlet colorSchemeLength = getMaxNumberOfClasses(this.props.brew, colorCode);\n\t\t//get the color scheme\n\t\tlet colorScheme = this.props.brew.colorSchemes[colorCode];\n\t\t//get the number of colors to show as an array\n\t\tlet numClassesArray = (numClasses <= colorSchemeLength) ? Array.apply(null, { length: numClasses }).map(Number.call, Number) : Array.apply(null, { length: colorSchemeLength }).map(Number.call, Number);\n\t\tlet classesToShow = numClassesArray.length;\n\t\tlet divWidth = 112 / classesToShow;\n\t\tlet colorDivs = numClassesArray.map((item) => {\n\t\t\treturn <div key={item} style={{backgroundColor: colorScheme[classesToShow][item], width: divWidth, height:'16px', display: 'inline-block'}}/>;\n\t\t});\n\t\tlet borderColor = ((colorCode === this.props.property) && !disableHighlight) ? 'rgb(255, 64, 129)' : 'lightgray';\n\t\tcolorDivs = <div style={{display:'inline-flex', marginTop:'12px', border:'1px solid ' + borderColor}}>{colorDivs}</div>;\n\t\treturn colorDivs;\n\t}\n\trender() {\n\t\tlet primaryText;\n\t\tlet c = this.props.values.map(function(colorCode) {\n\t\t\t(colorCode !== 'opacity') ? primaryText = '': primaryText = \"Opacity\";\n\t\t\tlet _c = (colorCode !== 'opacity') ? this.getSwatch(colorCode, false) : null;\n\t\t\treturn <MenuItem value={colorCode} primaryText={primaryText} key={colorCode} children={_c} title={colorCode}/>;\n\t\t}, this);\n\t\treturn (\n\t\t\t<SelectField selectionRenderer={this.selectionRenderer.bind(this)} menuItemStyle={{fontSize:'12px'}} labelStyle={{fontSize:'12px'}} listStyle={{fontSize:'12px'}} style={{width:'150px', margin: '0px 10px'}} autoWidth={true} floatingLabelText={this.props.floatingLabelText} floatingLabelFixed={true} children={c} onChange={this.handleChange.bind(this)} value={this.props.property}/>\n\t\t);\n\t}\n}\n\nexport default ColorSelector;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from 'react';\nimport 'react-table/react-table.css';\nimport MarxanDialog from './MarxanDialog';\nimport RendererSelector from './RendererSelector.js'; \nimport ColorSelector from './ColorSelector.js';\nimport { BarChart, ReferenceLine, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Label } from 'recharts';\n\nlet RENDERERS = [\"equal_interval\", \"jenks\", \"std_deviation\", \"quantile\"];\nlet COLORCODES = [\"opacity\", \"OrRd\", \"PuBu\", \"BuPu\", \"Oranges\", \"BuGn\", \"YlOrBr\", \"YlGn\", \"Reds\", \"RdPu\", \"Greens\", \"YlGnBu\", \"Purples\", \"GnBu\", \"Greys\", \"YlOrRd\", \"PuRd\", \"Blues\", \"PuBuGn\", \"Spectral\", \"RdYlGn\", \"RdBu\", \"PiYG\", \"PRGn\", \"RdYlBu\", \"BrBG\", \"RdGy\", \"PuOr\", \"Set2\", \"Accent\", \"Set1\", \"Set3\", \"Dark2\", \"Paired\", \"Pastel2\", \"Pastel1\"];\nlet NUMCLASSES = [\"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\"];\nlet TOPCLASSES = [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\"];\n\nclass ClassificationDialog extends React.Component {\n\n\trender() { \n\t\tlet breaks = this.props.dataBreaks.map((item, index) => {\n\t\t\t//dont include the bottom line as we will use the y axis\n\t\t\treturn <ReferenceLine x={item} key={index} stroke=\"#00BCD4\" />;\n\t\t});\n\t\treturn (\n\t\t\t<MarxanDialog \n\t\t\t\t{...this.props} \n\t\t\t\tcontentWidth={390}\n\t\t\t\trightX={0}\n\t\t\t\toffsetY={80}\n\t\t\t\tshowCancelButton={false}\n\t\t\t\thelpLink={\"user.html#changing-how-the-results-are-displayed\"}\n\t\t\t\ttitle=\"Classification\" \n\t\t\t\tchildren={\n\t\t\t\t\t<div style={{height:'275px'}} key=\"k6\">\n\t\t\t\t\t\t<BarChart width={250} height={150} data={this.props.summaryStats}>\n\t\t\t\t\t\t\t<CartesianGrid strokeDasharray=\"1\" stroke=\"#f4f4f4\"/>\n\t\t\t\t\t\t\t<XAxis dataKey=\"number\" tick={{fontSize:11}} type={'number'}>\n\t\t\t\t\t\t\t\t<Label value=\"Sum solutions\" offset={0} position=\"insideBottom\" style={{fontSize:'11px',color:'#222222'}} />\n\t\t\t\t\t\t\t</XAxis> \n\t\t\t\t\t\t\t<YAxis tick={{fontSize:11}}>\n\t\t\t\t\t\t\t\t<Label value='Count' angle={-90} position='insideLeft' style={{fontSize:'11px',color:'#222222'}}/>\n\t\t\t\t\t\t\t</YAxis>\n\t\t\t\t\t\t\t<Tooltip />\n\t\t\t\t\t\t\t<Bar dataKey=\"count\" fill=\"#E14081\" />\n\t\t\t\t\t\t\t{breaks}\n\t\t\t\t\t\t</BarChart>\n\t\t\t\t\t\t<div className={'renderers'}>\n\t\t\t\t\t\t\t<ColorSelector values={COLORCODES} changeValue={this.props.changeColorCode} property={this.props.renderer.COLORCODE} floatingLabelText={\"Colour scheme\"} brew={this.props.brew} />\n\t\t\t\t\t\t\t<RendererSelector values={RENDERERS} changeValue={this.props.changeRenderer} property={this.props.renderer.CLASSIFICATION} floatingLabelText={\"Classification\"}/>\n\t\t\t\t\t\t\t<RendererSelector values={NUMCLASSES} changeValue={this.props.changeNumClasses} property={this.props.renderer.NUMCLASSES} floatingLabelText={\"Number of classes\"} />\n\t\t\t\t\t\t\t<RendererSelector values={TOPCLASSES} changeValue={this.props.changeShowTopClasses} property={this.props.renderer.TOPCLASSES} floatingLabelText={\"Show top n classes\"}/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t} \n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default ClassificationDialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from 'react';\nimport mapboxgl from 'mapbox-gl';\n\nclass MapContainer extends React.Component {\n    constructor(props){\n        super(props);\n        this.resultsRendered = false;\n    }\n    componentDidMount() {\n        this.map = new mapboxgl.Map({\n            container: this.mapContainer,\n            style: 'mapbox://styles/mapbox/light-v9',\n            center: this.props.mapCentre,\n            zoom: this.props.mapZoom,\n            attributionControl: false,\n            interactive: false\n        });\n        this.map.on(\"load\", (evt) => {\n            evt.target.addLayer({\n                'id': this.props.RESULTS_LAYER_NAME,\n                'type': \"fill\",\n                'source': {\n                    'type': \"vector\",\n                    'url': \"mapbox://\" + this.props.tileset.id\n                },\n                'source-layer': this.props.tileset.name,\n                \"layout\": {\n                    \"visibility\": \"none\"\n                },\n            });\n            this.map.setCenter(this.props.mapCentre);\n            this.setMapZoom();\n            if (!this.resultsRendered) this.renderResults();\n            // this.map.setCenter(this.props.tileset.center);\n        });\n    }\n\n    componentDidUpdate(prevProps, prevState) {\n        if (this.props.paintProperty !== prevProps.paintProperty) {\n            if (this.props.paintProperty.length === 0) {\n                //resetting the layout property\n                this.map.setLayoutProperty(this.props.RESULTS_LAYER_NAME, 'visibility', 'none');\n            }\n            else {\n                //the solution has been loaded and the paint properties have been calculated - if the results layer (i.e. the planning unit grid layer) is loaded then render the results\n                if (this.map.getLayer(this.props.RESULTS_LAYER_NAME)) {\n                    this.renderResults();\n                }\n                else {\n                    this.resultsRendered = false;\n                }\n            }\n        }\n        if (this.props.mapCentre !== prevProps.mapCentre) {\n            this.map.setCenter(this.props.mapCentre);\n        }\n        if (this.props.mapZoom !== prevProps.mapZoom) {\n            this.setMapZoom();\n        }\n    }\n\n    //the results layer has been loaded and so the results can be rendered\n    renderResults() {\n        if (this.props.paintProperty.length === 0) return;\n        this.map.setLayoutProperty(this.props.RESULTS_LAYER_NAME, 'visibility', 'visible');\n        this.map.setPaintProperty(this.props.RESULTS_LAYER_NAME, \"fill-color\", this.props.paintProperty.fillColor);\n        this.map.setPaintProperty(this.props.RESULTS_LAYER_NAME, \"fill-outline-color\", this.props.paintProperty.oulineColor);\n        this.map.setPaintProperty(this.props.RESULTS_LAYER_NAME, \"fill-opacity\", 0.5);\n        this.resultsRendered = true;\n    }\n    componentWillUnmount() {\n        //remove the map and free all resources\n        if (this.map) this.map.remove();\n    }\n\n    setMapZoom() {\n        // this.map.setZoom(this.props.mapZoom - 3);\n        this.map.setZoom(this.props.mapZoom);\n    }\n\n    render() {\n        return (\n            <div style={{display:'inline-block', margin:'5px'}} onClick={(this.props.disabled) ? null : this.props.selectBlm.bind(this, this.props.blmValue)}>\n                <div style={{'fontSize':'14px'}}>BLM: {this.props.blmValue}</div>\n                <div ref={el => this.mapContainer = el} style={{width:'200px',height:'200px', cursor: (this.props.disabled) ? 'default' : 'pointer'}} className={'hoverMapContainer'} title={(this.props.disabled) ? '': 'Click to select this BLM value'}/>\n            </div>\n        );\n    }\n}\n\nexport default MapContainer;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from 'react';\nimport CONSTANTS from './constants';\nimport MarxanDialog from './MarxanDialog';\nimport ToolbarButton from './ToolbarButton';\nimport MapContainer from './MapContainer.js';\nimport MarxanTextField from './MarxanTextField';\n\nlet CLUMP_COUNT = 5;\n\nclass ClumpingDialog extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = { blmValues: [0.001, 0.01, 0.1, 1, 10], blmMin: 0.001, blmMax: 10, blmChanged: false };\n\t}\n\n\t//when the dialog is shown, create the project group and run the projects with different blm values\n\tcomponentDidUpdate(prevProps, prevState){\n\t\tif ((this.props.open !== prevProps.open)&&(this.props.open)) {\n\t\t\t//create the project group and run\n\t\t\tthis.props.createProjectGroupAndRun(this.state.blmValues);\n\t\t}\n\t}\n\tchangeBlmMin(event, newValue) {\n\t\t//get the new blmValues\n\t\tthis.getBlmValues(newValue, this.state.blmMax);\n\t\t//set the new blmMin\n\t\tthis.setState({ blmMin: newValue });\n\t}\n\n\tchangeBlmMax(event, newValue) {\n\t\t//get the new blmValues\n\t\tthis.getBlmValues(this.state.blmMin, newValue);\n\t\t//set the new blmMax\n\t\tthis.setState({ blmMax: newValue });\n\t}\n\n\t//calculates the 5 blm values based on the min and max\n\tgetBlmValues(min, max) {\n\t\tvar blmValues = [];\n\t\t//get the increment\n\t\tvar increment = (max - min) / (CLUMP_COUNT - 1);\n\t\t//make the array of blmValues\n\t\tfor (var i = 0; i < CLUMP_COUNT; i++) {\n\t\t\tblmValues[i] = (i * increment) + Number(min);\n\t\t}\n\t\tthis.setState({ blmValues: blmValues });\n\t\t//flag that the blmValues have changed\n\t\tthis.setState({blmChanged: true});\n\t}\n\n\tparseBlmValue(value) {\n\t\tif (!isNaN(parseFloat(value)) && isFinite(value)) {\n\t\t\treturn value;\n\t\t}\n\t\telse {\n\t\t\treturn \"\";\n\t\t}\n\t}\n\n\tselectBlm(blmValue) {\n\t\t//set the blmValue for the project\n\t\tthis.props.setBlmValue(blmValue);\n\t\t//close the dialog\n\t\tthis.props.onOk();\n\t}\n\n\trerunProjects(){\n\t\tthis.props.rerunProjects(this.state.blmChanged, this.state.blmValues);\n\t\tthis.setState({blmChanged: false});\n\t}\n\tonRequestClose() {\n\t\tif (!this.props.clumpingRunning) this.props.onOk();\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<MarxanDialog \n\t\t\t\t{...this.props} \n\t\t\t\tshowSpinner={this.props.clumpingRunning}\n\t\t\t\tcontentWidth={680}\n\t\t\t\toffsetX={80}\n\t\t\t\toffsetY={80}\n\t\t\t\tonOk={this.onRequestClose.bind(this)}\n\t\t\t\tokDisabled={this.props.clumpingRunning}\n\t\t\t\tshowCancelButton={true}\n\t\t\t\thelpLink={\"user.html#clumping-window\"}\n\t\t\t\tactions={[\n\t\t\t\t\t<ToolbarButton \n\t\t\t\t\t\tlabel=\"Refresh\" \n\t\t\t\t\t\tprimary={true} \n\t\t\t\t\t\tonClick={this.rerunProjects.bind(this)} \n\t\t\t\t\t\tdisabled={this.props.clumpingRunning || (!this.state.blmChanged)}\n\t\t\t\t\t/>]\n\t\t\t\t}\n\t\t\t\ttitle = \"Clumping\"\n\t\t\t\tchildren = {\n\t\t\t\t\t<div key=\"k7\">\n\t\t\t\t\t\t<MapContainer key={0} disabled={this.props.clumpingRunning} selectBlm={this.selectBlm.bind(this)} tileset={this.props.tileset} RESULTS_LAYER_NAME={CONSTANTS.RESULTS_LAYER_NAME} paintProperty={this.props.map0_paintProperty} blmValue={this.parseBlmValue(this.state.blmValues[0])} mapCentre={this.props.mapCentre} mapZoom={this.props.mapZoom}/>\n\t\t\t\t\t\t<MapContainer key={1} disabled={this.props.clumpingRunning} selectBlm={this.selectBlm.bind(this)} tileset={this.props.tileset} RESULTS_LAYER_NAME={CONSTANTS.RESULTS_LAYER_NAME} paintProperty={this.props.map1_paintProperty} blmValue={this.parseBlmValue(this.state.blmValues[1])} mapCentre={this.props.mapCentre} mapZoom={this.props.mapZoom}/>\n\t\t\t\t\t\t<MapContainer key={2} disabled={this.props.clumpingRunning} selectBlm={this.selectBlm.bind(this)} tileset={this.props.tileset} RESULTS_LAYER_NAME={CONSTANTS.RESULTS_LAYER_NAME} paintProperty={this.props.map2_paintProperty} blmValue={this.parseBlmValue(this.state.blmValues[2])} mapCentre={this.props.mapCentre} mapZoom={this.props.mapZoom}/>\n\t\t\t\t\t\t<MapContainer key={3} disabled={this.props.clumpingRunning} selectBlm={this.selectBlm.bind(this)} tileset={this.props.tileset} RESULTS_LAYER_NAME={CONSTANTS.RESULTS_LAYER_NAME} paintProperty={this.props.map3_paintProperty} blmValue={this.parseBlmValue(this.state.blmValues[3])} mapCentre={this.props.mapCentre} mapZoom={this.props.mapZoom}/>\n\t\t\t\t\t\t<MapContainer key={4} disabled={this.props.clumpingRunning} selectBlm={this.selectBlm.bind(this)} tileset={this.props.tileset} RESULTS_LAYER_NAME={CONSTANTS.RESULTS_LAYER_NAME} paintProperty={this.props.map4_paintProperty} blmValue={this.parseBlmValue(this.state.blmValues[4])} mapCentre={this.props.mapCentre} mapZoom={this.props.mapZoom}/>\n\t\t\t\t\t\t<div style={{display:'inline-block', margin:'5px','verticalAlign':'top','paddingTop':'60px','textAlign':'center','fontSize':'14px',width:'200px', height:'224px'}}>\n\t\t\t\t\t\t\t\t<div>Move and zoom the main map to preview the clumping</div>\n\t\t\t\t\t\t\t\t<div style={{'paddingTop':'30px'}}>\n\t\t\t\t\t\t\t\t\t<span>BLM from </span>\n\t\t\t\t\t\t\t\t\t<MarxanTextField value={this.state.blmMin} onChange={this.changeBlmMin.bind(this)} style={{width:'36px'}} inputStyle={{'textAlign':'center', 'fontSize':'14px'}} id=\"blmmin\" disabled={this.props.clumpingRunning}/>\n\t\t\t\t\t\t\t\t\t<span> to </span>\n\t\t\t\t\t\t\t\t\t<MarxanTextField value={this.state.blmMax} onChange={this.changeBlmMax.bind(this)} style={{width:'36px'}} inputStyle={{'textAlign':'center', 'fontSize':'14px'}} id=\"blmmax\" disabled={this.props.clumpingRunning}/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t}\n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default ClumpingDialog;","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from 'react';\nimport FontAwesome from 'react-fontawesome';\n\nclass UploadFolder extends React.Component {\n\tconstructor(props){\n\t\tsuper(props);\n\t\tthis.state = {folderUploadText : '', active: false};\n\t}\n\tonClick(e){\n\t\tthis.setState({active: true});\n\t}\n\tonChange(e) {\n\t\t\n\t\tthis.props.filesListed(e.target.files); \n\t\tthis.setState({folderUploadText: e.target.files.length + \" files\"});\n\t\tthis.setState({active: false});\n\t}\n\t_addDirectory(node) {\n\t\tif (node) { \n\t\t\tnode.directory = true;\n\t\t\tnode.webkitdirectory = true;\n\t\t}\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<div className='uploadLabel' style={{color: (this.state.active) ? 'rgb(0, 188, 212)' : 'rgba(0, 0, 0, 0.3)'}}>{this.props.label}</div>\n\t\t\t\t<div className='uploadFileField'>\n\t\t\t\t\t<div className='uploadFileFieldIcon'>\n\t\t\t\t\t\t<div style={{display: 'inline-flex'}}>\n\t\t\t\t\t\t\t<label htmlFor={'folderSelector'}>\n\t\t\t\t\t\t\t\t<FontAwesome name='folder' title='Click to select a Marxan project folder' style={{'cursor':'pointer', display: 'inline-flex'}}/>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<input id='folderSelector' ref={node => this._addDirectory(node)} type='file' onChange={this.onChange.bind(this)} onClick={this.onClick.bind(this)} style={{'display':'none', 'width':'10px'}}/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className='uploadFileFieldLabel'>{this.state.folderUploadText}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default UploadFolder;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport * as React from 'react';\nimport UploadFolder from './UploadFolder';\nimport FileUpload from './FileUpload';\nimport MarxanTextField from './MarxanTextField';\n\nclass UploadMarxanFiles extends React.Component { \n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {planning_grid_name:'', zipFilename: ''}; \n\t}\n\tsetzipFilename(filename) { \n\t\tthis.setState({ zipFilename: filename });\n\t\tthis.props.setZipFilename(filename); \n\t} \n\trender() {\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<div>\n\t\t\t\t\t<UploadFolder label=\"Marxan project folder\" filesListed={this.props.filesListed}/> \n\t\t\t\t\t<FileUpload \n\t\t\t\t\t{...this.props} \n\t\t\t\t\tfileMatch={'.zip'}\n\t\t\t\t\tdestFolder='imports' \n\t\t\t\t\tmandatory={true} \n\t\t\t\t\tfilename={this.state.zipFilename} \n\t\t\t\t\tsetFilename={this.setzipFilename.bind(this)} \n\t\t\t\t\tlabel=\"Planning grid zipped shapefile\" \n\t\t\t\t\tstyle={{'paddingTop':'15px'}}/> \n\t\t\t\t\t<MarxanTextField style={{width:\"310px\"}} value={this.props.planning_grid_name} onChange={this.props.setPlanningGridName} floatingLabelText=\"Planning grid name\"/>\n\t\t\t\t</div>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nexport default UploadMarxanFiles;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from 'react';\nimport MarxanDialog from './MarxanDialog';\nimport ToolbarButton from './ToolbarButton';\nimport Metadata from './Metadata';\nimport UploadMarxanFiles from './UploadMarxanFiles'; \n\n//some of the code in this component should be moved up to app.js like the POSTs but I have limited time\n\nclass ImportProjectDialog extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = { steps: ['Files and planning grid','Info' ], loading: false, stepIndex: 0, name: '', description: '', zipFilename: '', files:[], planning_grid_name:'' };\n\t}\n\thandleNext = () => {\n\t\tconst { stepIndex } = this.state;\n\t\tif (stepIndex === 1) {\n\t\t\tthis.setState({loading: true});\n\t\t\t//create the new project \n\t\t\tthis.props.importProject(this.state.name, this.state.description, this.state.zipFilename, this.state.files, this.state.planning_grid_name).then((response) => {\n\t\t\t\t//close the import wizard\n\t\t\t\tthis.onOk();\n\t\t\t}).catch((error) => {\n\t\t\t\tthis.setState({loading: false});\n\t\t\t\tthis.props.log(error + \"Import stopped\");\n\t\t\t\tthis.props.setSnackBar(error);\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\tthis.setState({ stepIndex: stepIndex + 1 });\n\t};\n\thandlePrev = () => {\n\t\tconst { stepIndex } = this.state;\n\t\tif (stepIndex > 0) {\n\t\t\tthis.setState({ stepIndex: stepIndex - 1 });\n\t\t}\n\t};\n\tfilesListed(files){\n\t\t//TODO filter the files to exclude all of the output files - these are unnecessary and will be creating on the first run anyway\n\t\tthis.setState({files: files});\n\t}\n\tsetZipFilename(filename){\n\t\tthis.setState({zipFilename: filename});\n\t}\n\tsetPlanningGridName(event, planning_grid_name){\n\t\tthis.setState({planning_grid_name: planning_grid_name});\n\t}\n\tsetName(value) {\n\t\tthis.setState({ name: value });\n\t}\n\tsetDescription(value) {\n\t\tthis.setState({ description: value });\n\t}\n\tonOk(){\n\t\t//return the wizard back to zero\n\t\tthis.setState({loading: false, stepIndex: 0 });\n\t\tthis.props.onOk();\n\t}\n\trender() {\n\t\tconst { stepIndex } = this.state; \n\t\tconst contentStyle = { margin: '0 16px' };\n\t\tconst actions = [\n\t\t\t<div style={{width: '100%', maxWidth: 700, margin: 'auto',textAlign:'center'}}>\n\t\t\t\t<div style={contentStyle}>\n\t\t\t\t\t<div style={{marginTop: 12}}>\n\t\t\t\t\t\t<ToolbarButton label=\"Back\" disabled={stepIndex === 0} onClick={this.handlePrev} />\n\t\t\t\t\t\t<ToolbarButton label={stepIndex === (this.state.steps.length-1) ? 'Finish' : 'Next'} onClick={this.handleNext.bind(this)} primary={true} disabled={this.state.loading || (stepIndex === 0 && (this.state.files.length===0 || this.state.zipFilename==='' || this.state.planning_grid_name==='')) || (stepIndex===1 && (this.state.name==='' || this.state.description===''))} />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t];\n\t\tlet c = <React.Fragment key=\"k4\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{stepIndex === 0 ? <UploadMarxanFiles \n\t\t\t\t\t\t\t{...this.props}\n\t\t\t\t\t\t\tfilesListed={this.filesListed.bind(this)}\n\t\t\t\t\t\t\tsetZipFilename={this.setZipFilename.bind(this)}\n\t\t\t\t\t\t\tsetPlanningGridName={this.setPlanningGridName.bind(this)}\n\t\t\t\t\t\t\tplanning_grid_name={this.state.planning_grid_name}\n\t\t\t\t\t\t/> : null}\n\t\t\t\t\t\t{stepIndex === 1 ? <Metadata name={this.state.name} description={this.state.description} setName={this.setName.bind(this)} setDescription={this.setDescription.bind(this)}/> : null}\n\t\t\t\t\t</div>\n\t\t\t\t</React.Fragment>;\n\t\treturn (\n\t\t\t<MarxanDialog \n\t\t\t\t{...this.props} \n\t\t\t\ttitle={'Import Marxan DOS project'}\n\t\t\t\tcontentWidth={390}\n\t\t\t\tchildren={c} \n\t\t\t\tokLabel={\"Cancel\"}\n\t\t\t\tactions={actions} \n\t\t\t\tonOk={this.onOk.bind(this)}\n\t\t\t\tonRequestClose={this.onOk.bind(this)} \n\t\t\t\thelpLink={\"user.html#importing-marxan-dos-projects\"}\n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default ImportProjectDialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from 'react';\nimport MarxanDialog from './MarxanDialog';\nimport ToolbarButton from './ToolbarButton';\nimport Metadata from './Metadata';\nimport FileUpload from './FileUpload';\n\n//some of the code in this component should be moved up to app.js like the POSTs but I have limited time\n\nclass ImportMXWDialog extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = { steps: ['mxw file','Info' ], loading: false, stepIndex: 0, name: '', description: '', zipFilename: ''};\n\t}\n\thandleNext = () => {\n\t\tconst { stepIndex } = this.state;\n\t\tif (stepIndex === 1) {\n\t\t\tthis.setState({loading: true});\n\t\t\t//create the new project \n\t\t\tthis.props.importMXWProject(this.state.name, this.state.description, this.state.zipFilename).then((response) => {\n\t\t\t\tthis.onOk();\n\t\t\t}).catch((error) => {\n\t\t\t\tthis.setState({loading: false});\n\t\t\t\tthis.props.log(error + \"Import stopped\");\n\t\t\t\tthis.props.setSnackBar(error);\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\tthis.setState({ stepIndex: stepIndex + 1 });\n\t};\n\thandlePrev = () => {\n\t\tconst { stepIndex } = this.state;\n\t\tif (stepIndex > 0) {\n\t\t\tthis.setState({ stepIndex: stepIndex - 1 });\n\t\t}\n\t};\n\tsetZipFilename(filename){\n\t\tthis.setState({zipFilename: filename});\n\t}\n\tsetName(value) {\n\t\tthis.setState({ name: value });\n\t}\n\tsetDescription(value) {\n\t\tthis.setState({ description: value });\n\t}\n\tonOk(){\n\t\t//return the wizard back to zero\n\t\tthis.setState({loading: false, stepIndex: 0, zipFilename:'' });\n\t\tthis.props.onOk();\n\t}\n\trender() {\n\t\tconst { stepIndex } = this.state; \n\t\tconst contentStyle = { margin: '0 16px' };\n\t\tconst actions = [\n\t\t\t<div style={{width: '100%', maxWidth: 700, margin: 'auto',textAlign:'center'}}>\n\t\t\t\t<div style={contentStyle}>\n\t\t\t\t\t<div style={{marginTop: 12}}>\n\t\t\t\t\t\t<ToolbarButton label=\"Back\" disabled={stepIndex === 0} onClick={this.handlePrev} />\n\t\t\t\t\t\t<ToolbarButton label={stepIndex === (this.state.steps.length-1) ? 'Finish' : 'Next'} onClick={this.handleNext.bind(this)} primary={true} disabled={this.state.loading || this.state.zipFilename==='' || (stepIndex===1 && (this.state.name==='' || this.state.description===''))} />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t];\n\t\tlet c = <React.Fragment key=\"k4\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{stepIndex === 0 ? \n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t    <FileUpload \n\t\t\t\t\t\t    {...this.props} \n\t\t\t\t\t\t    fileMatch={'.mxw'}\n\t\t\t\t\t\t    destFolder='imports' \n\t\t\t\t\t\t    mandatory={true} \n\t\t\t\t\t\t    filename={this.state.zipFilename} \n\t\t\t\t\t\t    setFilename={this.setZipFilename.bind(this)} \n\t\t\t\t\t\t    label=\"Select *.mxw file\" \n\t\t\t\t\t\t    style={{'paddingTop':'20px'}}/> \n\t\t\t\t\t\t</div> : null}\n\t\t\t\t\t\t{stepIndex === 1 ? <Metadata name={this.state.name} description={this.state.description} setName={this.setName.bind(this)} setDescription={this.setDescription.bind(this)}/> : null}\n\t\t\t\t\t</div>\n\t\t\t\t</React.Fragment>;\n\t\treturn (\n\t\t\t<MarxanDialog \n\t\t\t\t{...this.props} \n\t\t\t\ttitle={'Import Marxan Web project'}\n\t\t\t\tcontentWidth={390}\n\t\t\t\tchildren={c} \n\t\t\t\tokLabel={\"Cancel\"}\n\t\t\t\tactions={actions} \n\t\t\t\tonOk={this.onOk.bind(this)}\n\t\t\t\tonRequestClose={this.onOk.bind(this)} \n\t\t\t\thelpLink={\"user.html#importing-marxan-web-projects\"}\n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default ImportMXWDialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from 'react';\nimport ToolbarButton from './ToolbarButton';\nimport MarxanDialog from './MarxanDialog';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faCheckCircle } from '@fortawesome/free-solid-svg-icons';\nimport { faExclamationTriangle } from '@fortawesome/free-solid-svg-icons';\nimport { faTimesCircle } from '@fortawesome/free-solid-svg-icons';\nimport { faRedoAlt } from '@fortawesome/free-solid-svg-icons';\nimport { faEraser } from '@fortawesome/free-solid-svg-icons';\nimport Sync from 'material-ui/svg-icons/notification/sync';\nimport MarxanTable from \"./MarxanTable\";\n\nclass RunLogDialog extends React.Component { \n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {searchText: \"\",selectedRun: undefined, runningJobs: false};\n\t}\n\tcomponentDidUpdate(prevProps, prevState) {\n\t\t//if this browser isnt running a marxan job (i.e. this.props.preprocessing === false) but there are jobs which are running then we still want to be able to stop those jobs - here we set a flag to allow the STOP button to be enabled even if this.props.preprocessing === false\n\t\tif (this.props.runLogs !== prevProps.runLogs){\n\t\t\t//see of any of the run logs are running\n\t\t\tlet runningLogs = this.props.runLogs.filter((item) => {return item.status === 'Running'});\n\t\t\tthis.setState({runningJobs: (runningLogs.length > 0)});\n\t\t}\n\t}\n\tcloseDialog() {\n\t\tthis.setState({ selectedRun: undefined });\n\t\tthis.props.onOk(); \n\t}\n\tstopRun(evt){\n\t\t//stop the run\n\t\tthis.props.stopMarxan(\"m\" + this.state.selectedRun.pid);\n\t\t//refresh the run log - this may be done when the process stops on the server and it sends the results back in the websocket - but in case the client is not connected to the server explicitly request it\n\t\tthis.refreshRunLogs();\n\t}\n\tclearRunLogs(evt){\n\t\tthis.props.clearRunLogs();\n\t}\n\trefreshRunLogs(evt){\n\t\tthis.props.getRunLogs();\n\t\t//unselect the selected run\n\t\tthis.setState({ selectedRun: undefined });\n\t}\n\tchangeSelectedRun(event, run) {\n\t\tthis.setState({ selectedRun: run });\n\t}\n\trenderUser(row){\n\t\treturn <div style={{width: '100%',height: '100%',backgroundColor: '#dadada',borderRadius: '2px'}} title={row.original.user}>{row.original.user}</div>;        \n\t}\n\trenderProject(row){\n\t\treturn <div style={{width: '100%',height: '100%',backgroundColor: '#dadada',borderRadius: '2px'}} title={row.original.project}>{row.original.project}</div>;        \n\t}\n\trenderStatus(row){\n\t\tvar icon;\n    switch (row.original.status) {\n      case 'Completed': \n      \ticon = <FontAwesomeIcon icon={faCheckCircle} style={{color:'green'}} title={'Run completed'}/>;\n        break;\n      case 'Stopped': \n      \ticon = <FontAwesomeIcon icon={faTimesCircle} style={{color:'darkgray'}} title={'Run stopped by the user'}/>;\n        break;\n      case 'Killed': \n      \ticon = <FontAwesomeIcon icon={faExclamationTriangle} style={{color:'red'}} title={'Run stopped by the operating system'}/>;\n        break;\n      case 'Running': \n      \ticon = <Sync className='spin' style={{height: '16px', width: '16px', verticalAlign: 'sub', color: 'rgb(255, 64, 129)'}}/>;\n        break;\n      default:\n        break;\n    }\n\t\treturn <div style={{width: '100%',height: '100%',backgroundColor: '#dadada',borderRadius: '2px'}} title={row.original.status}>{icon}{\"  \" + row.original.status}</div>;        \n\t}\n\trenderEnded(row){\n\t\treturn <div style={{width: '100%',height: '100%',backgroundColor: '#dadada',borderRadius: '2px'}}>{(row.original.endtime) ? row.original.endtime : ''}</div>;        \n\t}\n\trenderRuntime(row){\n\t\tif ((row.original.runtime)){\n\t\t\tlet s = Number(row.original.runtime.substr(0,row.original.runtime.length-1));\n\t\t\tlet mins = Math.floor(s/60);\n\t\t\tlet secs = (s%60) + \"s\";\n\t\t\tlet runTimeFormatted = (mins !== 0) ? mins + \"m \" + secs : secs;\n\t\t\treturn <div style={{width: '100%',height: '100%',backgroundColor: '#dadada',borderRadius: '2px'}}>{runTimeFormatted}</div>;        \n\t\t}else{\n\t\t\treturn '';\n\t\t}\n\t}\n    searchTextChanged(value){\n      this.setState({searchText: value});\n    }\n\trender() {\n\t\tlet tableColumns = [];\n\t\ttableColumns = [\n\t\t\t{ Header: 'pid', accessor: 'pid', width: 60, headerStyle: { 'textAlign': 'left' }}, \n\t\t\t{ Header: 'User', accessor: 'user', width: 60, headerStyle: { 'textAlign': 'left' }, Cell: this.renderUser.bind(this)}, \n\t\t\t{ Header: 'Project', accessor: 'project', width: 150, headerStyle: { 'textAlign': 'left' }, Cell: this.renderProject.bind(this)}, \n\t\t\t{ Header: 'Started', accessor: 'starttime', width: 112, headerStyle: { 'textAlign': 'left' }}, \n\t\t\t{ Header: 'Ended', accessor: 'endtime', width: 112, headerStyle: { 'textAlign': 'left' }, Cell: this.renderEnded.bind(this)}, \n\t\t\t{ Header: 'Runtime', accessor: 'runtime', width: 60, headerStyle: { 'textAlign': 'right' }, className: 'table_column_right_align', Cell: this.renderRuntime.bind(this)}, \n\t\t\t{ Header: 'Runs', accessor: 'runs', width: 60, headerStyle: { 'textAlign': 'right' }, className: 'table_column_right_align'}, \n\t\t\t{ Header: 'Status', accessor: 'status', width: 80, headerStyle: { 'textAlign': 'left' }, Cell: this.renderStatus.bind(this) }\n\t\t];\n\t\treturn (\n\t\t\t<MarxanDialog \n\t\t\t\t{...this.props} \n\t\t\t\t// titleBarIcon={faBookOpen}\n\t\t\t\tonOk={this.closeDialog.bind(this)}\n\t\t\t\tonCancel={this.closeDialog.bind(this)}\n\t\t\t\tshowCancelButton={false}\n\t\t\t\thelpLink={\"user.html#the-run-log\"}\n\t\t\t\tautoDetectWindowHeight={false}\n\t\t\t\tbodyStyle={{ padding:'0px 24px 0px 24px'}}\n\t\t\t\ttitle=\"Runs\"  \n\t\t\t\tshowSearchBox={true} \n\t\t\t\tsearchTextChanged={this.searchTextChanged.bind(this)}\n\t\t\t\tchildren={\n\t\t\t\t\t<React.Fragment key=\"k2\">\n\t\t\t\t\t\t\t<div id=\"projectsTable\">\n\t\t\t\t\t\t\t\t<MarxanTable \n\t\t\t\t\t\t\t\t\tdata={this.props.runLogs}\n\t\t\t\t\t\t\t\t\tcolumns={tableColumns}\n\t\t                            searchColumns={['user','project','status','runs','runtime']}\n\t\t                            searchText={this.state.searchText}\n\t\t                            selectedRun={this.state.selectedRun}\n\t\t                            changeSelectedRun={this.changeSelectedRun.bind(this)}\n\t\t\t\t\t\t\t\t\tgetTrProps={(state, rowInfo, column) => {\n\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t\t\t\t\t\tbackground: (rowInfo.original.pid === (state.selectedRun && state.selectedRun.pid)) ? \"aliceblue\" : \"\"\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\tonClick: (e) => {\n\t\t\t\t\t\t\t\t\t\t\t\tstate.changeSelectedRun(e, rowInfo.original);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div id=\"projectsToolbar\" style={{display: (this.props.userRole !== \"Admin\") ? 'none' : 'block'}}>\n\t\t\t\t\t\t\t<ToolbarButton  \n\t\t\t\t\t\t\t\tshow={!this.props.unauthorisedMethods.includes(\"stopMarxan\")}\n\t\t\t\t\t\t\t\ttitle=\"Stop run\" \n\t\t\t\t\t\t\t\tdisabled={(this.state.selectedRun === undefined) ? true : (!this.props.preprocessing && !this.state.runningJobs) ? true : (this.state.selectedRun.status !== 'Running')}\n\t\t\t\t\t\t\t\tonClick={this.stopRun.bind(this)} \n\t\t\t\t\t\t\t\tlabel={\"Stop\"}\n\t\t\t\t\t\t\t\tsecondary={true} \n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<ToolbarButton  \n\t\t\t\t\t\t\t\tshow={!this.props.unauthorisedMethods.includes(\"getRunLogs\")}\n\t\t\t\t\t\t\t\ttitle=\"Refresh run logs\" \n\t\t\t\t\t\t\t\ticon={<FontAwesomeIcon icon={faRedoAlt}/>} \n\t\t\t\t\t\t\t\tonClick={this.refreshRunLogs.bind(this)} \n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<ToolbarButton  \n\t\t\t\t\t\t\t\tshow={!this.props.unauthorisedMethods.includes(\"clearRunLogs\")}\n\t\t\t\t\t\t\t\ttitle=\"Clear run logs\" \n\t\t\t\t\t\t\t\ticon={<FontAwesomeIcon icon={faEraser} />} \n\t\t\t\t\t\t\t\tonClick={this.clearRunLogs.bind(this)} \n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</React.Fragment>\n\t\t\t\t} \n\t\t\t/>\n\t\t); //return\n\t}\n}\n\nexport default RunLogDialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from \"react\";\nimport MarxanDialog from \"./MarxanDialog\";\nimport ReactTable from \"react-table\";\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faExclamationTriangle } from '@fortawesome/free-solid-svg-icons';\n\nclass ServerDetailsDialog extends React.Component {\n\trenderWithIcon(cellInfo) {\n\t  let newServerSoftware = ((cellInfo.row.key === 'Marxan Server version')&&(this.props.marxanServer.server_version !== this.props.registry.SERVER_VERSION));\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<div style={{ float: 'left' }}>{cellInfo.row.value}</div>\n\t\t\t\t<FontAwesomeIcon icon={faExclamationTriangle} style={{color:'red', display: ((cellInfo.row.key === 'Disk space')&&(cellInfo.row.value.substr(0,1) === '0')) ? 'inline' : 'none', right: '5px', position: 'absolute', marginTop: '5px'}} title={'Disk space running low'}/>\n\t\t\t\t<FontAwesomeIcon icon={faExclamationTriangle} style={{color:'red', display: (newServerSoftware) ? 'inline' : 'none', right: '5px', position: 'absolute', marginTop: '5px'}} title={'A new version of Marxan Server is available (' + this.props.registry.SERVER_VERSION + ')'}/>\n\t\t\t  <FontAwesomeIcon icon={faExclamationTriangle} style={{color:'red',display: ((cellInfo.row.key === 'WDPA version')&&(this.props.newWDPAVersion)) ? 'inline' : 'none', position: 'absolute', right:'5px', marginTop: '5px'}} title={'A new version of the WDPA is available - click for details'} onClick={this.props.showUpdateWDPADialog}/>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n  render() {\n    let data = this.props.marxanServer ? \n    [\n      {key:'Name',value:this.props.marxanServer.name},\n      {key:'Description',value:this.props.marxanServer.description},\n      {key:'Host',value:this.props.marxanServer.host},\n    //   {key:'Port',value:this.props.marxanServer.port},\n      {key:'System',value:this.props.marxanServer.system},\n      {key:'Processors',value:this.props.marxanServer.processor_count},\n      {key:'Disk space',value:this.props.marxanServer.disk_space},\n      {key:'RAM',value:this.props.marxanServer.ram},\n      {key:'Marxan Server version',value:this.props.marxanServer.server_version},\n      {key:'WDPA version',value:this.props.marxanServer.wdpa_version},\n      {key:'Planning grid units limit',value:this.props.marxanServer.planning_grid_units_limit},\n      {key:'Shutdown',value: (this.props.marxanServer.shutdowntime) ? new Date(this.props.marxanServer.shutdowntime).toLocaleString() : \"Never\"},\n    ] \n    : [];\n    // add the following if necessary\n    // <div className=\"tabTitle\">Release: {this.props.marxanServer&&this.props.marxanServer.release}</div>\n    // <div className=\"tabTitle\">Version: {this.props.marxanServer&&this.props.marxanServer.version}</div>\n    // <div className=\"tabTitle\">Processor: {this.props.marxanServer&&this.props.marxanServer.processor}</div>\n    return (\n      <MarxanDialog\n        {...this.props}\n        contentWidth={445}\n        offsetY={80}\n        title=\"Server Details\"\n        helpLink={\"user.html#server-details\"}\n        children={[\n\t\t\t\t\t\t<ReactTable \n\t\t\t\t\t\t\tshowPagination={false} \n\t\t\t\t\t\t\tclassName={'server_details_infoTable'}\n\t\t\t\t\t\t\tminRows={0}\n\t\t\t\t\t\t\tpageSize={data.length}\n\t\t\t\t\t\t\tdata={data}\n\t\t\t\t\t\t\tnoDataText=''\n\t\t\t\t\t\t\tkey='k27'\n\t\t\t\t\t\t\tcolumns={[{\n\t\t\t\t\t\t\t   Header: 'Parameter', \n\t\t\t\t\t\t\t   accessor: 'key',\n\t\t\t\t\t\t\t   width:144,\n\t\t\t\t\t\t\t   headerStyle:{'textAlign':'left'},\n\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t   Header: 'Value',\n\t\t\t\t\t\t\t   accessor: 'value',\n\t\t\t\t\t\t\t   width:252,\n\t\t\t\t\t\t\t   headerStyle:{'textAlign':'left'},\n\t\t\t\t\t\t\t   Cell: this.renderWithIcon.bind(this)\n\t\t\t\t\t\t\t}]}\n\t\t\t\t\t  />\n        ]}\n      />\n    );\n  }\n}\n\nexport default ServerDetailsDialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\n//a dialog box that is shown when the user first logs in to alert them to anything, e.g. A new version of the WDPA is available for admin users\nimport React from \"react\";\nimport MarxanDialog from \"./MarxanDialog\";\n\nclass AlertDialog extends React.Component {\n  render() {\n    return (\n      <MarxanDialog\n        {...this.props}\n        contentWidth={500}\n        offsetY={80}\n        title=\"Alert\"\n        children={\n          <div key=\"k23\">\n              <div className={'description'}>A new version of the WDPA is available. <br/>Click on Help | Server Details for more information.</div>\n          </div>\n        }\n      />\n    );\n  }\n}\n\nexport default AlertDialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from \"react\";\nimport MarxanDialog from \"./MarxanDialog\";\nimport MarxanTextField from './MarxanTextField';\n\nclass ChangePasswordDialog extends React.Component {\n  constructor(props){\n    super(props);\n    this.state = {currentPassword: '', newPassword1: '', newPassword2: '', };\n  }\n  setCurrentPassword(event, newValue){\n    this.setState({currentPassword: newValue});\n  }\n  setNewPassword1(event, newValue){\n    this.setState({newPassword1: newValue});\n  }\n  setNewPassword2(event, newValue){\n    this.setState({newPassword2: newValue});\n  }\n  onOk(evt){\n    if (this.state.newPassword2 !== this.state.newPassword1) {\n      this.passwordsDontMatch();\n      return;\n    }\n    this.props.checkPassword(this.props.user, this.state.currentPassword).then((response) => {\n      this.props.updateUser({PASSWORD: this.state.newPassword1}).then((response) => {\n        this.props.setSnackBar(\"Password updated\");\n        this.props.onOk();\n      }).catch((error) =>{\n        this.props.setSnackBar(\"Password not updated\");\n      });\n    }).catch((response) => {\n      this.props.setSnackBar(\"Invalid password\");\n    });\n  }\n  passwordsDontMatch(){\n    this.props.setSnackBar(\"Passwords don't match\");\n  }\n  render() {\n    return (\n      <MarxanDialog\n        {...this.props}\n        onOk={this.onOk.bind(this)}\n        showCancelButton={true}\n        onCancel={this.props.onOk}\n        helpLink={\"user.html#change-password\"}\n        contentWidth={358}\n        offsetY={80}\n        title=\"Change Password\"\n        children={\n          <div key=\"k5\">\n\t\t\t\t\t\t<MarxanTextField floatingLabelText=\"Current password\" onChange = {this.setCurrentPassword.bind(this)} floatingLabelShrinkStyle={{fontSize:'16px'}} floatingLabelFocusStyle={{fontSize:'16px'}} type=\"password\"/>\n\t\t\t\t\t\t<MarxanTextField floatingLabelText=\"New password\" onChange = {this.setNewPassword1.bind(this)} floatingLabelShrinkStyle={{fontSize:'16px'}} floatingLabelFocusStyle={{fontSize:'16px'}} type=\"password\"/>\n\t\t\t\t\t\t<MarxanTextField floatingLabelText=\"Repeat password\" onChange = {this.setNewPassword2.bind(this)} floatingLabelShrinkStyle={{fontSize:'16px'}} floatingLabelFocusStyle={{fontSize:'16px'}} type=\"password\"/>\n          </div>\n        }\n      />\n    );\n  }\n}\n\nexport default ChangePasswordDialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from 'react';\nimport CONSTANTS from './constants';\nimport ReactTable from \"react-table\";\nimport Sync from 'material-ui/svg-icons/notification/sync';\nimport Swatch from './Swatch';\nimport { Tabs, Tab } from 'material-ui/Tabs';\nimport { getArea } from './Helpers.js';\n\nconst TITLE_LINK = \"Click to open in the Protected Planet website\";\nconst URL_PP = \"https://www.protectedplanet.net/\";\nconst TAB_STYLE = {fontWeight:'normal', textTransform:'none', height:'34px', fontSize:'15px'};\n\nclass IdentifyPopup extends React.Component {\n\tconstructor(props){\n\t\tsuper(props);\n\t\tthis.state = {selectedValue: \"pu\"};\n\t}\n\tcomponentDidUpdate(prevProps, prevState) {\n\t\t//if the popup is shown, start the timer\n\t\tif (this.props.visible && !prevProps.visible) this.startTimer();\n\t\t//if the mouse has been clicked somewhere else while the popup is already open\n\t\tif ((this.props.xy.x !== prevProps.xy.x)) this.restartTimer();\n\t}\n\trenderAmount(row) {\n\t\treturn <div title={row.original.amount}>{getArea(row.original.amount, this.props.reportUnits, true)}</div>;\n\t}\n\trenderName(row) {\n\t\treturn <div title={row.original.alias}>{row.original.alias}</div>;\n\t}\n\trenderFeatureName(row) {\n\t\treturn <div title={row.original.alias}>{row.original.alias}</div>;\n\t}\n\trenderFeatureDescription(row) {\n\t\treturn <div title={row.original.description}>{row.original.description}</div>;\n\t}\n\trenderPAName(row) {\n\t\treturn <div title={row.original.properties.name}>{row.original.properties.name}</div>;\n\t}\n\trenderPADesignation(row) {\n\t\treturn <div title={row.original.properties.desig}>{row.original.properties.desig}</div>;\n\t}\n\trenderPAIUCNCategory(row) {\n\t\treturn <div title={row.original.properties.iucn_cat}>{row.original.properties.iucn_cat}</div>;\n\t}\n\trenderPALink(row) {\n\t\treturn <span className={\"ppLink underline\"}><a href={URL_PP + row.original.properties.wdpaid} target='_blank'  rel=\"noopener noreferrer\" title={TITLE_LINK}>{row.original.properties.wdpaid}</a></span>;\n\t}\n\tchangeTab(value){\n\t\tthis.setState({selectedValue: value});\n\t}\n\tmouseLeave(e) {\n\t\tthis.clearTimeout();\n\t\tthis.props.hideIdentifyPopup();\n\t\t//return to the default state\n\t\tthis.setState({selectedValue: \"pu\"});\n\t}\n\tmouseEnter(e) {\n\t\tthis.cancelTimer();\n\t}\n\tmouseLeavePopup(ms, e) {\n\t\tif (this.timer !== undefined) return;\n\t\tthis.timer = setTimeout(() => {\n\t\t\tif (!this.timerCancelled) {\n\t\t\t\tthis.mouseLeave();\n\t\t\t}\n\t\t}, ms);\n\t}\n\tclearTimeout() {\n\t\tclearTimeout(this.timer);\n\t\tthis.timer = undefined;\n\t}\n\tcancelTimer(e) {\n\t\tthis.timerCancelled = true;\n\t}\n\trestartTimer(e) {\n\t\tthis.clearTimeout();\n\t\tthis.startTimer();\n\t}\n\tstartTimer(e) {\n\t\tthis.timerCancelled = false;\n\t\tthis.mouseLeavePopup(4000);\n\t}\n\trender() {\n\t\tlet left = this.props.xy.x + 25 + 'px';\n\t\tlet top = this.props.xy.y - 25 + 'px';\n\t\tlet item = {};\n\t\t//get the status for the planning unit\n\t\tswitch (this.props.identifyPlanningUnits && this.props.identifyPlanningUnits.puData && this.props.identifyPlanningUnits.puData.status) {\n\t\t\tcase 0:\n\t\t\t\titem = CONSTANTS.PU_STATUS_DEFAULT;\n\t\t\t\tbreak;\n\t\t\tcase 1:\n\t\t\t\t//Included in the initial reserve system but may or may not be in the final solution\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\titem = CONSTANTS.PU_STATUS_LOCKED_IN;\n\t\t\t\tbreak;\n\t\t\tcase 3:\n\t\t\t\titem = CONSTANTS.PU_STATUS_LOCKED_OUT;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\t// code\n\t\t}\n\t\t//get the planning unit shape\n\t\tlet shape = (this.props.metadata && this.props.metadata.PLANNING_UNIT_NAME && this.props.metadata.PLANNING_UNIT_NAME.includes('hexagon')) ? 'hexagon' : 'square';\n\t\t//get the tabs which are needed\n\t\tlet puTab = (this.props.identifyPlanningUnits && this.props.identifyPlanningUnits.puData) ?\n\t\t\t<Tab label=\"Planning units\" value=\"pu\" key=\"pu\" buttonStyle={TAB_STYLE}>\n\t\t\t\t<Sync className='spin' style={{display: this.props.loading ? \"inline-block\" : \"none\", color: 'rgb(255, 64, 129)', position: 'absolute', top: '-49px', left: '-7px'}} key={\"spinner\"}/>\n\t\t\t\t<div className={'identifyPlanningUnitsHeader'}>\n\t\t\t\t\t<span><Swatch item={item} key={'key_' + item.label + '_identify'} shape={shape}/><span style={{paddingLeft:'5px'}}/>{item.label}</span>\n\t\t\t\t\t<span>Cost: {this.props.identifyPlanningUnits&&this.props.identifyPlanningUnits.puData&&this.props.identifyPlanningUnits.puData.cost}</span>\n\t\t\t\t\t<span>ID: {this.props.identifyPlanningUnits&&this.props.identifyPlanningUnits.puData&&this.props.identifyPlanningUnits.puData.id}</span>\n\t\t\t\t</div>\n\t\t\t\t<div style={{display: this.props.identifyPlanningUnits && this.props.identifyPlanningUnits.features && this.props.identifyPlanningUnits.features.length ? \"block\" : \"none\"}}>\n\t\t\t\t\t<div className={'featureList'}>{'Features in planning unit:'}</div>\n\t\t\t\t\t<ReactTable\n\t\t\t\t\t\tshowPagination={false}\n\t\t\t\t\t\tclassName={'identifyPUFeaturesInfoTable'}\n\t\t\t\t\t\tpageSize={(this.props.loading) ? 0 : this.props.identifyPlanningUnits && this.props.identifyPlanningUnits.features && this.props.identifyPlanningUnits.features.length}\n\t\t\t\t\t\tminRows={0}\n\t\t\t\t\t\tnoDataText=''\n\t\t\t\t\t\tdata={this.props.identifyPlanningUnits.features}\n\t\t\t\t\t\tcolumns={[{\n\t\t\t\t\t\t\t Header: 'Name',\n\t\t\t\t\t\t\t accessor: 'alias',\n\t\t\t\t\t\t\t width: 215,\n\t\t\t\t\t\t\t headerStyle:{'textAlign':'left'},\n\t\t\t\t\t\t\t Cell: this.renderName.bind(this)\n\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t Header: 'Amount',\n\t\t\t\t\t\t\t accessor: 'amount',\n\t\t\t\t\t\t\t width: 65,\n\t\t\t\t\t\t\t headerStyle:{'textAlign':'left'},\n\t\t\t\t\t\t\t Cell: this.renderAmount.bind(this)\n\t\t\t\t\t\t}]}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div style={{display: this.props.identifyPlanningUnits && this.props.identifyPlanningUnits.features && this.props.identifyPlanningUnits.features.length === 0 ? \"block\" : \"none\"}}>\n\t\t\t\t\t<div className={'featureList'}>No features occur in this planning unit</div>\n\t\t\t\t</div>\n\t\t\t</Tab> : null;\n\t\tlet featuresTab = (this.props.identifyFeatures && this.props.identifyFeatures.length) ?\n\t\t\t<Tab label=\"Features\" value=\"features\" key=\"features\" buttonStyle={TAB_STYLE}>\n\t\t\t\t<ReactTable\n\t\t\t\t\tshowPagination={false}\n\t\t\t\t\tclassName={'identifyFeaturesInfoTable'}\t\t\t\t\t\n\t\t\t\t\tpageSize={this.props.identifyFeatures && this.props.identifyFeatures.length}\n\t\t\t\t\tminRows={0}\n\t\t\t\t\tnoDataText=''\n\t\t\t\t\tdata={this.props.identifyFeatures}\n\t\t\t\t\tcolumns={[{\n\t\t\t\t\t\t Header: 'Name',\n\t\t\t\t\t\t accessor: 'alias',\n\t\t\t\t\t\t width: 140,\n\t\t\t\t\t\t headerStyle:{'textAlign':'left'},\n\t\t\t\t\t\t\t Cell: this.renderFeatureName.bind(this)\n\t\t\t\t\t},{\n\t\t\t\t\t\t Header: 'Description',\n\t\t\t\t\t\t accessor: 'description',\n\t\t\t\t\t\t width: 140,\n\t\t\t\t\t\t headerStyle:{'textAlign':'left'},\n\t\t\t\t\t\t\t Cell: this.renderFeatureDescription.bind(this)\n\t\t\t\t\t}]}\n\t\t\t\t/> \n\t\t\t</Tab> : null;\n\t\tlet protectedAreasTab = (this.props.identifyProtectedAreas && this.props.identifyProtectedAreas.length) ?\n\t\t\t<Tab label=\"Protected areas\" value=\"pas\" key=\"pas\" buttonStyle={TAB_STYLE}>\n\t\t\t\t<ReactTable\n\t\t\t\t\tshowPagination={false}\n\t\t\t\t\tclassName={'identifyProtectedAreasInfoTable'}\t\t\t\t\t\n\t\t\t\t\tpageSize={this.props.identifyProtectedAreas && this.props.identifyProtectedAreas.length}\n\t\t\t\t\tminRows={0}\n\t\t\t\t\tnoDataText=''\n\t\t\t\t\tdata={this.props.identifyProtectedAreas}\n\t\t\t\t\tcolumns={[{\n\t\t\t\t\t\t Header: 'Name',\n\t\t\t\t\t\t accessor: 'properties.name',\n\t\t\t\t\t\t width: 134,\n\t\t\t\t\t\t headerStyle:{'textAlign':'left'},\n\t\t\t\t\t\t\t Cell: this.renderPAName.bind(this)\n\t\t\t\t\t},{\n\t\t\t\t\t\t Header: 'Designation',\n\t\t\t\t\t\t accessor: 'properties.desig',\n\t\t\t\t\t\t width: 70,\n\t\t\t\t\t\t headerStyle:{'textAlign':'left'},\n\t\t\t\t\t\t\t Cell: this.renderPADesignation.bind(this)\n\t\t\t\t\t},{\n\t\t\t\t\t\t Header: 'IUCN Category',\n\t\t\t\t\t\t accessor: 'properties.iucn_cat',\n\t\t\t\t\t\t width: 33,\n\t\t\t\t\t\t headerStyle:{'textAlign':'left'},\n\t\t\t\t\t\t\t Cell: this.renderPAIUCNCategory.bind(this)\n\t\t\t\t\t},{\n\t\t\t\t\t\t Header: 'Link',\n\t\t\t\t\t\t width: 43,\n\t\t\t\t\t\t Cell: this.renderPALink.bind(this)\n\t\t\t\t\t}]}\n\t\t\t\t/>\n\t\t\t</Tab> : null;\n\t\tlet tabs = [puTab, featuresTab, protectedAreasTab];\n\t\tif (!puTab && !featuresTab && !protectedAreasTab) tabs = [];\n\t\t//if the user has clicked on a pa outside the planning grid then select the pas tab\n\t\tlet onlyPA = (!puTab && !featuresTab && protectedAreasTab);\n\t\treturn (\n\t\t\t<div style={{'display': this.props.visible && tabs.length ? 'block' : 'none','left': left,'top':top}} id=\"popup\" onMouseLeave={this.mouseLeave.bind(this)} onMouseEnter={this.mouseEnter.bind(this)}>\n\t\t\t\t<Tabs tabItemContainerStyle={{height:'34px'}} contentContainerStyle={{'margin':'20px'}} className={'identifyPopup'} value={(onlyPA) ? \"pas\" : this.state.selectedValue} onChange={this.changeTab.bind(this)}>\n\t\t\t\t\t{tabs}\n\t\t\t\t</Tabs>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default IdentifyPopup;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport * as React from 'react';\nimport MarxanDialog from './MarxanDialog';\nimport MarxanTextField from './MarxanTextField';\nimport { isValidTargetValue } from './Helpers.js';\n\nclass TargetDialog extends React.PureComponent {\n    constructor(props) {\n        super(props);\n        this.state = { target_value: 17, validTarget: true };\n    }\n\thandleKeyPress(e) {\n\t\tif (e.nativeEvent.key === \"Enter\") this.validateTarget(); \n\t} \n    validateTarget() {\n        let _validTarget = isValidTargetValue(this.state.target_value);\n        this.setState({ validTarget: _validTarget });\n        if (_validTarget) {\n            this.props.updateTargetValueForFeatures(this.state.target_value);\n            this.props.onOk();\n        }\n    }\n    onOk() {\n        this.validateTarget();\n    }\n    render() {\n        return (\n            <MarxanDialog\n                {...this.props}\n                contentWidth={240}\n\t\t\t\toffsetX={80}\n\t\t\t\toffsetY={260}\n                title=\"Target for all features\"\n                onOk={this.onOk.bind(this)}\n                children={\n                <React.Fragment>\n                    <MarxanTextField style={{fontSize:'13px',width:'70px'}} id={\"commonTarget\"} onChange = {(event,newValue) => this.setState({\"target_value\":newValue})} defaultValue ={this.state.target_value} onKeyPress={this.handleKeyPress.bind(this)} floatingLabelShrinkStyle={{fontSize:'16px'}} floatingLabelFocusStyle={{fontSize:'16px'}} errorText={this.state.validTarget ?  '' : \"Invalid target\"} /> \n                </React.Fragment>\n        }\n        />\n    );\n}\n}\n\nexport default TargetDialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport * as React from 'react';\nimport MarxanDialog from './MarxanDialog';\nimport MarxanTextField from './MarxanTextField';\nimport ToolbarButton from './ToolbarButton';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faClipboard } from '@fortawesome/free-solid-svg-icons';\n\nclass ShareableLinkDialog extends React.PureComponent {\n    copyToClipboard(evt){\n        window.navigator.clipboard.writeText(this.props.shareableLinkUrl).then(function() {\n            \n        }, function() {\n            alert(\"Browser not supported\");\n        });\n\t}\n\n    render() {\n        return (\n            <MarxanDialog\n                {...this.props}\n                contentWidth={600}\n                height={100}\n\t\t\t\toffsetX={80}\n\t\t\t\toffsetY={360}\n                title=\"Shareable link\"\n                children={\n                <React.Fragment>\n                    <MarxanTextField style={{fontSize:'13px',width:'550px'}} multiLine={true} rows={2} onChange = {(event,newValue) => this.setState({\"target_value\":newValue})} defaultValue ={this.props.shareableLinkUrl} floatingLabelShrinkStyle={{fontSize:'16px'}} floatingLabelFocusStyle={{fontSize:'16px'}} /> \n\t\t\t\t\t<ToolbarButton   \n\t\t\t\t\t\ticon={<FontAwesomeIcon icon={faClipboard}/>} \n\t\t\t\t\t\ttitle=\"Copy\"\n\t\t\t\t\t\tonClick={this.copyToClipboard.bind(this)} \n\t\t\t\t\t/>\n            </React.Fragment>\n        }\n        />\n    );\n}\n}\n\nexport default ShareableLinkDialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport * as React from 'react';\nimport { PieChart, Pie, Cell } from 'recharts';\nimport Divider from 'material-ui/Divider';\nimport { getArea } from './Helpers.js';\n// import star from './images/star.png';\n\nclass MetChart extends React.Component {\n    render() {\n        let rounded = Number(this.props.current_protected_percent.toFixed(1));\n        let country_area = getArea(this.props.country_area, this.props.reportUnits, false);\n        let protected_area = getArea(this.props.current_protected_area, this.props.reportUnits, false);\n        let total_area = getArea(this.props.total_area, this.props.reportUnits, false);\n        let titleText = \"Total area: \" +  total_area + \"\\nCountry area: \" + country_area + \"\\nProtected area: \" + protected_area;\n        const data = (this.props.showCountryArea) ? [{ name: 'Protected area', value: this.props.current_protected_area},{ name: 'Country area', value: (this.props.country_area - this.props.current_protected_area) }, { name: 'Total area', value: (this.props.total_area - this.props.country_area) }] : [{ name: 'Protected area', value: this.props.current_protected_area}, { name: 'Total area', value: (this.props.country_area - this.props.current_protected_area) }];\n        const colors = ['#D9D9D9', this.props.color];\n        return (\n            <React.Fragment>\n                <div className=\"MetChart\">\n                    <div className=\"MetChartTitle\">{this.props.title}</div>\n                    <Divider/>\n                    <div className='MetChartInner'>\n                        <PieChart width={120} height={120}>\n                          <Pie data={data} cx=\"50%\" cy=\"50%\" isAnimationActive={false} startAngle={90} endAngle={450} innerRadius={30} outerRadius={50}>\n                            {\n                              data.map((entry, index) => {\n                              let _color;\n                                switch (index) {\n                                    case 0:\n                                        _color = this.props.color;\n                                        break;\n                                    case 1:\n                                        _color = (this.props.showCountryArea) ? \"#bbbbbb\" : \"#dddddd\";\n                                        break;\n                                    default:\n                                        _color = \"#dddddd\";\n                                        break;\n                                }\n                                return <Cell key={index} fill={_color} strokeWidth={2}/>;\n                              })\n                            }\n                          </Pie>\n                        </PieChart>\n                        <div style={{color:colors[1]}} className=\"MetChartPercentLabel\">\n                            {rounded}%\n                        </div>\n                        <div className=\"MetChartDiv\" style={this.props.clickable!==false ? {cursor: 'pointer'} : null} title={titleText} />\n                        {/*<span style={{display: (this.props.endemic && (this.props.created_by === \"global admin\")) ? 'inline' : 'none'}}><img src={star} alt=\"Endemic\" title={\"Endemic\"} className={\"endemicImg\"}/></span>*/}\n                    </div>\n                </div>\n            </React.Fragment>\n        );\n    }\n}\n\nexport default MetChart;","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport * as React from 'react';\nimport { getArea } from './Helpers.js';\n\nclass CustomTooltip extends React.PureComponent {\n\trender() {\n\t\tlet tooltip = (this.props&&this.props.active && this.props&&this.props.payload) ?\n\t\t\t<div className=\"custom-tooltip\">\n\t        <div className=\"tooltip\">{this.props.payload[0].payload._alias}</div>\n\t        <div className=\"tooltip\">Total area: {getArea(this.props.payload[0].payload.total_area,this.props.reportUnits, true)}</div>\n\t        <div className=\"tooltip\">Country area: {getArea(this.props.payload[0].payload.country_area,this.props.reportUnits, true)}</div>\n\t        <div className=\"tooltip\">Protected area: {getArea(this.props.payload[0].payload.current_protected_area,this.props.reportUnits, true)}</div>\n        </div> : null;\n\t\treturn (tooltip);\n\t}\n}\n\nexport default CustomTooltip;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport * as React from 'react';\nimport MarxanDialog from './MarxanDialog';\nimport MetChart from \"./MetChart\";\nimport { Cell, ReferenceLine, ComposedChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Label } from 'recharts';\nimport Toggle from 'material-ui/Toggle';\nimport CustomTooltip from './CustomTooltip.js';\n\nclass GapAnalysisDialog extends React.PureComponent {\n\t\tconstructor(props) {\n\t\t\tsuper(props);\n\t\t\tthis.state = { showChart: false };\n\t\t}\n\t\tgetRepresentationScore(features) {\n\t\t\tlet sum = 0,\n\t\t\t\tamount_under_protection_property, total_amount_property;\n\t\t\t//get the names of the properties that we will use to calculate the representation scores\n\t\t\tif (features.length) {\n\t\t\t\tif (features[0].hasOwnProperty('current_protected_area')) {\n\t\t\t\t\tamount_under_protection_property = 'current_protected_area';\n\t\t\t\t\ttotal_amount_property = 'country_area'; //should this be total_area or country_area?\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tamount_under_protection_property = 'protected_area';\n\t\t\t\t\ttotal_amount_property = 'pu_area';\n\t\t\t\t}\n\t\t\t}\n\t\t\t//iterate through the features and get the value for each feature\n\t\t\tfeatures.forEach(item => {\n\t\t\t\tlet val = ((item[amount_under_protection_property] / item[total_amount_property]) / (item.target_value / 100));\n\t\t\t\tif (!isNaN(val)) sum = sum + ((val > 1) ? 1 : val);\n\t\t\t});\n\t\t\t//get the mean value\n\t\t\tlet mean = (sum / features.length);\n\t\t\treturn Number(mean * 100).toFixed(1);\n\t\t}\n\t\ttoggleView(event, isInputChecked) {\n\t\t\tthis.setState({ showChart: isInputChecked });\n\t\t}\n\t\trenderTooltip(a, b, c) {\n\t\t\treturn 'wibble';\n\t\t}\n\t\trender() {\n\t\t\t\t//join the data from the gap analysis onto the feature data\n\t\t\t\tlet _data = this.props.gapAnalysis.map(item => {\n\t\t\t\t\t//get the matching projectFeatures item\n\t\t\t\t\tvar stats = this.props.projectFeatures.filter(item2 => {\n\t\t\t\t\t\treturn (item2.feature_class_name === item._feature_class_name);\n\t\t\t\t\t})[0];\n\t\t\t\t\tif (stats) {\n\t\t\t\t\t\treturn Object.assign(item, { target_value: stats.target_value, color: stats.color });\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\treturn item;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t//sort the data by current protection\n\t\t\t\t_data.sort((a, b) => {\n\t\t\t\t\tlet returnval = (a.current_protected_percent < b.current_protected_percent) ? -1 : 1;\n\t\t\t\t\treturn returnval;\n\t\t\t\t});\n\t\t\t\t//get the data only for those features which occur in the country\n\t\t\t\t_data = _data.filter(item => item.country_area >0);\n\t\t\t\t//create the charts and get the count of features that have met the target\n\t\t\t\tlet targetsMetCount = 0;\n\t\t\t\tlet charts = _data.map((item, index) => {\n\t\t\t\t\tif (item.country_area > 0) {\n\t\t\t\t\t\tif (item.current_protected_percent >= item.target_value) targetsMetCount = targetsMetCount + 1;\n\t\t\t\t\t\treturn <MetChart {...item} title={item._alias} color={item.color} key={item._feature_class_name} reportUnits={this.props.reportUnits} showCountryArea={false} dataKey={item._feature_class_name}/>;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t//get the representation score\n\t\t\t\tlet score = (this.props.gapAnalysis.length) ? this.getRepresentationScore(_data) : 'Calcuating..';\n\t\t\t\treturn (\n\t\t\t\t\t\t<MarxanDialog\n\t\t\t\tshowSpinner={this.props.preprocessing}\n\t\t\t\tautoDetectWindowHeight={false}\n                {...this.props}\n                contentWidth={680}\n                title=\"Gap Analysis\"\n                helpLink={\"user.html#gap-analysis-window\"}\n                onRequestClose={this.props.closeGapAnalysisDialog}\n                showCancelButton={false}\n                children={\n                <React.Fragment key={'gapAnalysiskey'}>\n\t\t\t\t\t<div className=\"analysisReport\">\n\t\t\t\t\t\t<div>Gap Analysis for {this.props.metadata.pu_country} using the {this.props.marxanServer.wdpa_version} version of the WDPA</div>\n\t\t\t\t\t\t<div className={'analysisReportInner'} style={{display: (this.props.gapAnalysis.length) ? 'block' : ' none'}}>\n\t\t\t\t\t\t\t<div className={'analysisChartsDiv'} style={{display: (this.state.showChart) ? 'none' : 'block'}}>\n\t\t\t\t\t\t\t\t{charts}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<ComposedChart  width={550} height={350} data={_data} margin={{bottom:20, top:20}} style={{display: (this.state.showChart) ? 'block' : 'none', margin:'auto'}}>\n\t\t\t\t\t\t\t\t<CartesianGrid strokeDasharray=\"1\" stroke=\"#f4f4f4\"/>\n\t\t\t\t\t\t\t\t<XAxis dataKey=\"_alias\" height={100} angle={-90} textAnchor=\"end\" dx={-5}>\n\t\t\t\t\t\t\t\t</XAxis> \n\t\t\t\t\t\t\t\t<YAxis tick={{fontSize:11}} >\n\t\t\t\t\t\t\t\t\t<Label value='Percent Protected' angle={-90} position='insideBottomLeft' style={{fontSize:'11px',color:'#222222'}} offset={30}/>\n\t\t\t\t\t\t\t\t</YAxis>\n    \t\t\t\t\t\t\t<Tooltip content={<CustomTooltip reportUnits={this.props.reportUnits}/>} />\n\t\t\t\t\t\t\t\t<Bar dataKey=\"current_protected_percent\" fill=\"#8884d8\">\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t_data.map((entry, index) => {\n\t\t\t\t\t\t\t\t\t\treturn <Cell fill={entry.color} key={entry.color}/>;\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</Bar>\n    \t\t\t\t\t\t\t<ReferenceLine y={(_data.length) ? _data[0].target_value : 0} stroke=\"#7C7C7C\" strokeDasharray=\"3 3\" style={{display: (_data.length) ? 'inline' : 'none'}}/>\n\t\t\t\t\t\t\t</ComposedChart >\n\t\t\t\t\t\t\t<div className={'gapAnalysisBtmPanel'}>\n\t\t\t\t\t\t\t\t<div className={'gapAnalysisStatsPanel'}>\n\t\t\t\t\t\t\t\t\t<table><tbody><tr>\n\t\t\t\t\t\t\t\t\t\t<td>Features meeting targets:</td><td className={'score'}>{targetsMetCount}/{charts.length}</td></tr><tr>\n\t\t\t\t\t\t\t\t\t\t<td>Representation score:</td><td className={'score'}>{score}</td></tr>\n\t\t\t\t\t\t\t\t\t</tbody></table>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<Toggle label=\"Show as a chart\" onToggle={this.toggleView.bind(this)} style={{width:'unset',float:'right',paddingTop:'2px'}} labelStyle={{fontSize:'14px',width:'100px',color:'rgba(0, 0, 0, 0.6)'}} toggled={this.state.showChart}/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n                </React.Fragment>\n        }\n        />\n    );\n}\n}\n\nexport default GapAnalysisDialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport * as React from 'react';\nimport MarxanDialog from './MarxanDialog';\n\nclass ResetDialog extends React.PureComponent {\n    render() {\n        return (\n            <MarxanDialog\n                {...this.props}\n                contentWidth={240}\n                title=\"Reset database\"\n                okLabel='Yes'\n                cancelLabel='No'\n                showCancelButton={true}\n                children={\n                <div>Are you sure you want to reset?</div>\n        }\n        />\n        );\n    }\n}\n\nexport default ResetDialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport * as React from 'react';\nimport MarxanDialog from './MarxanDialog';\nimport ToolbarButton from './ToolbarButton';\n\nclass UpdateWDPADialog extends React.PureComponent {\n    render() {\n        let html = this.props.registry&&this.props.registry.WDPA.latest_version + \" is available. Details <a href='\" + (this.props.registry&&this.props.registry.WDPA.metadataUrl) + \"' target='_blank'>here</a>. Click below to update. \";\n        return (\n            <MarxanDialog\n                {...this.props}\n                contentWidth={380}\n\t\t\t\toffsetY={260}\n                title=\"Update WDPA\"\n                children={\n                <React.Fragment>\n                    <div style={{display: (this.props.newWDPAVersion ? 'block' : 'none')}}>\n                      <br/>\n                      <div dangerouslySetInnerHTML={{ __html: html}}/>\n    \t\t\t\t\t<br/>\n    \t\t\t\t\t<ToolbarButton title=\"Update WDPA\" onClick={this.props.updateWDPA} label=\"Update\" disabled={this.props.loading}/>\n                    </div>\n                </React.Fragment>\n        }\n        />\n    );\n}\n}\n\nexport default UpdateWDPADialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from \"react\";\nimport MarxanDialog from \"./MarxanDialog\";\nimport MarxanTextField from './MarxanTextField';\nimport Checkbox from 'material-ui/Checkbox';\n\nclass ImportGBIFDialog extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = { searchText: '','gbifID': 0, 'suggestions':[], clicked:false };\n    }\n    onOk() {\n        this.props.importGBIFData(this.state.selectedItem).then(response => {\n            this.props.onCancel();\n        }).catch(error => {\n            this.props.onCancel();\n        });\n    }\n    changeSearchText(event, value){\n        if (this.state.searchText.length>2 && !this.state.clicked){\n            //get the gbif suggested names\n            this.props.gbifSpeciesSuggest(this.state.searchText).then((response)=>{\n                this.setState({suggestions: response});\n            });\n        }\n        this.setState({searchText: value, clicked: false, selectedItem:undefined});\n    }\n    onClick(item, evt){\n        this.setState({clicked: true}, ()=>{\n            this.setState({searchText: item.scientificName, selectedItem: item});            \n        });\n    }\n    render() {\n        let suggestions = this.state.suggestions.map((item)=>{\n            return <div key={item.key} className={'suggestion'} onClick={this.onClick.bind(this, item)}>{item.scientificName}</div>;\n        });\n        return (\n            <MarxanDialog\n                {...this.props}\n                contentWidth={390}\n                offsetY={80}\n                title=\"Import GBIF data\"\n                helpLink={\"user.html#importing-from-the-global-biodiversity-information-facility-gbif\"}\n                onOk={this.onOk.bind(this)}\n                okDisabled={this.state.selectedItem===undefined || this.props.loading}\n                showCancelButton={true}\n        \t\tautoDetectWindowHeight={false}\n                children={\n                  <React.Fragment key={'importGBIFKey'}>\n                    <div className={'importGBIFContent'}>\n                        <MarxanTextField value={this.state.searchText} onChange={this.changeSearchText.bind(this)} floatingLabelText=\"Search\" style={{width:'330px'}}/>\n                        <div className={'suggestions'} style={{display:(this.state.searchText.length>2 && !this.state.clicked) ? 'block' : 'none'}}>{suggestions}</div>\n                        <Checkbox label=\"Add to project\" style={{fontSize:'12px', width:'200px',display:'inline-block', 'marginTop':'10px'}} onCheck={this.props.setAddToProject} checked={this.props.addToProject} />\t\t\t\t\t\n                    </div>\n                    </React.Fragment>\n                }\n            />\n        );\n    }\n}\n\nexport default ImportGBIFDialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\n/*global fetch*/\n/*global URLSearchParams*/\n/*global AbortController*/\nimport React from 'react';\nimport packageJson from '../package.json';\nimport CONSTANTS from './constants';\n/*eslint-disable no-unused-vars*/ \nimport axios, { post } from 'axios';\n/*eslint-enable no-unused-vars*/\nimport MuiThemeProvider from 'material-ui/styles/MuiThemeProvider';\n//mapbox imports\nimport MapboxDraw from '@mapbox/mapbox-gl-draw/dist/mapbox-gl-draw.js';\nimport mapboxgl from 'mapbox-gl';\nimport '@mapbox/mapbox-gl-draw/dist/mapbox-gl-draw.css'; \nimport 'mapbox-gl/dist/mapbox-gl.css';\nimport HomeButton from './HomeButton.js';  \nimport jsonp from 'jsonp-promise';\nimport classyBrew from 'classybrew';\nimport { getMaxNumberOfClasses,zoomToBounds } from './Helpers.js';\n//material-ui components and icons\nimport Popover from 'material-ui/Popover'; \nimport Menu from 'material-ui/Menu';\nimport Snackbar from 'material-ui/Snackbar';\nimport Properties from 'material-ui/svg-icons/alert/error-outline';\nimport RemoveFromProject from 'material-ui/svg-icons/content/remove';\nimport AddToMap from 'material-ui/svg-icons/action/visibility';\nimport RemoveFromMap from 'material-ui/svg-icons/action/visibility-off';\nimport ZoomIn from 'material-ui/svg-icons/action/zoom-in';\nimport Preprocess from 'material-ui/svg-icons/action/autorenew';\n//project components\nimport AppBar from './AppBar';\nimport LoadingDialog from './LoadingDialog';\nimport LoginDialog from './LoginDialog';\nimport RegisterDialog from './RegisterDialog.js';\nimport ResendPasswordDialog from './ResendPasswordDialog.js';\nimport Welcome from './Welcome.js';\nimport ToolsMenu from './ToolsMenu';\nimport UserMenu from './UserMenu';\nimport HelpMenu from './HelpMenu';\nimport UserSettingsDialog from './UserSettingsDialog';\nimport ProfileDialog from './ProfileDialog';\nimport UsersDialog from './UsersDialog';\nimport AboutDialog from './AboutDialog';\nimport MenuItemWithButton from './MenuItemWithButton';\nimport InfoPanel from './InfoPanel';\nimport ResultsPanel from './ResultsPanel';\nimport FeatureInfoDialog from './FeatureInfoDialog';\nimport ProjectsDialog from './ProjectsDialog';\nimport NewProjectDialog from './NewProjectDialog';\nimport NewProjectWizardDialog from './NewProjectWizardDialog';\nimport ProjectsListDialog from './ProjectsListDialog';\nimport PlanningGridDialog from './PlanningGridDialog';\nimport PlanningGridsDialog from './PlanningGridsDialog';\nimport NewPlanningGridDialog from './NewPlanningGridDialog';\nimport ImportPlanningGridDialog from './ImportPlanningGridDialog';\nimport FeatureDialog from './FeatureDialog';\nimport FeaturesDialog from './FeaturesDialog';\nimport NewFeatureDialog from './NewFeatureDialog';\nimport ImportFeaturesDialog from './ImportFeaturesDialog';\nimport ImportFromWebDialog from './ImportFromWebDialog';\nimport CostsDialog from './CostsDialog';\nimport ImportCostsDialog from './ImportCostsDialog';\nimport RunSettingsDialog from './RunSettingsDialog';\nimport ClassificationDialog from './ClassificationDialog';\nimport ClumpingDialog from './ClumpingDialog';\nimport ImportProjectDialog from './ImportProjectDialog';\nimport ImportMXWDialog from './ImportMXWDialog';\nimport RunLogDialog from './RunLogDialog';\nimport ServerDetailsDialog from './ServerDetailsDialog';\nimport AlertDialog from './AlertDialog';\nimport ChangePasswordDialog from './ChangePasswordDialog';\nimport IdentifyPopup from './IdentifyPopup';\nimport TargetDialog from './TargetDialog';\nimport ShareableLinkDialog from './ShareableLinkDialog';\nimport GapAnalysisDialog from './GapAnalysisDialog';\nimport ResetDialog from './ResetDialog';\nimport UpdateWDPADialog from './UpdateWDPADialog';\nimport ImportGBIFDialog from './ImportGBIFDialog';\n\n//GLOBAL VARIABLES\nlet MARXAN_CLIENT_VERSION = packageJson.version; \nlet timers = []; //array of timers for seeing when asynchronous calls have finished\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      registry:undefined,\n      marxanServers: [],\n      marxanServer: {},\n      usersDialogOpen: false,\n      alertDialogOpen: false,\n      featureMenuOpen: false,\n      profileDialogOpen: false,\n      aboutDialogOpen: false,\n      helpDialogOpen: false,\n      importProjectDialogOpen: false,\n      UserSettingsDialogOpen: false,\n      welcomeDialogOpen: false,\n      registerDialogOpen: false,\n      clumpingDialogOpen: false,\n      settingsDialogOpen: false,\n      projectsDialogOpen: false,\n      openInfoDialogOpen: false,\n      importGBIFDialogOpen: false,\n      newProjectDialogOpen: false, \n      newProjectWizardDialogOpen: false, \n      shareableLinkDialogOpen: false,\n      classificationDialogOpen: false,\n      resendPasswordDialogOpen: false,\n      NewPlanningGridDialogOpen: false, \n      importPlanningGridDialogOpen: false,\n      ProjectsListDialogOpen: false,\n      changePasswordDialogOpen: false,\n      importFeaturesDialogOpen: false,\n      importFromWebDialogOpen: false,\n      serverDetailsDialogOpen: false,\n      planningGridsDialogOpen: false,\n      planningGridDialogOpen: false,\n      updateWDPADialogOpen: false,\n      NewFeatureDialogOpen: false,\n      importMXWDialogOpen: false,\n      featuresDialogOpen: false,\n      gapAnalysisDialogOpen: false,\n      featureDialogOpen: false,\n      runLogDialogOpen: false,\n      resetDialogOpen: false,\n      costsDialogOpen: false,\n      importCostsDialogOpen: false,\n      infoPanelOpen: false,\n      resultsPanelOpen: false,\n      targetDialogOpen: false,\n      notificationsOpen: false,\n      guestUserEnabled: true,\n      toolsMenuOpen: false,\n      userMenuOpen: false,\n      helpMenuOpen: false,\n      addToProject: true,\n      smallLinearGauge: true,\n      users: [],\n      user: '', \n      password: '',\n      project: '',\n      projectList: [],\n      owner: '', // the owner of the project - may be different to the user, e.g. if logged on as guest (user) and accessing someone elses project (owner)\n      loggedIn: false,\n      shareableLink: false,\n      userData: {'SHOWWELCOMESCREEN': true, 'REPORTUNITS': \"Ha\"},\n      unauthorisedMethods: [],\n      metadata: {},\n      renderer: {},\n      runParams: [],\n      files: {},\n      popup_point: { x: 0, y: 0 },\n      snackbarOpen: false,\n      snackbarMessage: '',\n      tilesets: [],\n      identifyPlanningUnits: {},\n      identifyProtectedAreas: [],\n      identifyFeatures: [],\n      loading: false, //true when GET/POST requests are ongoing\n      preprocessing: false, //true when a WebSocket is ongoing\n      uploading: false, //true when an upload to Mapbox is ongoing\n      identifyVisible: false,\n      pa_layer_visible: false,\n      currentFeature:{},\n      featureDatasetFilename: '',\n      dataBreaks: [],\n      allFeatures: [], //all of the interest features in the metadata_interest_features table\n      projectFeatures: [], //the features for the currently loaded project\n      selectedFeatureIds :[],\n      addingRemovingFeatures: false,\n      costnames: [],\n      selectedCosts: [],\n      countries: [],\n      planning_units: [],\n      planning_unit_grids: [],\n      planning_grid_metadata:{},\n      feature_metadata:{},\n      activeTab: \"project\",\n      activeResultsTab: \"legend\",\n      logMessages: [],\n      map0_paintProperty: [],\n      map1_paintProperty: [],\n      map2_paintProperty: [],\n      map3_paintProperty: [],\n      map4_paintProperty: [],\n      clumpingRunning: false,\n      projectListDialogTitle:'',\n      projectListDialogHeading: '',\n      pid: 0,\n      basemaps: [],\n      basemap: 'North Star',\n      mapCentre: {lng: 0, lat: 0},\n      mapZoom: 12,\n      runLogs:[],\n      puEditing: false,\n      wdpaAttribution: \"\",\n      shareableLinkUrl: \"\",\n      notifications:[],\n      gapAnalysis: [],\n      costsLoading: false,\n      protected_area_intersections:[],\n      visibleLayers:[]\n    };\n  }\n\n  componentDidMount() {\n    //get the query parameters\n    var searchParams = new URLSearchParams(window.location.search);\n    //if this is a shareable link, then dont show the login form\n    if (searchParams.has(\"project\")) this.setState({loggedIn:true, shareableLink:true});\n    //parse the application level variables from the Marxan Registry\n    this.getGlobalVariables().then(()=>{\n      //automatically login if this is a shareable link\n      if (searchParams.has(\"project\")) this.openShareableLink(searchParams);\n      //select a server if it is passed\n      if (searchParams.has(\"server\")) this._selectServer(searchParams.get(\"server\"));\n    });\n    //instantiate the classybrew to get the color ramps for the renderers\n    this.setState({ brew: new classyBrew() });\n  }\n  \n  //gets various global variables from the marxan registry\n  getGlobalVariables(){\n    return new Promise((resolve, reject) => {\n      fetch(CONSTANTS.MARXAN_REGISTRY)\n      .then(response => {\n        response.json().then(registryData => {\n          this.setState({registry: registryData});\n          mapboxgl.accessToken = registryData.MBAT_PUBLIC; //this is my public access token \n          //initialise the basemaps\n          this.setState({basemaps: registryData.MAPBOX_BASEMAPS});\n          //get all the information for the marxan servers by polling them\n          this.initialiseServers(registryData.MARXAN_SERVERS).then((response)=>{\n            resolve(response);\n          });\n        });\n      });\n    });\n  }\n  \n  //automatically logs in and loads a project as a guest user\n  openShareableLink(searchParams){\n    try {\n      if (searchParams.has(\"server\") && searchParams.has(\"user\") && searchParams.has(\"project\")){\n        //get the server data from the servers object\n        let serverData = this.state.marxanServers.find(server => server.name === searchParams.get(\"server\"));\n        if (serverData === undefined) throw new Error(\"Invalid server parameter on shareable link\");\n        if (serverData && serverData.offline) throw new Error(\"Server is offline\");\n        if (serverData && !serverData.guestUserEnabled) throw new Error(\"Guest user is not enabled on the server\");\n        //set the server\n        this.selectServer(serverData);\n        //switch to the guest user\n        this.switchToGuestUser().then(()=>{\n          //login\n          this.validateUser().then((response)=>{\n            this.loadProject(searchParams.get(\"project\"),searchParams.get(\"user\")).then(()=>{\n              //hide the loading dialog\n              this.setState({shareableLink:false});\n            });\n          });\n        });\n      }else{\n        throw new Error(\"Invalid query parameters on shareable link\");\n      }\n    }\n\t\tcatch (err) {\n\t\t  alert(err);\n\t\t}\n  }\n  \n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  ////////////////////////// REQUEST HELPERS\n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n  //makes a GET request and returns a promise which will either be resolved (passing the response) or rejected (passing the error)\n  _get(params, timeout = CONSTANTS.TIMEOUT){\n    return new Promise((resolve, reject) => {\n      //set the global loading flag\n      this.setState({loading: true});\n      jsonp(this.state.marxanServer.endpoint + params, { timeout: timeout }).promise.then((response) => {\n        this.setState({loading: false});\n        if (!this.checkForErrors(response)) {\n          resolve(response);\n        }\n        else {\n          reject(response.error);\n        }\n      }, (err) => {\n        this.setState({loading: false});\n        this.setSnackBar(\"Request timeout - See <a href='\" + CONSTANTS.ERRORS_PAGE + \"#request-timeout' target='blank'>here</a>\");\n        reject(err);\n      });\n    });\n  }\n \n  //makes a POST request and returns a promise which will either be resolved (passing the response) or rejected (passing the error)\n  _post(method, formData, timeout = CONSTANTS.TIMEOUT, withCredentials = CONSTANTS.SEND_CREDENTIALS){\n    return new Promise((resolve, reject) => {\n      //set the global loading flag\n      this.setState({loading: true});\n      post(this.state.marxanServer.endpoint + method, formData, {withCredentials: withCredentials}).then((response) => {\n        if (!this.checkForErrors(response.data)) {\n          this.setState({loading: false});\n          resolve(response.data);\n        }\n        else {\n          this.setState({loading: false});\n          reject(response.data.error);\n        }\n      }, (err) => {//TODO - If the request is unauthorised it returns the Status Code of 200 with the error: \"HTTP 403: Forbidden (The 'ReadOnly' role does not have permission to access the 'updateSpecFile' service)\" - but for some reason this error handling is used\n        this.setState({loading: false});\n        if (err.message !== 'Network Error') this.setSnackBar(err.message);\n        reject(err);\n      });\n    });\n  }\n \n  //web socket requests\n  _ws(params, msgCallback){\n    return new Promise((resolve, reject) => {\n      let ws = new WebSocket(this.state.marxanServer.websocketEndpoint + params);\n      //get the message and pass it to the msgCallback function\n      ws.onmessage = (evt) => {\n        let message = JSON.parse(evt.data);\n        //check for errors\n        if (!this.checkForErrors(message)){\n          if (message.status === \"Finished\"){\n            //pass the message back to the callback\n            msgCallback(message);\n            //reset state\n            this.setState({preprocessing: false});\n            //if the web socket has finished then resolve the promise\n            resolve(message);\n          }else{\n            msgCallback(message);\n          }\n        }else{\n          //pass the message back to the callback\n          msgCallback(message);\n          //reset state\n          this.setState({preprocessing: false});\n          reject(message.error);\n        }\n      };\n      ws.onopen = (evt) => {\n        //do something if necessary\n      };\n      ws.onerror = (evt) => {\n        //reset state\n        this.setState({preprocessing: false});\n        reject(evt);\n      };\n      ws.onclose = (evt) => {\n        //reset state\n        this.setState({preprocessing: false});\n        if (!evt.wasClean) {\n          msgCallback({status:'SocketClosedUnexpectedly'});\n        }else{\n          reject(evt);\n        }\n      };\n    });\n  }\n  \n  //checks the reponse for errors\n  checkForErrors(response, showSnackbar = true) {\n    let networkError = this.responseIsTimeoutOrEmpty(response, showSnackbar);\n    //check the response from the server for an error property - if it has one then show it in the snackbar\n    let serverError = this.isServerError(response, showSnackbar);\n    let isError = (networkError || serverError);\n    if (isError) {\n      //write the full trace to the console if available\n      let error = (response.hasOwnProperty('trace')) ? response.trace : (response.hasOwnProperty('error')) ? response.error : \"No error message returned\";\n      console.error(\"Error message from server: \" + error);\n    }\n    return isError;\n  }\n\n  //checks the response from a REST call for timeout errors or empty responses\n  responseIsTimeoutOrEmpty(response, showSnackbar = true) {\n    if (!response) {\n      let msg = \"No response received from server\";\n      if (showSnackbar) this.setSnackBar(msg);\n      return true;\n    }\n    else {\n      return false;\n    }\n  }\n\n  //checks to see if the rest server raised an error and if it did then show in the snackbar\n  isServerError(response, showSnackbar) {\n    //errors may come from the marxan server or from the rest server which have slightly different json responses\n    if ((response && response.error) || (response && response.hasOwnProperty('metadata') && response.metadata.hasOwnProperty('error') && response.metadata.error != null)) {\n      var err = (response.error) ? (response.error) : response.metadata.error;\n      if (showSnackbar) this.setSnackBar(err);\n      return true;\n    }\n    else {\n      //some server responses are warnings and will not stop the function from running as normal\n      if (response.warning) {\n        if (showSnackbar) this.setSnackBar( response.warning);\n      }\n      return false;\n    }\n  }\n\n  //called when any websocket message is received - this logic removes duplicate messages\n  wsMessageCallback(message){\n    //dont log any clumping projects\n    if (message.user === '_clumping') return;\n    //log the message \n    this.logMessage(message);\n    switch (message.status) {\n      case 'Started': //from the open method of all MarxanWebSocketHandler subclasses\n        //set the processing state when the websocket starts\n        this.setState({preprocessing: true});\n        break;\n      case 'pid': //from marxan runs and preprocessing - the pid is an identifer and the pid, e.g. m1234 is a marxan run process with a pid of 1234\n        this.setState({pid: message.pid});\n        break;\n      case \"FeatureCreated\":\n        //remove all preprocessing messages\n        this.removeMessageFromLog(\"Preprocessing\");\n        this.newFeatureCreated(message.id);\n        break;\n      case 'Finished': //from the close method of all MarxanWebSocketHandler subclasses\n        //reset the pid\n        this.resetPID();\n        //remove all preprocessing messages\n        this.removeMessageFromLog(\"Preprocessing\");\n        break;\n      default:\n        break;\n    }\n  }\n  \n  //resets the pid value\n  resetPID(){\n    this.setState({pid: 0});  \n  }\n  //logs the message if necessary - this removes duplicates\n  logMessage(message){\n    //log the message from the websocket\n    if (message.status === 'SocketClosedUnexpectedly'){ //server closed WebSocket unexpectedly - uncaught server error, server crash or WebSocket timeout)\n      this.log({method:message.method, status:'Finished', error:\"The WebSocket connection closed unexpectedly\"});\n      //remove the Preprocessing messages which show the processing spinner\n      this.removeMessageFromLog(\"Preprocessing\");\n      //reset the PID\n      this.resetPID();\n    }else{\n      //see if the message has a pid and if it does then see if the status has changed since the last message - if it has then log the message - this does not apply to RunningMarxan messages as all of these need to be logged\n      if (message.hasOwnProperty('pid') && (message.status !=='RunningMarxan')) {\n        //get the existing status\n        let _messages = this.state.logMessages.filter((_message) => {\n          if (_message.hasOwnProperty('pid')) {\n            return _message.pid === message.pid;\n          }else{\n            return false;\n          }\n        });\n        //if there is already a message for that pid\n        if (_messages.length > 0){\n          //compare with the latest status\n          if (message.status !== _messages[_messages.length-1].status) {\n            //if the new status is different and the message status is finished, then remove the processing message\n            if (message.status === 'Finished') this.removeMessageFromLog('RunningQuery', message.pid);\n            this.log(message);\n          }\n        }else{ //log the first message for that pid\n          this.log(message);\n        }\n      }else{\n        //remove duplicate messages from the log (unless they are from the marxan run or have a status of started or finished)\n        if (!((message.status === 'RunningMarxan')||(message.status === 'Started')||(message.status === 'Finished'))) this.removeMessageFromLog(message.status);\n        //log the message\n        this.log(message);\n      }\n    }\n  }\n  \n  //removes a message from the log by matching on the status and if it is passed, the pid\n  removeMessageFromLog(status, pid){\n    let _messages = this.state.logMessages;\n    //filter the messages to remove those that match on status (and pid)\n    _messages = _messages.filter((_message) => {\n      if (pid !== undefined){\n        if (_message.hasOwnProperty('pid')) {\n          return (!(_message.pid === pid && _message.status === status));\n        }else{\n          return true;\n        }\n      }else{ //match just on the status\n        return (!(_message.status === status));\n      }\n    });\n    this.setState({logMessages: _messages});\n  }\n  \n  //can be called from other components\n  setSnackBar(message, silent = false){\n    if (!silent) this.setState({snackbarOpen: true, snackbarMessage: message});\n  }\n  \n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  ////////////////////////// MANAGING MARXAN SERVERS\n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n  //initialises the servers by requesting their capabilities and then filtering the list of available servers\n  initialiseServers(marxanServers){\n    return new Promise((resolve, reject) => {\n      //get a list of server hosts from the marxan.json registry\n      let hosts = marxanServers.map((server) => {\n        return server.host;  \n      });\n      //add the current domain - this may be a local/local network install\n      let name = (window.location.hostname === \"localhost\") ? \"localhost\" : window.location.hostname;\n      marxanServers.push(({name: name, protocol: window.location.protocol, host: window.location.hostname, port: 80, description:'Local machine', type:'local', }));\n      //get all the server capabilities - when all the servers have responded, finalise the marxanServer array\n      this.getAllServerCapabilities(marxanServers).then((server) => {\n        //remove the current domain if either the marxan server is not installed, or it is already in the list of servers from the marxan registry\n        marxanServers = marxanServers.filter((item) => {\n          return (item.type===\"remote\" || (item.type===\"local\" && !item.offline && hosts.indexOf(item.host) === -1) || (item.host === 'localhost'));\n        });\n        //sort the servers by the name \n        marxanServers.sort((a, b) => {\n          if ((a.name.toLowerCase() < b.name.toLowerCase())||(a.type === \"local\"))\n            return -1;\n          if (a.name.toLowerCase() > b.name.toLowerCase())\n            return 1;\n          return 0;\n        });\n        this.setState({marxanServers: marxanServers}, ()=>{\n          resolve(\"ServerData retrieved\");\n        });\n      });\n    });\n  }  \n\n  //gets the capabilities of all servers\n  async getAllServerCapabilities(marxanServers) {\n    let promises = await marxanServers.map(async server=>{\n      await this.getServerCapabilities(server);\n    });\n    await Promise.all(promises);\n  }\n\n  //gets the capabilities of the server by making a request to the getServerData method\n  async getServerCapabilities(server){\n    //get the endpoint for all http/https requests\n    let endpoint = server.protocol + \"//\" + server.host + \":\" + server.port + CONSTANTS.TORNADO_PATH;\n    //get the WebService endpoint\n    let websocketEndpoint = (server.protocol ==='http:') ? \"ws://\" + server.host + \":\" + server.port + CONSTANTS.TORNADO_PATH : \"wss://\" + server.host + \":\" + server.port + CONSTANTS.TORNADO_PATH;\n    //set the default properties for the server - by default the server is offline, has no guest access and CORS is not enabled\n    server = Object.assign(server, {endpoint: endpoint, websocketEndpoint: websocketEndpoint, offline: true, guestUserEnabled: false, corsEnabled: false});\n    //poll the server to make sure tornado is running \n    try{\n      const controller = new AbortController();\n      const signal = controller.signal;   \n      const timeoutId = setTimeout(() => controller.abort(), 2000);\n      const response = await fetch(endpoint + \"getServerData\", { credentials:\"include\", signal: signal });\n      clearTimeout(timeoutId);\n      if (!response.ok) {\n        throw Error(\"fetch returned a 404 or 500 error: \" + response.statusText);\n      }\n      const json = await response.json();\n      if (json.hasOwnProperty('info')){\n        //see if CORS is enabled from this domain - either the domain has been added as an allowable domain on the server, or the client and server are on the same machine\n        let corsEnabled = ((json.serverData.PERMITTED_DOMAINS.indexOf(window.location.hostname)>-1)||(server.host === window.location.hostname)) ? true : false;\n        //set the flags for the server capabilities\n        server = Object.assign(server, {guestUserEnabled: json.serverData.ENABLE_GUEST_USER, corsEnabled: corsEnabled, offline: false, machine: json.serverData.MACHINE, client_version: json.serverData.MARXAN_CLIENT_VERSION, server_version: json.serverData.MARXAN_SERVER_VERSION, node: json.serverData.NODE, processor: json.serverData.PROCESSOR, processor_count: json.serverData.PROCESSOR_COUNT,ram: json.serverData.RAM, release: json.serverData.RELEASE, system:json.serverData.SYSTEM, version: json.serverData.VERSION, wdpa_version: json.serverData.WDPA_VERSION, planning_grid_units_limit: Number(json.serverData.PLANNING_GRID_UNITS_LIMIT), disk_space: json.serverData.DISK_FREE_SPACE, shutdowntime: json.serverData.SHUTDOWNTIME, enable_reset: json.serverData.ENABLE_RESET});\n        //if the server defines its own name then set it \n        if(json.serverData.SERVER_NAME!==\"\") {\n          server = Object.assign(server, {name:json.serverData.SERVER_NAME});\n        }\n        //if the server defines its own description then set it \n        if(json.serverData.SERVER_DESCRIPTION!==\"\") {\n          server = Object.assign(server, {description:json.serverData.SERVER_DESCRIPTION});\n        }\n      }\n    }catch(error){\n      console.log(\"fetch failed with: \" + error);\n    }\n  }\n  //programatically selects a server\n  _selectServer(servername){\n    //remove the search part of the url\n    window.history.replaceState({}, document.title, \"/\" );\n    //get the server object from the name  \n    let server = this.state.marxanServers.filter(item=>item.name===servername);\n    if (server.length) this.selectServer(server[0]);\n  }\n  \n  //sets the layer name for the WDPA vector tiles based on the WDPA version\n  setWDPAVectorTilesLayerName(wdpa_version){\n    //get the short version of the wdpa_version, e.g. August 2019 to aug_2019\n    let version = wdpa_version.toLowerCase().substr(0,3) + \"_\" + wdpa_version.substr(-4);\n    //set the value of the vector_tile_layer based on which version of the wdpa the server has in the PostGIS database\n    this.wdpa_vector_tile_layer = \"wdpa_\" + version + \"_polygons\";\n  }\n  //called when the user selects a server\n  selectServer(value){\n    this.setState({marxanServer: value});\n    //see if there is a new version of the wdpa\n    (value.wdpa_version !== this.state.registry.WDPA.latest_version) ? this.setState({newWDPAVersion: true}) : this.setState({newWDPAVersion: false});\n    //set the link to the WDPA vector tiles based on the version that is included in the server in the PostGIS database\n    this.setWDPAVectorTilesLayerName(value.wdpa_version);\n    //if the server is ready only then change the user/password to the guest user\n    if (!value.offline && !value.corsEnabled && value.guestUserEnabled){\n      this.switchToGuestUser();\n    }\n  }\n  \n  closeSnackbar() {\n    this.setState({ snackbarOpen: false });\n  }\n\n  startLogging(clearLog = false){\n    //switches the results pane to the log tab\n    this.log_tab_active();\n    //clear the log if needs be\n    if (clearLog) this.clearLog();\n  }\n\n  //clears the log\n  clearLog(){\n    this.setState({logMessages: []});\n  }\n  \n  //centralised logging method - all log messages are routed through this method (can be called from components to update the log)\n  log(message){\n    //add a timestamp to the message\n    Object.assign(message, {'timestamp': new Date()});\n    let _messages = this.state.logMessages;\n    //add the message to the existing log\n    _messages.push(message);\n    //set the state\n    this.setState({logMessages: _messages});\n  }\n\n  //utiliy method for getting all puids from normalised data, e.g. from [[\"VI\", [7, 8, 9]], [\"IV\", [0, 1, 2, 3, 4]], [\"V\", [5, 6]]]\n  getPuidsFromNormalisedData(normalisedData) {\n    let puids = [];\n    normalisedData.forEach((item) => {\n      puids = puids.concat(item[1]);\n    });\n    return puids;\n  }\n\n  changeUserName(user) {\n    this.setState({ user: user });\n  }\n\n  changePassword(password) {\n    this.setState({ password: password });\n  }\n  \n  //checks the users credentials\n  checkPassword(user, password) {\n    return new Promise((resolve, reject) => {\n      this._get(\"validateUser?user=\" +user + \"&password=\" + password, 10000).then((response) => {\n        resolve();\n      }).catch((error) => {\n        reject(error);\n      });\n    });\n  }\n  //validates the user and then logs in if successful\n  validateUser() {\n    return new Promise((resolve, reject) => {\n      this.checkPassword(this.state.user, this.state.password).then(() => {\n        //user validated - log them in\n        this.login().then((response)=>{\n          resolve(\"User validated\");\n        });\n      }).catch((error) => {\n        //\n      });\n    });\n  }\n\n  //the user is validated so login\n  login() {\n    return new Promise((resolve, reject) => {\n      this._get(\"getUser?user=\" + this.state.user).then((response) => {\n        this.setState({userData: response.userData, unauthorisedMethods: response.unauthorisedMethods, project: response.userData.LASTPROJECT, dismissedNotifications: (response.dismissedNotifications ? response.dismissedNotifications : [])}, ()=>{\n          //show the welcome dialog\n        //   this.openWelcomeDialog();\n        });\n        //set the basemap\n        var basemap = this.state.basemaps.filter((item) => {return (item.name === response.userData.BASEMAP);})[0];\n        this.setBasemap(basemap).then(() => {\n          //get all features\n          this.getAllFeatures().then(() => {\n            //get the users last project and load it \n            this.loadProject(response.userData.LASTPROJECT, this.state.user).then((response)=>{\n              resolve(\"Logged in\");\n            });\n          });\n          //get all planning grids\n          this.getPlanningUnitGrids();\n        });\n      }).catch((error) => {\n        //do something\n      });\n    });\n  }\n\n  //log out and reset some state \n  logout() {\n    this.hideUserMenu();\n    this.setState({ loggedIn: false, user: '', password: '', project: '',owner: '', runParams: [], files: {}, metadata: {}, renderer: {}, planning_units: [], projectFeatures:[], infoPanelOpen: false, resultsPanelOpen: false, brew: new classyBrew(), notifications:[]  });\n    this.resetResults();\n    //clear the currently set cookies\n    this._get(\"logout\").then((response) => {\n        //do something\n    });\n  }\n  \n  switchToGuestUser(){\n    return new Promise((resolve, reject) => {\n      this.setState({user: \"guest\", password:\"password\"}, ()=> {\n        resolve(\"Switched to guest user\");\n      });\n    });\n  }\n  \n  changeEmail(value) { \n      this.setState({ resendEmail: value });\n  }\n\n  resendPassword() {\n    this._get(\"resendPassword?user=\" + this.state.user).then((response) => {\n      //ui feedback\n      this.setSnackBar(response.info);\n      //close the resend password dialog\n      this.closeResendPasswordDialog();\n    }).catch((error) => {\n      //do something\n  \t});\n  }\n\n  //gets data for all users\n  getUsers() {\n    this._get(\"getUsers\").then((response) => {\n      this.setState({ users: response.users });\n    }).catch((error) => {\n      this.setState({ users: [] });\n    });\n  }\n\n  //deletes a user\n  deleteUser(user) {\n    this._get(\"deleteUser?user=\" + user).then((response) => {\n      this.setSnackBar(\"User deleted\");\n      //remove it from the users array\n      let usersCopy = this.state.users;\n      //remove the user \n      usersCopy = usersCopy.filter((item) => {return item.user !== user});\n      //update the users state   \n      this.setState({users: usersCopy});\n      //see if the current project belongs to the deleted user\n      if (this.state.owner === user) {\n        this.setSnackBar(\"Current project no longer exists. Loading next available.\");\n        //load the next available project\n        this.state.projects.some((project) => {\n          if (project.user !== user) this.loadProject(project.name, project.user);\n          return project.name !== this.state.project;\n        });\n        //delete all the projects belonging to that user\n        this.deleteProjectsForUser(user);\n      }\n    });\n  }\n  \n  //deletes all of the projects belonging to the passed user from the state\n  deleteProjectsForUser(user){\n    let projects = this.state.projects.map((project) => {\n      return (project.user !== user);\n    });\n    this.setState({projects: projects});\n  }\n  \n  //changes a users role\n  changeRole(user, role){\n    this.updateUser({ROLE: role}, user);\n    //copy the users state\n    let usersCopy = this.state.users;\n    //change the users role\n    usersCopy = usersCopy.map((item) => {\n      if (item.user === user){\n        return Object.assign(item, {'ROLE': role});\n      }else{\n        return item;\n      }      \n    });\n    //update the users state   \n    this.setState({users: usersCopy});\n  }\n\n  //toggles if the guest user is enabled on the server or not\n  toggleEnableGuestUser(){\n    this._get(\"toggleEnableGuestUser\").then((response) => {\n      //if succesfull set the state\n      let _marxanServer = this.state.marxanServer;\n      _marxanServer = Object.assign(_marxanServer, {guestUserEnabled: response.enabled});\n      this.setState({ marxanServer: _marxanServer });\n    });\n  }\n  \n  //toggles the projects privacy\n  toggleProjectPrivacy(newValue){\n    this.updateProjectParameter(\"PRIVATE\", newValue).then((response) => {\n      this.setState({ metadata: Object.assign(this.state.metadata, { PRIVATE: (newValue === \"True\") })});\n    });\n  }\n  \n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  ////////////////////////// NOTIFICATIONS\n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n  //parse the notifications \n  parseNotifications(){\n    //see if there are any new notifications from the marxan-registry\n    if (this.state.registry.NOTIFICATIONS.length>0){\n      this.addNotifications(this.state.registry.NOTIFICATIONS);\n    }\n    //see if there is a new version of the wdpa data - this comes from the Marxan Registry WDPA object - if there is then show a notification to admin users\n    if (this.state.newWDPAVersion) this.addNotifications([{id:'wdpa_update_' + this.state.registry.WDPA.latest_version, html:\"A new version of the WDPA is available. Go to Help | Server Details for more information.\", type:\"Data Update\", showForRoles: [\"Admin\"]}]);\n    //see if there is a new version of the marxan-client software\n    if (MARXAN_CLIENT_VERSION !== this.state.registry.CLIENT_VERSION) this.addNotifications([{id:'marxan_client_update_' + this.state.registry.CLIENT_VERSION, html:\"A new version of marxan-client is available (\" + this.state.registry.CLIENT_VERSION + \"). Go to Help | About for more information.\", type:\"Software Update\", showForRoles: [\"Admin\"]}]);\n    //see if there is a new version of the marxan-server software\n    if (this.state.marxanServer.server_version !== this.state.registry.SERVER_VERSION) this.addNotifications([{id:'marxan_server_update_' + this.state.registry.SERVER_VERSION, html:\"A new version of marxan-server is available (\" + this.state.registry.SERVER_VERSION + \"). Go to Help | Server Details for more information.\", type:\"Software Update\", showForRoles: [\"Admin\"]}]);\n    //check that there is enough disk space\n    if (this.state.marxanServer.disk_space < 1000)  {\n      this.addNotifications([{id:'hardware_1000', html:\"Disk space < 1Gb\", type:\"Hardware Issue\", showForRoles: [\"Admin\"]}]);\n    }else{\n      if (this.state.marxanServer.disk_space < 2000)  {\n        this.addNotifications([{id:'hardware_2000', html:\"Disk space < 2Gb\", type:\"Hardware Issue\", showForRoles: [\"Admin\"]}]);\n      }else{\n        if (this.state.marxanServer.disk_space < 3000) this.addNotifications([{id:'hardware_3000', html:\"Disk space < 3Gb\", type:\"Hardware Issue\", showForRoles: [\"Admin\"]}]);\n      }\n    }\n  }\n  \n  //hides the notifications from the UI\n  hideNotifications(){\n    this.setState({notificationsOpen: false});\n  }\n  \n  //add the passed notifications to the notifications state\n  addNotifications(notifications){\n    let _notifications = this.state.notifications;\n    //set the visibility of the notifications based on the users role, whether they have already been dismissed or if it has expired\n    notifications = notifications.map(item => {\n      let allowedForRole = (item.showForRoles.indexOf(this.state.userData.ROLE)>-1);\n      let notDismissed = (this.state.dismissedNotifications.indexOf(String(item.id)) === -1);\n      let notExpired = true;\n      //if an expiry date is set, then get this as a Date\n      if ((item.hasOwnProperty(\"expires\")) && (item.hasOwnProperty(\"expires\") && (item.expires !== \"\"))){\n    \t\ttry {\n          var d = Date.parse(item.expires); \n          if (new Date() > d) notExpired = false;\n    \t\t}\n    \t\tcatch (err) {\n    \t\t\t//invalid date so not expiry date\n    \t\t}\n      }\n      let visible = allowedForRole && notDismissed && notExpired;\n      return Object.assign(item, {visible: visible});  \n    });\n    _notifications.push.apply(_notifications, notifications);\n    this.setState({notifications: _notifications});\n  }\n  \n  //removes a notification\n  removeNotification(notification){\n    //remove the notification from the state\n    let _notifications  = this.state.notifications.filter(_notification => _notification.id !== notification.id);\n    //remove it in the users notifications.dat file\n    this.dismissNotification(notification);\n    //set the state\n    this.setState({notifications: _notifications});\n  }\n  \n  //dismisses a notification on the server\n  dismissNotification(notification){\n    this._get(\"dismissNotification?user=\" + this.state.user + \"&notificationid=\" + notification.id);\n  }\n  \n  //clears all of the dismissed notifications on the server\n  resetNotifications(){\n    this._get(\"resetNotifications?user=\" + this.state.user).then(()=>{\n      this.setState({notifications:[], dismissedNotifications:[]});\n      this.parseNotifications();  \n    });\n  }\n  \n  appendToFormData(formData, obj) {\n    //iterate through the object and add each key/value pair to the formData to post to the server\n    for (var key in obj) {\n      //only add non-prototype objects\n      if (obj.hasOwnProperty(key)) {\n        formData.append(key, obj[key]);\n      }\n    }\n    return formData;\n  }\n\n  //removes the keys from the object\n  removeKeys(obj, keys) {\n    keys.map((key) => {\n      delete obj[key];\n      return null;\n    });\n    return obj;\n  }\n\n  //updates all parameter in the user.dat file then updates the state (in userData)\n  updateUser(parameters, user = this.state.user) {\n    return new Promise((resolve, reject) => {\n      //remove the keys that are not part of the users information\n      parameters = this.removeKeys(parameters, [\"updated\", \"validEmail\"]);\n      //initialise the form data\n      let formData = new FormData();\n      //add the current user\n      formData.append(\"user\", user);\n      //append all the key/value pairs\n      this.appendToFormData(formData, parameters);\n      //post to the server\n      this._post(\"updateUserParameters\", formData).then((response) => {\n        // if succesfull write the state back to the userData key\n        if (this.state.user === user) this.setState({ userData: this.newUserData});\n        resolve();\n      }).catch((error) => {\n        reject(error);\n      });\n      //if we have updated the current user then save a local property so that if the changes are saved to the server then we can update the local state\n      if (this.state.user === user) this.newUserData = Object.assign(this.state.userData, parameters);\n    });\n  }\n\n  //saveOptions - the options are in the users data so we use the updateUser REST call to update them\n  saveOptions(options) {\n    this.updateUser(options);\n  }\n  //updates the project from the old version to the new version\n  upgradeProject(project){\n    return this._get(\"upgradeProject?user=\" + this.state.user + \"&project=\" + project);\n  }\n  \n  //updates the project parameters back to the server (i.e. the input.dat file)\n  updateProjectParams(project, parameters) {\n    //initialise the form data\n    let formData = new FormData();\n    //add the current user\n    formData.append(\"user\", this.state.owner);\n    //add the current project\n    formData.append(\"project\", project);\n    //append all the key/value pairs\n    this.appendToFormData(formData, parameters);\n    //post to the server and return a promise\n    return this._post(\"updateProjectParameters\", formData);\n  }\n\n  //updates a single parameter in the input.dat file directly\n  updateProjectParameter(parameter, value) {\n    let obj = {};\n    obj[parameter] = value;\n    //update the parameter and return a promise\n    return this.updateProjectParams(this.state.project, obj);\n  }\n\n  //updates the run parameters for the current project\n  updateRunParams(array) {\n    //convert the run parameters array into an object\n    let parameters = {};\n    array.map((obj) => { parameters[obj.key] = obj.value; return null; });\n    //update the project parameters\n    this.updateProjectParams(this.state.project, parameters).then((response) => {\n      //if succesfull write the state back \n      this.setState({ runParams: this.runParams});\n    });\n    //save the local state to be able to update the state on callback\n    this.runParams = array;\n  }\n\n  //gets the planning unit grids\n  getPlanningUnitGrids() {\n    this._get(\"getPlanningUnitGrids\").then((response) => {\n      this.setState({ planning_unit_grids: response.planning_unit_grids });\n    });\n  }\n\n  //loads a project\n  loadProject(project, user) {\n    return new Promise((resolve, reject) => {\n      //reset the results from any previous projects\n      this.resetResults();\n      this._get(\"getProject?user=\" + user + \"&project=\" + project).then((response) => {\n        //set the state for the app based on the data that is returned from the server\n        this.setState({ loggedIn: true, project: response.project, owner: user, runParams: response.runParameters, files: Object.assign(response.files), metadata: response.metadata, renderer: response.renderer, planning_units: response.planning_units, costnames: response.costnames,infoPanelOpen: true, resultsPanelOpen: true  });\n        //if there is a PLANNING_UNIT_NAME passed then change to this planning grid and load the results if there are any available\n        if (response.metadata.PLANNING_UNIT_NAME) {\n          this.changePlanningGrid(CONSTANTS.MAPBOX_USER + \".\" + response.metadata.PLANNING_UNIT_NAME).then(()=>{\n            //poll the server to see if results are available for this project - if there are these will be loaded\n            this.getResults(user, response.project).then((response)=> {\n              resolve(\"Project loaded\");\n            });\n          });\n        }\n        //set a local variable for the feature preprocessing - this is because we dont need to track state with these variables as they are not bound to anything\n        this.feature_preprocessing = response.feature_preprocessing;\n        //set a local variable for the protected area intersections - this is because we dont need to track state with these variables as they are not bound to anything\n        this.setState({protected_area_intersections:response.protected_area_intersections});\n        //set a local variable for the selected iucn category\n        this.previousIucnCategory = response.metadata.IUCN_CATEGORY;\n        //initialise all the interest features with the interest features for this project\n        this.initialiseInterestFeatures(response.metadata.OLDVERSION, response.features);\n        //preload the costs data instead of loading it when the user clicks on the Planning Units tab\n        this.getPlanningUnitsCostData();\n        //activate the project tab\n        this.project_tab_active();\n      }).catch((error) => {\n          if (error.indexOf('Logged on as read-only guest user')>-1){\n            this.setState({loggedIn: true});\n            resolve(\"No project loaded - logged on as read-only guest user'\");\n          }\n          if (error.indexOf(\"does not exist\")>-1){\n            //probably the last loaded project has been deleted - send some feedback and load another project\n            this.setSnackBar(\"Loading first available project\");\n            //passing an empty project to loadProject will load the first project\n            this.loadProject('', this.state.user);\n          }\n      });\n    });\n  }\n\n  //matches and returns an item in an object array with the passed id - this assumes the first item in the object is the id identifier\n  getArrayItem(arr, id) {\n    let tmpArr = arr.filter((item) => { return item[0] === id });\n    let returnValue = (tmpArr.length > 0) ? tmpArr[0] : undefined;\n    return returnValue;\n  }\n\n  //initialises the interest features based on the currently loading project\n  initialiseInterestFeatures(oldVersion, projectFeatures) {\n    //if the project is from an old version of marxan then the interest features can only come from the list of features in the current project\n    let features = (oldVersion) ? JSON.parse(JSON.stringify(projectFeatures)) : this.state.allFeatures; //make a copy of the projectFeatures\n    //get a list of the ids for the features that are in this project\n    var ids = projectFeatures.map((item) => {\n      return item.id;\n    });\n    //iterate through features to add the required attributes to be used in the app and to populate them based on the current project features\n    var outFeatures = features.map((item) => {\n      //see if the feature is in the current project\n      var projectFeature = (ids.indexOf(item.id) > -1) ? projectFeatures[ids.indexOf(item.id)] : null;\n      //get the preprocessing for that feature from the feature_preprocessing.dat file\n      let preprocessing = this.getArrayItem(this.feature_preprocessing, item.id);\n      //add the required attributes to the features - these will be populated in the function calls preprocessFeature (pu_area, pu_count) and pollResults (protected_area, target_area)\n      this.addFeatureAttributes(item, oldVersion);\n      //if the interest feature is in the current project then populate the data from that feature\n      if (projectFeature) {\n        item['selected'] = true;\n        item['preprocessed'] = preprocessing ? true : false;\n        item['pu_area'] = preprocessing ? preprocessing[1] : -1;\n        item['pu_count'] = preprocessing ? preprocessing[2] : -1;\n        item['spf'] = projectFeature['spf'];\n        item['target_value'] = projectFeature['target_value'];\n        item['occurs_in_planning_grid'] = item['pu_count'] > 0;\n      }\n      return item;\n    });\n    //get the selected feature ids\n    this.getSelectedFeatureIds();\n    //set the state\n    this.setState({ allFeatures: outFeatures, projectFeatures: outFeatures.filter((item) => { return item.selected }) });\n  }\n\n  //adds the required attributes for the features to work in the marxan web app - these are the default values\n  addFeatureAttributes(item, oldVersion){\n      // the -1 flag indicates that the values are unknown\n      item['selected'] = false; //if the feature is currently selected (i.e. in the current project)\n      item['preprocessed'] = false; //has the feature already been intersected with the planning grid to populate the puvspr.dat file\n      item['pu_area'] = -1; //the area of the feature within the planning grid\n      item['pu_count'] = -1; //the number of planning units that the feature intersects with\n      item['spf'] = 40; //species penalty factor\n      item['target_value'] = 17; //the target value for the feature to protect as a percentage\n      item['target_area'] = -1; //the area of the feature that must be protected to meet the targets percentage\n      item['protected_area'] = -1; //the area of the feature that is protected\n      item['feature_layer_loaded'] = false; //is the features distribution currently visible on the map\n      item['feature_puid_layer_loaded'] = false; //are the planning units that intersect the feature currently visible on the map\n      item['old_version'] = oldVersion; //true if the current project is an project imported from marxan for DOS\n      item['occurs_in_planning_grid'] = false; //does the feature occur in the planning grid\n      item['color'] = window.colors[item.id % window.colors.length]; //color for the map layer and analysis outputs\n      item['in_filter'] = true; //true if the feature is currently visible in the features dialog\n  }\n\n  //resets various variables and state in between users\n  resetResults() {\n    //reset the run\n    this.resetRun();\n    //reset the cost data\n    this.cost_data = undefined;\n    //reset any feature layers that are shown\n    this.hideFeatureLayer();\n  }\n  //resets state in between runs\n  resetRun(){\n    this.runMarxanResponse = {};\n    this.setState({ solutions: []});\n  }\n  //create a new user on the server\n  createNewUser(user, password, name, email) {\n    let formData = new FormData();\n    formData.append('user', user);\n    formData.append('password', password);\n    formData.append('fullname', name);\n    formData.append('email', email);\n    this._post(\"createUser\", formData).then((response) => {\n      //ui feedback\n      this.setSnackBar(response.info);\n      //close the register dialog\n      this.closeRegisterDialog();\n      //enter the new users name in the username box and a blank password\n      this.setState({user: user, password:''});\n    });\n  }\n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  ////////////////////////// PROJECTS\n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n  //REST call to create a new project from the wizard\n  createNewProject(project) {\n    let formData = new FormData();\n    formData.append('user', this.state.user);\n    formData.append('project', project.name);\n    formData.append('description', project.description);\n    formData.append('planning_grid_name', project.planning_grid_name);\n    var interest_features = [];\n    var target_values = [];\n    var spf_values = [];\n    project.features.forEach((item) => {\n      interest_features.push(item.id);\n      target_values.push(17);\n      spf_values.push(40);\n    });\n    //prepare the data that will populate the spec.dat file\n    formData.append('interest_features', interest_features.join(\",\"));\n    formData.append('target_values', target_values.join(\",\"));\n    formData.append('spf_values', spf_values.join(\",\"));\n    this._post(\"createProject\", formData).then((response) => {\n      this.setSnackBar(response.info);\n      this.setState({projectsDialogOpen: false });\n      this.loadProject(response.name, response.user);\n    });\n  }\n\n  createNewNationalProject(params){\n    return new Promise((resolve, reject) => {\n      //first create the planning grid\n      this.createNewPlanningUnitGrid(params.iso3, params.domain, params.areakm2, params.shape).then((response) => {\n        console.log(response);\n      }).catch((error) => {\n        console.log(error);\n      });\n      //create the features from\n      // world ecosystems\n      // species from gbif\n      // species from the red list\n    });\n  }\n  \n  //REST call to create a new import project from the wizard\n  createImportProject(project) {\n    let formData = new FormData();\n    formData.append('user', this.state.user);\n    formData.append('project', project);\n    return this._post(\"createImportProject\", formData);\n  }\n\n  //REST call to delete a specific project\n  deleteProject(user, project, silent = false) {\n    this._get(\"deleteProject?user=\" + user + \"&project=\" + project).then((response) => {\n      //refresh the projects list\n      this.getProjects();\n      //ui feedback\n      this.setSnackBar(response.info, silent); //we may not want to show the snackbar if we are deleting a project silently, e.g. on a rollback after an unsuccesful import\n      //see if the user deleted the current project\n      if (response.project === this.state.project) {\n        //ui feedback\n        this.setSnackBar(\"Current project deleted - loading first available\");\n        //load the next available project\n        this.state.projects.some((project) => {\n          if (project.name !== this.state.project) this.loadProject(project.name, this.state.user);\n          return project.name !== this.state.project;\n        });\n      }\n    });\n  }\n\n  //exports the project on the server and returns the *.mxw file\n  exportProject(user, project){\n    return new Promise((resolve, reject) => {\n      //switches the results pane to the log tab\n      this.log_tab_active();\n      //call the websocket \n      this._ws(\"exportProject?user=\" + user + \"&project=\" + project, this.wsMessageCallback.bind(this)).then((message) => {\n        //websocket has finished\n        resolve(this.state.marxanServer.endpoint + \"exports/\" + message.filename);\n      }).catch((error) => {\n        reject(error);\n      });\n    });\n  }\n\n  cloneProject(user, project) {\n    this._get(\"cloneProject?user=\" + user + \"&project=\" + project).then((response) => {\n      //refresh the projects list\n      this.getProjects();\n      //ui feedback\n      this.setSnackBar(response.info);\n    }).catch((error) => {\n        //do something\n    });\n  }\n\n  //rename a specific project on the server\n  renameProject(newName) {\n    return new Promise((resolve, reject) => {\n      if (newName !== '' && newName !== this.state.project) {\n        this._get(\"renameProject?user=\" + this.state.owner + \"&project=\" + this.state.project + \"&newName=\" + newName).then((response) => {\n          this.setState({ project: newName});\n          this.setSnackBar(response.info);\n          resolve(\"Project renamed\");\n        }).catch((error) => {\n          //do something\n        });\n      }\n    });\n  }\n  //rename the description for a specific project on the server\n  renameDescription(newDesc) {\n    return new Promise((resolve, reject) => {\n      this.updateProjectParameter(\"DESCRIPTION\", newDesc).then((response) => {\n        this.setState({ metadata: Object.assign(this.state.metadata, { DESCRIPTION: newDesc })});\n        resolve(\"Description renamed\");\n      });\n    });\n  }\n\n  getProjects() {\n    this._get(\"getProjects?user=\" + this.state.user).then((response) => {\n      let projects = [];\n      //filter the projects so that private ones arent shown\n      response.projects.forEach((project) => {\n        if (!(project.private && project.user !== this.state.user && this.state.userData.ROLE !== \"Admin\")) projects.push(project);\n      });\n      this.setState({ projects: projects});\n    });\n  }\n\n  /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  ////////CODE TO PREPROCESS AND RUN MARXAN\n  /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n  //run a marxan job on the server\n  runMarxan(e) {\n    //start the logging\n    this.startLogging();\n    //reset all of the protected and target areas for all features\n    this.resetProtectedAreas();\n    //reset the run results\n    this.resetRun();\n    //update the spec.dat file with any that have been added or removed or changed target or spf\n    this.updateSpecFile().then((value)=> {\n      //when the species file has been updated, update the planning unit file \n      this.updatePuFile();\n      //when the planning unit file has been updated, update the PuVSpr file - this does all the preprocessing using websockets\n      this.updatePuvsprFile().then((value) => {\n        //start the marxan job\n        this.startMarxanJob(this.state.owner, this.state.project).then((response) => {\n          //update the run log\n          this.getRunLogs();\n          if (!this.checkForErrors(response)) {\n            //run completed - get the results\n            this.getResults(response.user, response.project);\n            //switch to the features tab\n            this.features_tab_active();\n          }else{\n            //set state with no solutions\n            this.runFinished([]);\n          }\n        }).catch((error) => {\n            //reset the running state\n            this.marxanStopped(error);\n        }); //startMarxanJob\n      }).catch((error) => { //updatePuvsprFile error\n        console.error(error);\n      }); \n    }).catch((error) => { //updateSpecFile error\n      console.error(error);\n    });\n  }\n\n  //stops a process running on the server\n  stopProcess(pid) {\n    this._get(\"stopProcess?pid=\" + pid, 10000).catch((error) => {\n      //if the pid no longer exists then the state needs to be reset anyway\n      this.getRunLogs();\n    });\n  }\n\n  //ui feedback when marxan is stopped by the user\n  marxanStopped(error){\n    //update the run log\n    this.getRunLogs();\n  }\n  \n  resetProtectedAreas() {\n    //reset all of the results for allFeatures to set their protected_area and target_area to -1\n    this.state.allFeatures.forEach((feature) => {\n      feature.protected_area = -1;\n      feature.target_area = -1;\n    });\n  }\n\n  //updates the species file with any target values that have changed\n  updateSpecFile() {\n    let formData = new FormData();\n    formData.append('user', this.state.owner);\n    formData.append('project', this.state.project);\n    var interest_features = [];\n    var target_values = [];\n    var spf_values = [];\n    this.state.projectFeatures.forEach((item) => {\n      interest_features.push(item.id);\n      target_values.push(item.target_value);\n      spf_values.push(item.spf);\n    });\n    //prepare the data that will populate the spec.dat file\n    formData.append('interest_features', interest_features.join(\",\"));\n    formData.append('target_values', target_values.join(\",\"));\n    formData.append('spf_values', spf_values.join(\",\"));\n    return this._post(\"updateSpecFile\", formData);\n  }\n\n  //updates the planning unit file with any changes - not implemented yet\n  updatePuFile() {\n\n  }\n\n  updatePuvsprFile() {\n    //preprocess the features to create the puvspr.dat file on the server - this is done on demand when the project is run because the user may add/remove Conservation features willy nilly\n    let promise = this.preprocessAllFeatures();\n    return promise;\n  }\n\n  //preprocess a single feature\n  async preprocessSingleFeature(feature){\n    this.closeFeatureMenu();\n    this.startLogging();\n    this.preprocessFeature(feature);\n  }\n  \n  //preprocess synchronously, i.e. one after another\n  async preprocessAllFeatures() {\n    var feature;\n    //iterate through the features and preprocess the ones that need preprocessing\n    for (var i = 0; i < this.state.projectFeatures.length; ++i) {\n      feature = this.state.projectFeatures[i];\n      if (!feature.preprocessed){\n        await this.preprocessFeature(feature);\n      }else{\n        //\n      }\n    }\n  }\n\n  //preprocesses a feature using websockets - i.e. intersects it with the planning units grid and writes the intersection results into the puvspr.dat file ready for a marxan run - this will have no server timeout as its running using websockets\n  preprocessFeature(feature) {\n    return new Promise((resolve, reject) => {\n      //switches the results pane to the log tab\n      this.log_tab_active();\n      //call the websocket \n      this._ws(\"preprocessFeature?user=\" + this.state.owner + \"&project=\" + this.state.project + \"&planning_grid_name=\" + this.state.metadata.PLANNING_UNIT_NAME + \"&feature_class_name=\" + feature.feature_class_name + \"&alias=\" + feature.alias + \"&id=\" + feature.id, this.wsMessageCallback.bind(this)).then((message) => {\n        //websocket has finished\n        this.updateFeature(feature, {preprocessed: true, pu_count: Number(message.pu_count), pu_area: Number(message.pu_area), occurs_in_planning_grid: (Number(message.pu_count) >0)});\n        resolve(message);\n      }).catch((error) => {\n        reject(error);\n      });\n    });\n  }\n\n  //calls the marxan executeable and runs it getting the output streamed through websockets\n  startMarxanJob(user, project) {\n    return new Promise((resolve, reject) => {\n      //make the request to get the marxan data\n      this._ws(\"runMarxan?user=\" + user + \"&project=\" + project, this.wsMessageCallback.bind(this)).then((message) => {\n        resolve(message);\n      }).catch((error) => {\n        reject(error);\n      });\n    });\n  }\n\n  //gets the results for a project\n  getResults(user, project){\n    return new Promise((resolve, reject) => {\n      this._get(\"getResults?user=\" + user + \"&project=\" + project).then((response) => {\n        this.runCompleted(response);\n        resolve(\"Results retrieved\");\n      }).catch((error) => {\n        reject(\"Unable to get results\");\n      });\n    });\n  }\n  \n  //run completed\n  runCompleted(response) {\n    var solutions;\n    //get the response and store it in this component\n    this.runMarxanResponse = response;\n    //if we have some data to map then set the state to reflect this\n    if (this.runMarxanResponse.ssoln && this.runMarxanResponse.ssoln.length > 0) {\n      this.setSnackBar(response.info);\n      //render the sum solution map\n      this.renderSolution(this.runMarxanResponse.ssoln, true);\n      //create the array of solutions to pass to the InfoPanels table\n      solutions = response.summary;\n      //the array data are in the format \"Run_Number\",\"Score\",\"Cost\",\"Planning_Units\" - so create an array of objects to pass to the outputs table\n      solutions = solutions.map((item) => {\n        return { \"Run_Number\": item[0], \"Score\": Number(item[1]).toFixed(1), \"Cost\": Number(item[2]).toFixed(1), \"Planning_Units\": item[3], \"Missing_Values\": item[12] };\n      });\n      //add in the row for the summed solutions\n      solutions.splice(0, 0, { 'Run_Number': 'Sum', 'Score': '', 'Cost': '', 'Planning_Units': '', 'Missing_Values': '' });\n      //select the first row in the solutions table\n      \n      //update the amount of each target that is protected in the current run from the output_mvbest.txt file\n      this.updateProtectedAmount(this.runMarxanResponse.mvbest);\n    }else{\n      solutions = [];\n    }\n    //set state\n    this.runFinished(solutions);\n  }\n\n  runFinished(solutions){\n    this.setState({ solutions: solutions });\n  }\n  \n  //gets the protected area information in m2 from the marxan run and populates the interest features with the values\n  updateProtectedAmount(mvData) {\n    //copy the current project features state\n    let features = this.state.allFeatures;\n    //iterate through the features and set the protected amount\n    features.forEach((feature) => {\n      //get the matching item in the mvbest data\n      let mvbestItemIndex = mvData.findIndex((item) => { return item[0] === feature.id; });\n      if (mvbestItemIndex>-1){ //the mvbest file may not contain the data for the feature if the project has not been run since the feature was added\n        //get the missing values item for the specific feature\n        let mvItem = mvData[mvbestItemIndex];\n        Object.assign(feature, {target_area: mvItem[2], protected_area: mvItem[3]});\n      }\n    });\n    //update allFeatures and projectFeatures with the new value\n    this.setFeaturesState(features);\n  }\n\n  /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  ////////IMPORT PROJECT ROUTINES\n  /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  \n  importProject(project, description, zipFilename, files, planning_grid_name){\n    return new Promise((resolve, reject) => {\n      let feature_class_name = \"\", uploadId;\n      //start the logging\n      this.startLogging();\n      //set the spinner and lot states\n      this.log({method:'importProject',status:'Importing',info:'Starting import..'});\n      //create a new project\n      //TODO: SORT OUT ROLLING BACK IF AN IMPORT FAILS - AND DONT PROVIDE REST CALLS TO DELETE PLANNING UNITS\n      this.createImportProject(project).then((response) => {\n        this.log({method:'importProject',status:'Importing',info:\"Project '\" + project + \"' created\"});\n        //create the planning unit file\n        this.importZippedShapefileAsPu(zipFilename, planning_grid_name, \"Imported with the project '\" + project + \"'\").then((response) => {\n          //get the planning unit feature_class_name\n          feature_class_name = response.feature_class_name;\n          //get the uploadid\n          uploadId = response.uploadId;\n          this.log({method:'importProject',status:'Importing',info:\"Planning grid imported\"});\n          //upload all of the files from the local system\n          this.uploadFiles(files, project).then((response) => {\n            this.log({method:'importProject',status:'Importing',info:\"All files uploaded\"});\n            //upgrade the project to the new version of Marxan - this adds the necessary settings in the project file and calculates the statistics for species in the puvspr.dat and puts them in the feature_preprocessing.dat file\n            this.upgradeProject(project).then((response) => {\n              this.log({method:'importProject',status:'Importing',info:\"Project updated to new version\"});\n              //update the project file with the new settings - we also have to set the OUTPUTDIR to the standard 'output' as some imported projects may have set different output folders, e.g. output_BLMBEST\n              let d = new Date();\n              let formattedDate = (\"00\" + d.getDate()).slice(-2) + \"/\" + (\"00\" + (d.getMonth() + 1)).slice(-2) + \"/\" + d.getFullYear().toString().slice(-2) + \" \" + (\"00\" + d.getHours()).slice(-2) + \":\" + (\"00\" + d.getMinutes()).slice(-2) + \":\" + (\"00\" + d.getSeconds()).slice(-2);\n              this.updateProjectParams(project, {DESCRIPTION: description + \" (imported from an existing Marxan project)\", CREATEDATE: formattedDate, OLDVERSION: 'True', PLANNING_UNIT_NAME: feature_class_name, OUTPUTDIR: 'output'}).then((response) => {\n                // wait for the tileset to upload to mapbox\n                this.pollMapbox(uploadId).then((response) => {\n                  //refresh the planning grids\n                  this.getPlanningUnitGrids();\n                  this.log({method:'importProject',status:'Finished',info:\"Import complete\"});\n                  //now open the project\n                  this.loadProject(project, this.state.user);\n                  resolve(\"Import complete\");\n                });\n              }).catch((error) => { //updateProjectParams error\n                  reject(error);\n              });\n            }).catch((error) => { //upgradeProject error\n              reject(error);\n            }); \n          }).catch((error) => { //uploadFiles error\n              reject(error);\n          }); \n        }).catch((error) => { //importZippedShapefileAsPu error - delete the project\n          this.deleteProject(this.state.user, project, true);\n          reject(error);\n        });\n      }).catch((error) => { //createImportProject failed - the project already exists\n        reject(error);\n      });\n    });\n  }\n   \n  //uploads a list of files to the current project\n  async uploadFiles(files, project) {\n    var file, filepath;\n    for (var i = 0; i < files.length; i++) {\n      file = files.item(i);\n      //see if it is a marxan data file\n      if (file.name.slice(-4) === '.dat'){\n        const formData = new FormData();\n        formData.append('user', this.state.owner);\n        formData.append('project', project);\n        //the webkitRelativePath will include the folder itself so we have to remove this, e.g. 'Marxan project/input/puvspr.dat' -> '/input/puvspr.dat'\n        filepath = file.webkitRelativePath.split(\"/\").slice(1).join(\"/\");\n        formData.append('filename', filepath);\n        formData.append('value', file);\n        this.log({method:'uploadFiles',status:'Uploading',info:\"Uploading: \" + file.webkitRelativePath});\n        await this._post(\"uploadFile\", formData);\n      }\n    }\n  }\n\n  //uploads a single file to the current projects input folder\n  uploadFileToProject(value, filename, project){\n    return new Promise((resolve, reject) => {\n      const formData = new FormData();\n      formData.append('user', this.state.owner);\n      formData.append('project', this.state.project);\n      formData.append('filename', 'input/' + filename);\n      formData.append('value', value);\n  \t\tthis._post(\"uploadFile\", formData).then(function(response){\n  \t\t  resolve(response);\n  \t\t});\n    });\n  }\n  \n  //uploads a single file to a specific folder - value is the filename\n  uploadFileToFolder(value, filename, destFolder){\n    return new Promise((resolve, reject) => {\n  \t\tthis.setState({ loading: true });\n  \t\tconst formData = new FormData();\n  \t\t//the binary data for the file\n  \t\tformData.append('value', value); \n  \t\t//the filename\n  \t\tformData.append('filename', filename);\n  \t\t//the folder to upload to \n  \t\tformData.append('destFolder', destFolder);\n  \t\tthis._post(\"uploadFileToFolder\", formData).then(function(response){\n  \t\t  resolve(response);\n  \t\t});\n    });\n\t}\n\n\n  //pads a number with zeros to a specific size, e.g. pad(9,5) => 00009\n  pad(num, size) {\n    var s = num + \"\";\n    while (s.length < size) s = \"0\" + s;\n    return s;\n  }\n\n  //imports a project from an mxd file\n  importMXWProject(project, description, filename){\n    return new Promise((resolve, reject) => {\n      this.startLogging();\n      this._ws(\"importProject?user=\" + this.state.user + \"&project=\" + project + \"&filename=\" + filename + \"&description=\" + description, this.wsMessageCallback.bind(this)).then((message) => {\n        //websocket has finished \n        resolve(message);\n        //refresh the project features as there may be new ones\n        this.refreshFeatures();\n        //load the project\n        this.loadProject(project,this.state.user);\n      }).catch((error) => {\n        //do something\n        reject(error);\n      });\n    });\n  }\n  \n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  ////////////////////////// SOLUTIONS\n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n  //load a specific solution for the current project\n  loadSolution(solution) {\n    if (solution === \"Sum\") {\n      this.updateProtectedAmount(this.runMarxanResponse.mvbest);\n      //load the sum of solutions which will already be loaded\n      this.renderSolution(this.runMarxanResponse.ssoln, true);\n    }\n    else {\n      this.getSolution(this.state.owner, this.state.project, solution).then((response) => {\n          this.updateProtectedAmount(response.mv);\n          this.renderSolution(response.solution, false);\n      });\n    }\n  }\n\n  //load a solution from another project - used in the clumping dialog - when the solution is loaded the paint properties are set on the individual maps through state changes\n  loadOtherSolution(user, project, solution) {\n    this.getSolution(user, project, solution).then((response) => {\n      var paintProperties = this.getPaintProperties(response.solution, false, false);\n      //get the project that matches the project name from the this.projects property - this was set when the projectGroup was created\n      if (this.projects){\n        var _projects = this.projects.filter((item) => {return item.projectName === project});\n        //get which clump it is\n        var clump = _projects[0].clump;\n        switch (clump) {\n          case 0:\n            this.setState({map0_paintProperty: paintProperties});\n            break;\n          case 1:\n            this.setState({map1_paintProperty: paintProperties});\n            break;\n          case 2:\n            this.setState({map2_paintProperty: paintProperties});\n            break;\n          case 3:\n            this.setState({map3_paintProperty: paintProperties});\n            break;\n          case 4:\n            this.setState({map4_paintProperty: paintProperties});\n            break;\n          default:\n            break;\n        }\n      }\n    });\n  }\n  \n  //gets a solution and returns a promise\n  getSolution(user, project, solution){\n    return this._get(\"getSolution?user=\" + user + \"&project=\" + project + \"&solution=\" + solution);\n  }\n  \n  //gets the total number of planning units in the ssoln and outputs the statistics of the distribution to state, e.g. 2 PUs with a value of 1, 3 with a value of 2 etc.\n  getssolncount(data) {\n    let total = 0;\n    let summaryStats = [];\n    data.map((item) => {\n      summaryStats.push({ number: item[0], count: item[1].length });\n      total += item[1].length;\n      return null;\n    });\n    this.setState({ summaryStats: summaryStats });\n    return total;\n  }\n  //gets a sample of the data to be able to do a classification, e.g. natural breaks, jenks etc.\n  getssolnSample(data, sampleSize) {\n    let sample = [],\n      num = 0;\n    let ssolnLength = this.getssolncount(data);\n    data.map((item) => {\n      //use the ceiling function to force outliers to be in the classification, i.e. those planning units that were only selected in 1 solution\n      num = Math.ceil((item[1].length / ssolnLength) * sampleSize);\n      sample.push(Array(num, ).fill(item[0]));\n      return null;\n    });\n    return [].concat.apply([], sample);\n  }\n\n  //get all data from the ssoln arrays\n  getSsolnData(data) {\n    let arrays = data.map((item) => {\n      return item[1];\n    });\n    return [].concat.apply([], arrays);\n  }\n\n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  ////////////////////////// CLASSIFICATION AND RENDERING\n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n  //gets the classification and colorbrewer object for doing the rendering\n  classifyData(data, numClasses, colorCode, classification) {\n    //get a sample of the data to make the renderer classification\n    let sample = this.getssolnSample(data, 1000); //samples dont work\n    // let sample = this.getSsolnData(data); //get all the ssoln data\n    //set the data \n    this.state.brew.setSeries(sample);\n    //if the colorCode is opacity then calculate the rgba values dynamically and add them to the color schemes\n    if (colorCode === 'opacity') {\n      //see if we have already created a brew color scheme for opacity with NUMCLASSES\n      if ((this.state.brew.colorSchemes.opacity === undefined)  || (this.state.brew.colorSchemes.opacity && !this.state.brew.colorSchemes.opacity[this.state.renderer.NUMCLASSES])) {\n        //get a copy of the brew state\n        let brewCopy = this.state.brew;\n        let newBrewColorScheme = Array(Number(this.state.renderer.NUMCLASSES)).fill(\"rgba(255,0,136,\").map((item, index) => { return item + ((1 / this) * (index + 1)) + \")\"; }, this.state.renderer.NUMCLASSES);\n        //add the new color scheme\n        if (brewCopy.colorSchemes.opacity === undefined) brewCopy.colorSchemes.opacity = [];\n        brewCopy.colorSchemes.opacity[this.state.renderer.NUMCLASSES] = newBrewColorScheme;\n        //set the state\n        this.setState({brew: brewCopy});\n      }\n    }\n    //set the color code - see the color theory section on Joshua Tanners page here https://github.com/tannerjt/classybrew - for all the available colour codes\n    this.state.brew.setColorCode(colorCode);\n    //get the maximum number of colors in this scheme\n    let colorSchemeLength = getMaxNumberOfClasses(this.state.brew, colorCode);\n    //check the color scheme supports the passed number of classes\n    if (numClasses > colorSchemeLength) {\n      //set the numClasses to the max for the color scheme\n      numClasses = colorSchemeLength;\n      //reset the renderer\n      this.setState({ renderer: Object.assign(this.state.renderer, { NUMCLASSES: numClasses }) });\n    }\n    //set the number of classes\n    this.state.brew.setNumClasses(numClasses);\n    //set the classification method - one of equal_interval, quantile, std_deviation, jenks (default)\n    this.state.brew.classify(classification);\n    this.setState({ dataBreaks: this.state.brew.getBreaks()});\n  }\n\n  //called when the renderer state has been updated - renders the solution and saves the renderer back to the server\n  rendererStateUpdated(parameter, value) {\n    this.renderSolution(this.runMarxanResponse.ssoln, true);\n    if (this.state.userData.ROLE !== \"ReadOnly\") this.updateProjectParameter(parameter, value);\n  }\n  //change the renderer, e.g. jenks, natural_breaks etc.\n  changeRenderer(renderer) {\n    this.setState({ renderer: Object.assign(this.state.renderer, { CLASSIFICATION: renderer }) }, () => {\n      this.rendererStateUpdated(\"CLASSIFICATION\", renderer);\n    });\n  }\n  //change the number of classes of the renderer\n  changeNumClasses(numClasses) {\n    this.setState({ renderer: Object.assign(this.state.renderer, { NUMCLASSES: numClasses }) }, () => {\n      this.rendererStateUpdated(\"NUMCLASSES\", numClasses);\n    });\n  }\n  //change the color code of the renderer\n  changeColorCode(colorCode) {\n    //set the maximum number of classes that can be selected in the other select boxes\n    if (this.state.renderer.NUMCLASSES > this.state.brew.getNumClasses()) {\n      this.setState({ renderer: Object.assign(this.state.renderer, { NUMCLASSES: this.state.brew.getNumClasses() }) });\n    }\n    this.setState({ renderer: Object.assign(this.state.renderer, { COLORCODE: colorCode }) }, () => {\n      this.rendererStateUpdated(\"COLORCODE\", colorCode);\n    });\n  }\n  //change how many of the top classes only to show\n  changeShowTopClasses(numClasses) {\n    this.setState({ renderer: Object.assign(this.state.renderer, { TOPCLASSES: numClasses }) }, () => {\n      this.rendererStateUpdated(\"TOPCLASSES\", numClasses);\n    });\n  }\n  //renders the solution - data is the REST response and sum is a flag to indicate if the data is the summed solution (true) or an individual solution (false)\n  renderSolution(data, sum) {\n    if (!data) return;\n    var paintProperties = this.getPaintProperties(data, sum, true);\n    //set the render paint property\n    this.map.setPaintProperty(CONSTANTS.RESULTS_LAYER_NAME, \"fill-color\", paintProperties.fillColor);\n    this.map.setPaintProperty(CONSTANTS.RESULTS_LAYER_NAME, \"fill-outline-color\", paintProperties.oulineColor);\n  }\n\n  //gets the various paint properties for the planning unit layer - if setRenderer is true then it will also update the renderer in the Legend panel\n  getPaintProperties(data, sum, setRenderer){\n    //build an expression to get the matching puids with different numbers of 'numbers' in the marxan results\n    var fill_color_expression = this.initialiseFillColorExpression(\"puid\");\n    var fill_outline_color_expression = this.initialiseFillColorExpression(\"puid\");\n    if (data.length>0) {\n      var color, visibleValue, value;\n      //create the renderer using Joshua Tanners excellent library classybrew - available here https://github.com/tannerjt/classybrew\n      if (setRenderer) this.classifyData(data, Number(this.state.renderer.NUMCLASSES), this.state.renderer.COLORCODE, this.state.renderer.CLASSIFICATION);\n      //if only the top n classes will be rendered then get the visible value at the boundary\n      if (this.state.renderer.TOPCLASSES < this.state.renderer.NUMCLASSES) {\n        let breaks = this.state.brew.getBreaks();\n        visibleValue = breaks[this.state.renderer.NUMCLASSES - this.state.renderer.TOPCLASSES + 1];\n      }\n      else {\n        visibleValue = 0;\n      }\n      // the rest service sends the data grouped by the 'number', e.g. [1,[23,34,36,43,98]],[2,[16,19]]\n      data.forEach((row, index) => {\n        if (sum) { //multi value rendering\n          value = row[0];\n          //for each row add the puids and the color to the expression, e.g. [35,36,37],\"rgba(255, 0, 136,0.1)\"\n          color = this.state.brew.getColorInRange(value);\n          //add the color to the expression - transparent if the value is less than the visible value\n          if (value >= visibleValue) {\n            fill_color_expression.push(row[1], color);\n            fill_outline_color_expression.push(row[1], \"rgba(150, 150, 150, 0.6)\"); //gray outline\n          }\n          else {\n            fill_color_expression.push(row[1], \"rgba(0, 0, 0, 0)\");\n            fill_outline_color_expression.push(row[1], \"rgba(0, 0, 0, 0)\");\n          }\n        }\n        else { //single value rendering\n          fill_color_expression.push(row[1], \"rgba(255, 0, 136,1)\");\n          fill_outline_color_expression.push(row[1], \"rgba(150, 150, 150, 0.6)\"); //gray outline\n        }\n      });\n      // Last value is the default, used where there is no data\n      fill_color_expression.push(\"rgba(0,0,0,0)\");\n      fill_outline_color_expression.push(\"rgba(0,0,0,0)\");\n    }else{\n      fill_color_expression = \"rgba(0, 0, 0, 0)\";\n      fill_outline_color_expression = \"rgba(0, 0, 0, 0)\";\n    }\n    return {fillColor: fill_color_expression, oulineColor: fill_outline_color_expression};\n  }\n  \n  //initialises the fill color expression for matching on attributes values\n  initialiseFillColorExpression(attribute){\n    return [\"match\", [\"get\", attribute]];\n  }\n  \n  //renders the planning units edit layer according to the type of layer and pu status \n  renderPuEditLayer() {\n    let expression;\n    if (this.state.planning_units.length > 0) {\n      //build an expression to get the matching puids with different statuses in the planning units data\n      expression = [\"match\", [\"get\", \"puid\"]];\n      // the rest service sends the data grouped by the status, e.g. [1,[23,34,36,43,98]],[2,[16,19]]\n      this.state.planning_units.forEach((row, index) => {\n        var color;\n        //get the status\n        switch (row[0]) {\n          // case 1: //The PU will be included in the initial reserve system but may or may not be in the final solution.\n          //   color = \"rgba(63, 191, 63, 1)\";\n          //   break;\n          case 2: //The PU is fixed in the reserve system (“locked in”). It starts in the initial reserve system and cannot be removed.\n            color = \"rgba(63, 63, 191, 1)\";\n            break;\n          case 3: //The PU is fixed outside the reserve system (“locked out”). It is not included in the initial reserve system and cannot be added.\n            color = \"rgba(191, 63, 63, 1)\";\n            break;\n          default:\n            break;\n        }\n        //add the color to the expression \n        expression.push(row[1], color);\n      });\n      // Last value is the default, used where there is no data - i.e. for all the planning units with a status of 0\n      expression.push(\"rgba(150, 150, 150, 0)\");\n    }\n    else {\n      //there are no statuses apart from the default 0 status so have a single renderer\n      expression = \"rgba(150, 150, 150, 0)\";\n    }\n    //set the render paint property\n    this.map.setPaintProperty(CONSTANTS.STATUS_LAYER_NAME, \"line-color\", expression);\n    this.map.setPaintProperty(CONSTANTS.STATUS_LAYER_NAME, \"line-width\", CONSTANTS.STATUS_LAYER_LINE_WIDTH);\n  }\n\n  //renders the planning units cost layer according to the cost for each planning unit\n  renderPuCostLayer(cost_data) {\n    return new Promise((resolve, reject) => {\n      let expression;\n      if (cost_data.data.length > 0) {\n        //build an expression to get the matching puids with different costs\n        expression = [\"match\", [\"get\", \"puid\"]];\n        //iterate through the cost data and set the expressions\n        cost_data.data.forEach((row, index) => {\n          //get the branch labels, i.e. the puids for this histogram bin - they could be empty\n          if (row[1].length > 0) expression.push(row[1], CONSTANTS.COST_COLORS[index]);\n        });\n        // Last value is the default\n        expression.push(\"rgba(150, 150, 150, 0)\");\n      }\n      else {\n        //there are no costs apart from the default 0 status so have a single renderer\n        expression = \"rgba(150, 150, 150, 0.7)\";\n      }\n      //set the render paint property\n      this.map.setPaintProperty(CONSTANTS.COSTS_LAYER_NAME, \"fill-color\", expression);\n      //set the min/max properties in the layer as metadata\n      this.setLayerMetadata(CONSTANTS.COSTS_LAYER_NAME, {min: cost_data.min, max: cost_data.max});\n      //show the layer\n      this.showLayer(CONSTANTS.COSTS_LAYER_NAME);\n      resolve(\"Costs rendered\");\n    });\n  }\n\n  //convenience method to get the rendered features safely and not to show and error message if the layer doesnt exist in the map style\n  getRenderedFeatures(pt, layers){\n    let features = [];\n    if (this.map.getLayer(layers[0])) features = this.map.queryRenderedFeatures(pt, { layers: layers });\n    return features;\n  }\n\n  ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  ////////////////////////// MAP INSTANTIATION, LAYERS ADDING/REMOVING AND INTERACTION\n  ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n  //instantiates the mapboxgl map\n  createMap(url){\n    this.map = new mapboxgl.Map({\n      container: this.mapContainer,\n      style: url,\n      center: [0, 0],\n      zoom: 2\n    });\n    //add event handlers for the load and error events\n    this.map.on(\"load\", this.mapLoaded.bind(this));\n    this.map.on(\"error\", this.mapError.bind(this));\n    //click event\n    this.map.on(\"click\", this.mapClick.bind(this));\n    //style change, this includes adding/removing layers and showing/hiding layers\n    this.map.on(\"styledata\", this.mapStyleChanged.bind(this));\n  }\n\n  mapLoaded(e) {\n    // this.map.addControl(new mapboxgl.FullscreenControl(), 'bottom-right'); // currently full screen hides the info panel and setting position:absolute and z-index: 10000000000 doesnt work properly\n    this.map.addControl(new mapboxgl.ScaleControl());\n    this.map.addControl(new mapboxgl.NavigationControl(), 'bottom-right');\n    this.map.addControl(new HomeButton());\n    //create the draw controls for the map\n    this.mapboxDrawControls = new MapboxDraw({\n      displayControlsDefault: false,\n      controls: {\n        polygon: true,\n        trash: true\n      },\n      defaultMode: 'draw_polygon'\n    });\n    this.map.on(\"moveend\", (evt) => {\n      if (this.state.clumpingDialogOpen) this.updateMapCentreAndZoom(); //only update the state if the clumping dialog is open\n    });\n    this.map.on('draw.create', this.polygonDrawn.bind(this));\n  }\n\n  updateMapCentreAndZoom(){\n    this.setState({mapCentre: this.map.getCenter(), mapZoom: this.map.getZoom()}); \n  }\n\n  //catch all event handler for map errors\n  mapError(e){\n    var message = \"\";\n    switch (e.error.message) {\n      case 'Not Found':\n        message = \"The tileset '\" + e.source.url + \"' was not found\";\n        break;\n      case \"Bad Request\":\n        message = \"The tileset from source '\" + e.sourceId + \"' was not found. See <a href='\" + CONSTANTS.ERRORS_PAGE + \"#the-tileset-from-source-source-was-not-found' target='blank'>here</a>\";\n        break;\n      default:\n        message = e.error.message;\n        break;\n    }\n    if (message!==\"http status 200 returned without content.\"){\n      this.setSnackBar(\"MapError: \" + message);\n      console.error(message);\n    }  \n  } \n  \n  //\n  mapClick(e){\n    //if the user is not editing planning units or creating a new feature then show the identify features for the clicked point\n    if ((!this.state.puEditing)&&(!this.map.getSource('mapbox-gl-draw-cold'))){ \n      //get a list of the layers that we want to query for features\n      var featureLayers = this.getLayers([CONSTANTS.LAYER_TYPE_PLANNING_UNITS, CONSTANTS.LAYER_TYPE_SUMMED_SOLUTIONS, CONSTANTS.LAYER_TYPE_PROTECTED_AREAS, CONSTANTS.LAYER_TYPE_FEATURE_LAYER]);\n      //get the feature layer ids\n      let featureLayerIds = featureLayers.map(item=>item.id);\n      //get a list of all of the rendered features that were clicked on - these will be planning units, features and protected areas\n      var clickedFeatures = this.getRenderedFeatures(e.point, featureLayerIds);\n      //set the popup point\n      this.setState({ popup_point: e.point });\n      //get any planning unit features under the mouse\n      let planningUnitFeatures = this.getFeaturesByLayerStartsWith(clickedFeatures, \"marxan_pu_\");\n      if (planningUnitFeatures.length && planningUnitFeatures[0].properties.puid) this.getPUData(planningUnitFeatures[0].properties.puid);\n      //get any conservation features under the mouse\n      let identifyFeatures = this.getFeaturesByLayerStartsWith(clickedFeatures, \"marxan_feature_layer_\");\n      //there may be dupliate conservation features (e.g. with GBIF data) so get a unique list of sourceLayers\n      let sourceLayers = identifyFeatures.map(item=>item.sourceLayer);\n      let uniqueSourceLayers = Array.from(new Set(sourceLayers));\n      //get the full features data from the state.projectFeatures array\n      identifyFeatures = uniqueSourceLayers.map(item=>{\n        let matchingItem = this.state.projectFeatures.filter(item2=>{\n          return item2.feature_class_name===item; //the features feature_class_name is the name of the sourcelayer in the vector tile\n        })[0];\n        return matchingItem;\n      });\n      //get any protected area features under the mouse\n      let identifyProtectedAreas = this.getFeaturesByLayerStartsWith(clickedFeatures, \"marxan_wdpa_\");\n      //set the state to populate the identify popup\n      this.setState({identifyVisible: true, identifyFeatures: identifyFeatures, identifyProtectedAreas:identifyProtectedAreas});\n    } \n  }\n  \n  //called when layers are added/removed or shown/hidden\n  mapStyleChanged(e){\n    //update legend items\n    this.updateLegend();\n  }\n  //after a layer has been added/removed/shown/hidden update the legend items\n  updateLegend(){\n    let layers = this.map.getStyle().layers;\n    //get the visible marxan layers\n    let visibleLayers = layers.filter((item) => {\n      if (item.id.substr(0,7) === 'marxan_') {\n        return (item.layout.visibility === 'visible');\n      }else{\n        return false;\n      }\n    });\n    //set the state\n    this.setState({visibleLayers: visibleLayers});\n  }\n  //gets a set of features that have a layerid that starts with the passed text\n  getFeaturesByLayerStartsWith(features, startsWith){\n    let matchedFeatures = features.filter(item=>{\n      return item.layer.id.substr(0,(startsWith.length)) === startsWith;\n    });\n    return matchedFeatures;\n  }\n  \n  //gets a list of features for the planning unit\n  getPUData(puid){\n    this._get(\"getPUData?user=\" + this.state.owner + \"&project=\" + this.state.project + \"&puid=\" + puid).then((response) => {\n      if (response.data.features.length){ //if there are some features for the planning unit join the ids onto the full feature data from the state.projectFeatures array\n        this.joinArrays(response.data.features, this.state.projectFeatures,\"species\",\"id\");\n      }\n      //set the state to update the identify popup\n      this.setState({identifyPlanningUnits:{puData: response.data.pu_data, features: response.data.features}});\n    });\n  }\n  \n  //joins a set of data from one object array to another \n  joinArrays(arr1,arr2,leftId,rightId){\n    let outputArr = [];\n    arr1.forEach(item=>{\n      //get the matching item in the second array\n      let matchingItem = arr2.filter(arr2item=>arr2item[rightId] === item[leftId]);\n      if (matchingItem.length) outputArr.push(Object.assign(item, matchingItem[0]));\n    });\n    return outputArr;\n  }\n  \n  //hides the identify popup\n  hideIdentifyPopup(e){\n    this.setState({identifyVisible:false, identifyPlanningUnits:{}});\n  }\n  \n  //gets a Mapbox Style Specification JSON object from the passed ESRI style endpoint\n  getESRIStyle(styleUrl){\n    return new Promise((resolve, reject) => {\n      fetch(styleUrl) //fetch the style json\n        .then(response => {\n          return response.json()\n            .then(style => {\n              // next fetch metadata for the raw tiles\n              const TileJSON = style.sources.esri.url;\n              fetch(TileJSON)\n                .then(response => {\n                    return response.json()\n                    .then(metadata => {\n                      let tilesurl = (metadata.tiles[0].substr(0,1) === \"/\") ? TileJSON + metadata.tiles[0] : TileJSON + '/' + metadata.tiles[0];\n                      style.sources.esri = {\n                        type: 'vector',\n                        scheme: 'xyz',\n                        tilejson: metadata.tilejson || '2.0.0',\n                        format: (metadata.tileInfo && metadata.tileInfo.format) || 'pbf',\n                        /* mapbox-gl-js does not respect the indexing of esri tiles because we cache to different zoom levels depending on feature density, in rural areas 404s will still be encountered. more info: https://github.com/mapbox/mapbox-gl-js/pull/1377*/\n                        // index: metadata.tileMap ? style.sources.esri.url + '/' + metadata.tileMap : null,\n                        maxzoom: 15,  \n                        tiles: [\n                          tilesurl\n                        ],\n                        description: metadata.description,\n                        name: metadata.name\n                      };\n                      resolve(style);\n                    });\n                });\n            });\n        });\n    });\n  }\n\n  //sets the basemap either on project load, or if the user changes it\n  setBasemap(basemap){\n    return new Promise((resolve, reject) => {\n      //change the state\n      this.setState({basemap: basemap.name});\n      //get a valid map style\n      this.getValidStyle(basemap).then((style)=>{\n        //load the style\n        this.loadMapStyle(style).then((evt) => {\n          //add the WDPA layer \n          this.addWDPASource();\n          this.addWDPALayer();\n          //add the planning unit layers (if a project has already been loaded)\n          if (this.state.tileset) {\n            this.addPlanningGridLayers(this.state.tileset);\n            //get the results, if any\n            if (this.state.owner) this.getResults(this.state.owner, this.state.project);\n            //filter the wdpa vector tiles - NO LONGER USED\n            // this.filterWdpaByIucnCategory(this.state.metadata.IUCN_CATEGORY);\n            //turn on/off layers depending on which tab is selected\n            if (this.state.activeTab === \"planning_units\") this.pu_tab_active();\n            resolve();\n          }else{\n            resolve();\n          }\n        });\n      });\n    });\n  }\n\n  //gets the style JSON either as a valid TileJSON object or as a url to a valid TileJSON object\n  getValidStyle(basemap){\n    return new Promise((resolve, reject) => {\n      switch (basemap.provider) {\n        case 'esri':\n          //the style json will be loaded dynamically from an esri endpoint and parsed to produce a valid TileJSON object\n          this.getESRIStyle(basemap.id).then((styleJson)=>{\n            resolve(styleJson);\n          });  \n          break;\n        case 'local':\n          //blank background\n          resolve({\n            \"version\": 8,\n            \"name\": \"blank\",\n            \"sources\": {\n              \"openmaptiles\": {\n                \"type\": \"vector\",\n                \"url\": \"\"\n              }\n            },\n            \"layers\": [{\n              \"id\": \"background\",\n              \"type\": \"background\",\n              \"paint\": {\n                \"background-color\": \"#ffffff\"\n              }\n            }]\n          });\n          break;\n        default:\n          // the style is a url - just return the url - either mapbox or jrc provided\n          resolve(CONSTANTS.MAPBOX_STYLE_PREFIX + basemap.id);\n          break;\n      }\n    });\n  }\n  \n  //loads the maps style using either a url to a Mapbox Style Specification file or a JSON object\n  loadMapStyle(style){\n    return new Promise((resolve, reject) => {\n      if (!this.map) {\n        this.createMap(style);\n      }else{\n        //request the style\n        this.map.setStyle(style, {diff:false});\n      }\n      this.map.on('style.load', (evt) => {\n        resolve(\"Map style loaded\");\n      });\n    });\n  }\n  \n  //called when the planning grid layer has changed, i.e. the project has changed\n  changePlanningGrid(tilesetid) {\n    return new Promise((resolve, reject) => {\n      //get the tileset metadata\n      this.getMetadata(tilesetid).then((tileset) => {\n        //remove the results layer, planning unit layer etc.\n        this.removePlanningGridLayers();\n        //add the results layer, planning unit layer etc.\n        this.addPlanningGridLayers(tileset);\n        //zoom to the layers extent\n        if (tileset.bounds != null) zoomToBounds(this.map, tileset.bounds);\n        //set the state\n        this.setState({ tileset: tileset });\n        //filter the wdpa vector tiles as the map doesn't respond to state changes - NO LONGER USED\n        // this.filterWdpaByIucnCategory(this.state.metadata.IUCN_CATEGORY);\n        resolve();\n      }).catch((error) => {\n        this.setSnackBar(error);\n        reject(error);\n      });\n    });\n  }\n\n  //gets all of the metadata for the tileset\n  getMetadata(tilesetId) {\n    return new Promise((resolve, reject) => {\n      fetch(\"https://api.mapbox.com/v4/\" + tilesetId + \".json?secure&access_token=\" + this.state.registry.MBAT_PUBLIC)\n      .then(response => response.json())\n      .then((response2) => {\n        if ((response2.message != null) && (response2.message.indexOf('does not exist') > 0)){\n          reject(\"The tileset '\" + tilesetId + \"' was not found. See <a href='\" + CONSTANTS.ERRORS_PAGE + \"#the-tileset-from-source-source-was-not-found' target='blank'>here</a>\");\n        }else{\n          resolve(response2);\n        }\n      });\n    });\n  }\n\n  //adds the results, planning unit, planning unit edit etc layers to the map\n  addPlanningGridLayers(tileset) {\n    //add the source for the planning unit layers\n    this.map.addSource(CONSTANTS.PLANNING_UNIT_SOURCE_NAME,{\n        'type': \"vector\",\n        'url': \"mapbox://\" + tileset.id\n      }\n    );\n    //add the results layer\n    this.addMapLayer({\n      'id': CONSTANTS.RESULTS_LAYER_NAME,\n      'metadata':{\n        'name': 'Results',\n        'type': CONSTANTS.LAYER_TYPE_SUMMED_SOLUTIONS\n      },\n      'type': \"fill\",\n      'source': CONSTANTS.PLANNING_UNIT_SOURCE_NAME,\n      \"layout\": {\n        \"visibility\": \"visible\"\n      },\n      'source-layer': tileset.name,\n      'paint': {\n        'fill-color': \"rgba(0, 0, 0, 0)\",\n        'fill-outline-color': \"rgba(0, 0, 0, 0)\",\n        \"fill-opacity\": CONSTANTS.RESULTS_LAYER_OPACITY\n      }\n    });\n    //add the planning units costs layer\n    this.addMapLayer({\n      'id': CONSTANTS.COSTS_LAYER_NAME,\n      'metadata':{\n        'name': 'Planning Unit Cost',\n        'type': CONSTANTS.LAYER_TYPE_PLANNING_UNITS_COST\n      },\n      'type': \"fill\",\n      'source': CONSTANTS.PLANNING_UNIT_SOURCE_NAME,\n      \"layout\": {\n        \"visibility\": \"none\"\n      },\n      'source-layer': tileset.name,\n      'paint': {\n        'fill-color': \"rgba(255, 0, 0, 0)\",\n        'fill-outline-color': \"rgba(150, 150, 150, 0)\",\n        'fill-opacity': CONSTANTS.PU_COSTS_LAYER_OPACITY\n      }\n    });\n    //set the result layer in app state so that it can update the Legend component and its opacity control\n    this.setState({resultsLayer: this.map.getLayer(CONSTANTS.RESULTS_LAYER_NAME)});\n    //add the planning unit layer \n    this.addMapLayer({\n      'id': CONSTANTS.PU_LAYER_NAME,\n      'metadata':{\n        'name':'Planning Unit',\n        'type': CONSTANTS.LAYER_TYPE_PLANNING_UNITS\n      },\n      'type': \"fill\",\n      'source': CONSTANTS.PLANNING_UNIT_SOURCE_NAME,\n      \"layout\": {\n        \"visibility\": \"none\"\n      },\n      'source-layer': tileset.name,\n      'paint': {\n        'fill-color': \"rgba(0, 0, 0, 0)\",\n        'fill-outline-color': \"rgba(150, 150, 150, \" + CONSTANTS.PU_LAYER_OPACITY + \")\",\n        'fill-opacity': CONSTANTS.PU_LAYER_OPACITY\n      }\n    });\n    //add the planning units manual edit layer - this layer shows which individual planning units have had their status changed\n    this.addMapLayer({\n      'id': CONSTANTS.STATUS_LAYER_NAME,\n      'metadata':{\n        'name':'Planning Unit Status',\n        'type': CONSTANTS.LAYER_TYPE_PLANNING_UNITS_STATUS\n      },\n      'type': \"line\",\n      'source': CONSTANTS.PLANNING_UNIT_SOURCE_NAME,\n      \"layout\": {\n        \"visibility\": \"none\"\n      },\n      'source-layer': tileset.name,\n      'paint': {\n        'line-color': \"rgba(150, 150, 150, 0)\",\n        'line-width': CONSTANTS.STATUS_LAYER_LINE_WIDTH\n      }\n    });\n  }\n\n  removePlanningGridLayers() {\n    let layers = this.map.getStyle().layers;\n    //get the dynamically added layers\n    let dynamicLayers = layers.filter((item) => {\n      return (item.source === CONSTANTS.PLANNING_UNIT_SOURCE_NAME);\n    });\n    //remove them from the map\n    dynamicLayers.forEach((item) => {\n      this.removeMapLayer(item.id);\n    });\n    //remove the sources if present\n    if (this.map.getSource(CONSTANTS.PLANNING_UNIT_SOURCE_NAME) !== undefined) this.map.removeSource(CONSTANTS.PLANNING_UNIT_SOURCE_NAME);\n  }\n  \n  //adds the WDPA vector tile layer source - this is a separate function so that if the source vector tiles are updated, the layer can be re-added on its own\n  addWDPASource(){\n    //add the source for the wdpa\n    let yr = this.state.marxanServer.wdpa_version.substr(-4); //get the year from the wdpa_version\n    let attribution = \"IUCN and UNEP-WCMC (\" + yr + \"), The World Database on Protected Areas (WDPA) \" + this.state.marxanServer.wdpa_version + \", Cambridge, UK: UNEP-WCMC. Available at: <a href='http://www.protectedplanet.net'>www.protectedplanet.net</a>\";\n    let tiles = [this.state.registry.WDPA.tilesUrl + \"layer=marxan:\" + this.wdpa_vector_tile_layer + \"&tilematrixset=EPSG:900913&Service=WMTS&Request=GetTile&Version=1.0.0&Format=application/x-protobuf;type=mapbox-vector&TileMatrix=EPSG:900913:{z}&TileCol={x}&TileRow={y}\"];\n    this.setState({wdpaAttribution: attribution});\n    this.map.addSource(CONSTANTS.WDPA_SOURCE_NAME,{\n        \"attribution\": attribution,\n        \"type\": \"vector\",\n        \"tiles\": tiles \n      }\n    ); \n  }\n  \n  //adds the WDPA vector tile layer - this is a separate function so that if the source vector tiles are updated, the layer can be re-added on its own\n  addWDPALayer(){\n    this.addMapLayer({\n      \"id\": CONSTANTS.WDPA_LAYER_NAME,\n      'metadata':{\n        'name':'Protected Areas',\n        'type': CONSTANTS.LAYER_TYPE_PROTECTED_AREAS\n      },\n      \"type\": \"fill\",\n      \"source\": CONSTANTS.WDPA_SOURCE_NAME,\n      \"source-layer\": this.wdpa_vector_tile_layer,\n      \"layout\": {\n        \"visibility\": \"visible\"\n      },\n      // \"filter\": [\"==\", \"wdpaid\", -1],\n      \"paint\": {\n        \"fill-color\": {\n          \"type\": \"categorical\",\n          \"property\": \"marine\",\n          \"stops\": [\n            [\"0\", \"rgb(99,148,69)\"],\n            [\"1\", \"rgb(63,127,191)\"],\n            [\"2\", \"rgb(63,127,191)\"]\n          ]\n        },\n        \"fill-outline-color\": {\n          \"type\": \"categorical\",\n          \"property\": \"marine\",\n          \"stops\": [\n            [\"0\", \"rgb(99,148,69)\"],\n            [\"1\", \"rgb(63,127,191)\"],\n            [\"2\", \"rgb(63,127,191)\"]\n          ]\n        },\n        \"fill-opacity\": CONSTANTS.WDPA_FILL_LAYER_OPACITY\n      }\n    });\n    //set the wdpa layer in app state so that it can update the Legend component and its opacity control\n    this.setState({wdpaLayer: this.map.getLayer(CONSTANTS.WDPA_LAYER_NAME)});\n  }\n  \n  showLayer(id) {\n    if (this.map&&this.map.getLayer(id)) this.map.setLayoutProperty(id, 'visibility', 'visible');\n  }\n  hideLayer(id) {\n    if (this.map&&this.map.getLayer(id)) this.map.setLayoutProperty(id, 'visibility', 'none');\n  }\n  //centralised code to add a layer to the maps current style\n  addMapLayer(mapLayer, beforeLayer){\n    //if a beforeLayer is not passed get the first symbol layer (i.e. label layer) and we will add all fill or line layers before this\n    if (!beforeLayer){\n      var allLayers = this.map.getStyle().layers; \n      //get the symbol layers\n      let symbollayers = allLayers.filter(item => (item.type==='symbol'));\n      //get the first symbol layer if there are some, otherwise an empty string\n      beforeLayer = (symbollayers.length) ? symbollayers[0].id : '';\n    }\n    //add the layer\n    this.map.addLayer(mapLayer, beforeLayer);\n  }\n  //centralised code to remove a layer from the maps current style\n  removeMapLayer(layerid){\n    this.map.removeLayer(layerid);\n  }\n  isLayerVisible(layername){\n    return (this.map && this.map.getLayer(layername) && this.map.getLayoutProperty(layername, 'visibility') === 'visible');\n  }\n  \n  //changes the layers opacity\n  changeOpacity(layerId, opacity){\n    if (this.map){\n      let layer = this.map.getLayer(layerId);\n      switch (layer.type) {\n        case 'fill':\n          this.map.setPaintProperty(layerId, 'fill-opacity', opacity);\n          break;\n        case 'line':\n          this.map.setPaintProperty(layerId, 'line-opacity', opacity);\n          break;\n        default:\n          // code\n      }\n    }\n  }\n\n  //sets the metadata for the layer\n  setLayerMetadata(layerId, metadata){\n    let layer = this.map.getLayer(layerId);\n    //merge the metadata with the existing metadata\n    if (layer) layer.metadata = Object.assign(layer.metadata, metadata);\n  }\n  \n  //gets a particular set of layers based on the layer types (layerTypes is an array of layer types)\n  getLayers(layerTypes){\n    //get the map layers\n    var allLayers = this.map.getStyle().layers;\n    //iterate through the layers to get the matching ones\n    return allLayers.filter(layer =>{\n      if (layer.hasOwnProperty('metadata') && layer.metadata.hasOwnProperty('type')){\n        return layerTypes.includes(layer.metadata.type);\n      }else{\n        return false;\n      }\n    });\n  }\n\n  //shows/hides layers of a particular type (layerTypes is an array of layer types)\n  showHideLayerTypes(layerTypes, show){\n    //get the marxan layers\n    let layers = this.getLayers(layerTypes);\n    layers.forEach(layer => {\n      if (show){\n        this.showLayer(layer.id);  \n      }else{\n        this.hideLayer(layer.id);\n      }\n    });\n  }\n  \n  ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  ///ACTIVATION/DEACTIVATION OF TABS\n  ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n  //fired when the projects tab is selected\n  project_tab_active() {\n    this.setState({ activeTab: \"project\" });\n    this.pu_tab_inactive();\n  }\n\n  //fired when the features tab is selected\n  features_tab_active() {\n    if (this.state.activeTab !== \"features\"){\n      this.setState({ activeTab: \"features\" });\n      //render the sum solution map\n      // this.renderSolution(this.runMarxanResponse.ssoln, true);\n      //hide the planning unit layers\n      this.pu_tab_inactive();\n    }\n  }\n\n  //fired when the planning unit tab is selected\n  pu_tab_active() {\n    this.setState({ activeTab: \"planning_units\" });\n    //show the planning units layer \n    this.showLayer(CONSTANTS.PU_LAYER_NAME);\n    //show the planning units status layer \n    this.showLayer(CONSTANTS.STATUS_LAYER_NAME);\n    //show the planning units costs layer \n    this.loadCostsLayer();\n    //hide the results layer\n    this.hideLayer(CONSTANTS.RESULTS_LAYER_NAME);\n    //hide the feature layer and feature puid layers\n    this.showHideLayerTypes([CONSTANTS.LAYER_TYPE_FEATURE_LAYER,CONSTANTS.LAYER_TYPE_FEATURE_PLANNING_UNIT_LAYER], false);\n    //render the planning units status layer_edit layer\n    this.renderPuEditLayer(CONSTANTS.STATUS_LAYER_NAME);\n  }\n\n  //fired whenever another tab is selected\n  pu_tab_inactive() {\n    //show the results layer \n    this.showLayer(CONSTANTS.RESULTS_LAYER_NAME);\n    //show the feature layer and feature puid layers\n    this.showHideLayerTypes([CONSTANTS.LAYER_TYPE_FEATURE_LAYER,CONSTANTS.LAYER_TYPE_FEATURE_PLANNING_UNIT_LAYER], true);\n    //hide the planning units layer \n    this.hideLayer(CONSTANTS.PU_LAYER_NAME);\n    //hide the planning units edit layer \n    this.hideLayer(CONSTANTS.STATUS_LAYER_NAME);\n    //hide the planning units cost layer \n    this.hideLayer(CONSTANTS.COSTS_LAYER_NAME);\n  }\n\n  //fired when the legend tab is selected\n  legend_tab_active() {\n    this.setState({activeResultsTab: \"legend\" });\n  }\n\n  //fired when the solutions tab is selected\n  solutions_tab_active() {\n    this.setState({activeResultsTab: \"solutions\" });\n  }\n\n  //fired when the log tab is selected\n  log_tab_active() {\n    this.setState({activeResultsTab: \"log\" });\n  }\n\n  ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  ///PLANNING UNIT WORKFLOW AND FUNCTIONS\n  ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n  startPuEditSession() {\n    //set the state\n    this.setState({puEditing: true});\n    //set the cursor to a crosshair\n    this.map.getCanvas().style.cursor = \"crosshair\";\n    //add the left mouse click event to the planning unit layer\n    this.onClickRef = this.moveStatusUp.bind(this); //using bind creates a new function instance so we need to get a reference to that to be able to remove it later\n    this.map.on(\"click\", CONSTANTS.PU_LAYER_NAME, this.onClickRef); \n    //add the mouse right click event to the planning unit layer \n    this.onContextMenu = this.resetStatus.bind(this); //using bind creates a new function instance so we need to get a reference to that to be able to remove it later\n    this.map.on(\"contextmenu\", CONSTANTS.PU_LAYER_NAME, this.onContextMenu); \n  }\n\n  stopPuEditSession() {\n    //set the state\n    this.setState({puEditing: false});\n    //reset the cursor\n    this.map.getCanvas().style.cursor = \"pointer\";\n    //remove the mouse left click event\n    this.map.off(\"click\", CONSTANTS.PU_LAYER_NAME, this.onClickRef);\n    //remove the mouse right click event\n    this.map.off(\"contextmenu\", CONSTANTS.PU_LAYER_NAME, this.onContextMenu);\n    //update the pu.dat file\n    this.updatePuDatFile();\n  }\n\n  //clears all of the manual edits from the pu edit layer (except the protected area units)\n  clearManualEdits(){\n    //clear all the planning unit statuses\n      this.setState({ planning_units: [] }, () => {\n        //get the puids for the current iucn category\n        let puids = this.getPuidsFromIucnCategory(this.state.metadata.IUCN_CATEGORY);\n        //update the planning units\n        this.updatePlanningUnits([], puids);\n      });\n  }\n  \n  //sends a list of puids that should be excluded from the run to upddate the pu.dat file\n  updatePuDatFile() {\n    //initialise the form data\n    let formData = new FormData();\n    //add the current user\n    formData.append(\"user\", this.state.owner);\n    //add the current project\n    formData.append(\"project\", this.state.project);\n    //add the planning unit manual exceptions\n    if (this.state.planning_units.length > 0) {\n      this.state.planning_units.forEach((item) => {\n        //get the name of the status parameter\n        let param_name = \"status\" + item[0];\n        //add the planning units\n        formData.append(param_name, item[1]);\n      });\n    }\n    //post to the server\n    this._post(\"updatePUFile\", formData).then((response) => {\n      //do something\n    });\n  }\n\n  //fired when the user left clicks on a planning unit to move its status up\n  moveStatusUp(e) {\n    this.changeStatus(e, \"up\");\n  }\n\n  //fired when the user left clicks on a planning unit to reset its status \n  resetStatus(e) {\n    this.changeStatus(e, \"reset\");\n  }\n\n  changeStatus(e, direction) {\n    //get the feature that the user has clicked \n    var features = this.getRenderedFeatures(e.point, [CONSTANTS.PU_LAYER_NAME]);\n    //get the featureid\n    if (features.length > 0) {\n      //get the puid\n      let puid = features[0].properties.puid;\n      //get its current status \n      let status = this.getStatusLevel(puid);\n      //get the next status level\n      let next_status = this.getNextStatusLevel(status, direction);\n      //copy the current planning unit statuses \n      let statuses = this.state.planning_units;\n      //if the planning unit is not at level 0 (in which case it will not be in the planning_units state) - then remove it from the puids array for that status\n      if (status !== 0) this.removePuidFromArray(statuses, status, puid);\n      //add it to the new status array\n      if (next_status !== 0) this.addPuidToArray(statuses, next_status, puid);\n      //set the state\n      this.setState({ planning_units: statuses });\n      //re-render the planning unit edit layer\n      this.renderPuEditLayer();\n    }\n  }\n\n  getStatusLevel(puid) {\n    //iterate through the planning unit statuses to see which status the clicked planning unit belongs to, i.e. 1, 2 or 3\n    let status_level = 0; //default level as the getPlanningUnits REST call only returns the planning units with non-default values\n    CONSTANTS.PLANNING_UNIT_STATUSES.forEach((item) => {\n      let planning_units = this.getPlanningUnitsByStatus(item);\n      if (planning_units.indexOf(puid) > -1) {\n        status_level = item;\n      }\n    });\n    return status_level;\n  }\n\n  //gets the array index position for the passed status in the planning_units state\n  getStatusPosition(status) {\n    let position = -1;\n    this.state.planning_units.forEach((item, index) => {\n      if (item[0] === status) position = index;\n    });\n    return position;\n  }\n\n  //returns the planning units with a particular status, e.g. 1,2,3 \n  getPlanningUnitsByStatus(status) {\n    //get the position of the status items in the this.state.planning_units\n    let position = this.getStatusPosition(status);\n    //get the array of planning units\n    let returnValue = (position > -1) ? this.state.planning_units[position][1] : [];\n    return returnValue;\n  }\n  \n  //returns the next status level for a planning unit depending on the direction\n  getNextStatusLevel(status, direction) {\n    let nextStatus;\n    switch (status) {\n      case 0:\n        nextStatus = (direction === \"up\") ? 3 : 0;\n        break;\n      case 1: //no longer used\n        nextStatus = (direction === \"up\") ? 0 : 0;\n        break;\n      case 2:\n        nextStatus = (direction === \"up\") ? 0 : 0; //used to be 1 going down\n        break;\n      case 3:\n        nextStatus = (direction === \"up\") ? 2 : 0;\n        break;\n      default:\n        break;\n    }\n    return nextStatus;\n  }\n\n  //removes in individual puid value from an array of puid statuses \n  removePuidFromArray(statuses, status, puid) {\n    return this.removePuidsFromArray(statuses, status, [puid]);\n  }\n\n  addPuidToArray(statuses, status, puid) {\n    return this.appPuidsToPlanningUnits(statuses, status, [puid]);\n  }\n\n  //adds all the passed puids to the planning_units state\n  appPuidsToPlanningUnits(statuses, status, puids) {\n    //get the position of the status items in the this.state.planning_units, i.e. the index\n    let position = this.getStatusPosition(status);\n    if (position === -1) {\n      //create a new status and empty puid array\n      statuses.push([status, []]);\n      position = statuses.length - 1;\n    }\n    //add the puids to the puid array ensuring that they are unique\n    statuses[position][1] = Array.from(new Set(statuses[position][1].concat(puids)));\n    return statuses;\n  }\n\n  //removes all the passed puids from the planning_units state\n  removePuidsFromArray(statuses, status, puids) {\n    //get the position of the status items in the this.state.planning_units\n    let position = this.getStatusPosition(status);\n    if (position > -1) {\n      let puid_array = statuses[position][1];\n      let new_array = puid_array.filter((item) => {\n        return puids.indexOf(item) < 0;\n      }); \n      statuses[position][1] = new_array;\n      //if there are no more items in the puid array then remove it\n      if (new_array.length === 0) statuses.splice(position, 1);\n    }\n    return statuses;\n  }\n\n  ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  //ROUTINES FOR CREATING A NEW PROJECT AND PLANNING UNIT GRIDS\n  ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n  //previews the planning grid\n  previewPlanningGrid(planning_grid_metadata){\n    this.setState({planning_grid_metadata:planning_grid_metadata});\n    this.openPlanningGridDialog();\n  }\n  \n  //creates a new planning grid unit \n  createNewPlanningUnitGrid(iso3, domain, areakm2, shape) {\n    return new Promise((resolve, reject) => {\n      this.startLogging();\n      this._ws(\"createPlanningUnitGrid?iso3=\" + iso3 + \"&domain=\" + domain + \"&areakm2=\" + areakm2 + \"&shape=\" + shape, this.wsMessageCallback.bind(this)).then((message) => {\n        this.newPlanningGridCreated(message).then(()=>{\n          this.closeNewPlanningGridDialog();\n          //websocket has finished \n          resolve(message);\n        });\n      }).catch((error) => {\n        //do something\n        reject(error);\n      });\n    });\n  }\n\n  //imports a zipped shapefile as a new planning grid\n  importPlanningUnitGrid(zipFilename, alias, description){\n    return new Promise((resolve, reject) => {\n      this.startLogging();\n      this.log({method:'importPlanningUnitGrid',status:'Started',info:\"Importing planning grid..\"});\n      this.importZippedShapefileAsPu(zipFilename, alias, description).then((response) => {\n        this.log({method:'importPlanningUnitGrid',status:'Finished',info: response.info});\n        this.newPlanningGridCreated(response).then(()=> {\n          this.closeImportPlanningGridDialog();\n        });\n      }).catch((error) => { //importZippedShapefileAsPu error\n        this.deletePlanningUnitGrid(alias, true);\n        this.log({method:'importPlanningUnitGrid',status:'Finished',error:error});\n        reject(error);\n      });\n    });\n  }\n  \n  //called when a new planning grid has been created\n  newPlanningGridCreated(response){\n    return new Promise((resolve, reject) => {\n      //start polling to see when the upload is done\n      this.pollMapbox(response.uploadId).then((response) => {\n        //update the planning unit items\n        this.getPlanningUnitGrids();\n        resolve(\"Planning grid created\");\n      });\n    });\n  }\n\n  //deletes a planning unit grid\n  deletePlanningUnitGrid(feature_class_name, silent = false){\n    if (silent){ //used to roll back failed imports of planning grids\n      this.deletePlanningGrid(feature_class_name, true);\n    }else{\n      //get a list of the projects for the planning grid\n      this.getProjectsForPlanningGrid(feature_class_name).then((projects)=>{\n        //if the planning grid is not being used then delete it\n        if (projects.length === 0){\n          this.deletePlanningGrid(feature_class_name, false);\n        }else{\n          //show the projects list dialog\n          this.showProjectListDialog(projects, 'Failed to delete planning grid', \"The planning grid is used in the following projects\");\n        }\n      });\n    }\n  }\n  \n  //deletes a planning grid\n  deletePlanningGrid(feature_class_name, silent){\n      this._get(\"deletePlanningUnitGrid?planning_grid_name=\" + feature_class_name).then((response) => {\n        //update the planning unit grids\n        this.getPlanningUnitGrids();\n        this.setSnackBar(response.info, silent);  \n      }).catch((error) => {\n        //additional stuff\n      });\n  }\n  \n  //exports a planning grid to a zipped shapefile\n  exportPlanningGrid(feature_class_name){\n    return new Promise((resolve, reject) => {\n      this._get(\"exportPlanningUnitGrid?name=\" + feature_class_name).then((response) => {\n        resolve(this.state.marxanServer.endpoint + \"exports/\" + response.filename);\n      }).catch((error) => {\n        reject();\n      });\n    });\n  }\n  \n  //gets a list of projects that use a particular planning grid\n  getProjectsForPlanningGrid(feature_class_name){\n    return new Promise((resolve, reject) => {\n      //get a list of the projects for the planning grid\n      this._get(\"listProjectsForPlanningGrid?feature_class_name=\" + feature_class_name).then((response)=>{\n        resolve(response.projects);\n      });\n    });\n  }\n\n  getCountries() {\n    this._get(\"getCountries\").then((response) => {\n      this.setState({ countries: response.records });\n    });\n  }\n\n  //uploads the named feature class to mapbox on the server\n  uploadToMapBox(feature_class_name, mapbox_layer_name) {\n    return new Promise((resolve, reject) => {\n      this._get(\"uploadTilesetToMapBox?feature_class_name=\" + feature_class_name + \"&mapbox_layer_name=\" + mapbox_layer_name, 300000).then((response) => {\n        this.setState({loading: true});\n        //poll mapbox to see when the upload has finished\n        this.pollMapbox(response.uploadid).then((response2) => {\n          resolve(response2);\n        });\n      }).catch((error) => {\n        reject(error);\n      });\n    });\n  }\n\n  //polls mapbox to see when an upload has finished - returns as promise\n  pollMapbox(uploadid){\n    this.setState({uploading: true});\n    this.log({info: 'Uploading to Mapbox..',status:'Uploading'});\n    return new Promise((resolve, reject) => {\n      if (uploadid === '0'){ \n        this.log({info: 'Tileset already exists on Mapbox',status:'UploadComplete'});\n        //reset state\n        this.setState({uploading: false});\n        resolve(\"Uploaded to Mapbox\");\n      }else{\n        let timer = setInterval(() => {\n          fetch(\"https://api.mapbox.com/uploads/v1/\" + CONSTANTS.MAPBOX_USER + \"/\" + uploadid + \"?access_token=\" + this.state.registry.MBAT)\n            .then(response => response.json())\n            .then((response) => {\n              if (response.complete){\n                resolve(\"Uploaded to Mapbox\");\n                this.log({info: 'Uploaded', status:'UploadComplete'});\n                //clear the timer\n                this.clearMapboxTimer(uploadid);\n              }\n              //if there is an error from mapbox then raise it\n              if (response.error){\n                reject(response.error);\n                let err = \"Mapbox upload error: \" + response.error + \". See <a href='\" + CONSTANTS.ERRORS_PAGE + \"#mapbox-upload-error' target='blank'>here</a>\";\n                //log the error\n                this.log({error: err, status:'UploadFailed'});\n                //set the snackbox\n                this.setSnackBar(err);\n                //clear the timer\n                this.clearMapboxTimer(uploadid);\n              }\n            })\n            .catch((error) => {\n              this.setState({uploading: false});\n              reject(error);\n            });\n        }, 3000);\n        timers.push({uploadid: uploadid, timer: timer});\n      }\n    });\n  }\n  //resets a timer for a mapbox upload poll\n  clearMapboxTimer(uploadid){\n    //clear the timer\n    let _timer = timers.find(timer => timer.uploadid === uploadid);\n    clearInterval(_timer.timer);\n    //remove the timer from the timers array\n    timers = timers.filter(timer => timer.uploadid !== uploadid);\n    //reset state\n    if (timers.length === 0) this.setState({uploading: false});\n  }\n  closeWelcomeDialog(){\n    this.setState({ welcomeDialogOpen: false });\n  }\n  openWelcomeDialog(){\n    this.parseNotifications();\n    this.setState({ welcomeDialogOpen: true });\n  }\n  openFeaturesDialog(showClearSelectAll) {\n    //refresh the features list if we are using a hosted service (other users could have created/deleted items) and the project is not imported (only project features are shown)\n    if (this.state.marxanServer.system !== \"Windows\" && !this.state.metadata.OLDVERSION) this.refreshFeatures();\n    this.setState({ featuresDialogOpen: true, addingRemovingFeatures: showClearSelectAll});\n    if (showClearSelectAll) this.getSelectedFeatureIds();\n  }\n  closeFeaturesDialog() {\n    this.setState({ featuresDialogOpen: false, newFeaturePopoverOpen: false, importFeaturePopoverOpen: false });\n  }\n  openNewFeatureDialog(){\n    this.setState({ NewFeatureDialogOpen: true });\n  }\n  closeNewFeatureDialog() {\n    this.setState({ NewFeatureDialogOpen: false });\n    //finalise digitising \n    this.finaliseDigitising();\n  }\n  openImportFromWebDialog() {\n    this.setState({ importFromWebDialogOpen: true});\n  }\n  closeImportFromWebDialog() {\n    this.setState({ importFromWebDialogOpen: false});\n  }\n  openImportFeaturesDialog() {\n    this.setState({ importFeaturesDialogOpen: true});\n  }\n  closeImportFeaturesDialog() {\n    this.setState({ importFeaturesDialogOpen: false});\n  }\n  openImportGBIFDialog() {\n    this.setState({ importGBIFDialogOpen: true});\n  }\n  closeImportGBIFDialog() {\n    this.setState({ importGBIFDialogOpen: false});\n  }\n  openPlanningGridsDialog(){\n    //refresh the planning grids if we are using a hosted service - other users could have created/deleted items\n    if (this.state.marxanServer.system !== \"Windows\") this.getPlanningUnitGrids();\n    this.setState({planningGridsDialogOpen: true});\n  }\n  closePlanningGridsDialog(){\n    this.setState({planningGridsDialogOpen: false});\n  }\n  openPlanningGridDialog(){\n    this.setState({planningGridDialogOpen: true});\n  }\n  closePlanningGridDialog(){\n    this.setState({planningGridDialogOpen: false});\n  }\n  openFeatureDialog(){\n    this.setState({featureDialogOpen: true});\n  }\n  closeFeatureDialog(){\n    this.setState({featureDialogOpen: false});\n  }\n  showNewFeaturePopover(){\n    this.setState({ newFeaturePopoverOpen: true });\n  }\n  hideNewFeaturePopover(){\n    this.setState({ newFeaturePopoverOpen: false });\n  }\n  showImportFeaturePopover(){\n    this.setState({ importFeaturePopoverOpen: true });\n  }\n  hideImportFeaturePopover(){\n    this.setState({ importFeaturePopoverOpen: false });\n  }\n  showImportProjectPopover(){\n    this.setState({ importProjectPopoverOpen: true });\n  }\n  hideImportProjectPopover(){\n    this.setState({ importProjectPopoverOpen: false });\n  }\n  openCostsDialog() {\n    this.setState({ costsDialogOpen: true });\n  }\n  closeCostsDialog() {\n    this.setState({ costsDialogOpen: false });\n  }\n  openImportCostsDialog() {\n    this.setState({ importCostsDialogOpen: true });\n  }\n  closeImportCostsDialog() {\n    this.setState({ importCostsDialogOpen: false });\n  }\n  openWDPAUpdateDialog(){\n    this.setState({ updateWDPADialogOpen: true });\n  }\n  closeWDPAUpdateDialog(){\n    this.setState({ updateWDPADialogOpen: false });\n  }\n  setNewFeatureDatasetFilename(filename) {\n    this.setState({ featureDatasetFilename: filename });\n  }\n  //used by the import wizard to import a users zipped shapefile as the planning units\n  importZippedShapefileAsPu(zipname, alias, description) {\n    //the zipped shapefile has been uploaded to the MARXAN folder - it will be imported to PostGIS and a record will be entered in the metadata_planning_units table\n    return this._get(\"importPlanningUnitGrid?filename=\" + zipname + \"&name=\" + alias + \"&description=\" + description);\n  }\n\n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  // MANAGING INTEREST FEATURES SECTION\n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n  //updates the properties of a feature and then updates the features state\n  updateFeature(feature, newProps){\n    let features = this.state.allFeatures;\n    //get the position of the feature \n    var index = features.findIndex((element) => { return element.id === feature.id; });\n    if (index!==-1) {\n      Object.assign(features[index], newProps);\n      //update allFeatures and projectFeatures with the new value\n      this.setFeaturesState(features);\n    }\n  }\n\n  //gets the ids of the selected features\n  getSelectedFeatureIds(){\n    let ids = [];\n    this.state.allFeatures.forEach((feature) => {\n      if (feature.selected) ids.push(feature.id);\n    });\n    this.setState({selectedFeatureIds: ids});\n  }\n\n  //when a user clicks a feature in the FeaturesDialog\n  clickFeature(feature){\n    let ids = this.state.selectedFeatureIds;\n    if (ids.includes(feature.id)){\n      //remove the feature if it is already selected\n      this.removeFeature(feature);\n    }else{\n      //add the feature to the selected feature array\n      this.addFeature(feature);\n    }\n  }\n  \n  //removes a feature from the selectedFeatureIds array\n  removeFeature(feature){\n    let ids = this.state.selectedFeatureIds;\n    //remove the feature  - this requires a callback on setState otherwise the state is not updated before updateSelectedFeatures is called\n    ids = ids.filter((value, index, arr) => {return value !== feature.id});\n    return new Promise((resolve, reject) => {\n      this.setState({ selectedFeatureIds: ids }, () => {\n        resolve(\"Feature removed\");  \n      });\n    });\n  }\n  \n  //adds a feature to the selectedFeatureIds array\n  addFeature(feature, callback){\n    let ids = this.state.selectedFeatureIds;\n    //add the feautre to the selected feature array\n    ids.push(feature.id);\n    this.setState({ selectedFeatureIds: ids }, callback);\n  }\n  \n  //starts a digitising session\n  initialiseDigitising(){\n    //show the digitising controls if they are not already present, mapbox-gl-draw-cold and mapbox-gl-draw-hot\n    if (!this.map.getSource('mapbox-gl-draw-cold')) this.map.addControl(this.mapboxDrawControls);\n  }\n  \n  //finalises the digitising\n  finaliseDigitising(){\n    //hide the drawing controls\n    this.map.removeControl(this.mapboxDrawControls);\n  }\n  //called when the user has drawn a polygon on screen\n  polygonDrawn(evt){\n    //open the new feature dialog for the metadata\n    this.openNewFeatureDialog();\n    //save the feature in a local variable\n    this.digitisedFeatures = evt.features;\n  }\n  \n  //selects all the features\n  selectAllFeatures() {\n    let ids = [];\n    this.state.allFeatures.forEach((feature) => {\n      ids.push(feature.id);\n    });\n    this.selectFeatures(ids);\n  }\n\n  //clears all the Conservation features\n  clearAllFeatures() {\n    this.setState({selectedFeatureIds: []});\n  }\n\n  //selects features \n  selectFeatures(ids) {\n    this.setState({selectedFeatureIds: ids});\n  }\n\n  //updates the allFeatures to set the various properties based on which features have been selected in the FeaturesDialog or programmatically\n  updateSelectedFeatures(){\n    //delete the gap analysis as the features within the project have changed\n    this.deleteGapAnalysis();\n    let allFeatures = this.state.allFeatures;\n    allFeatures.forEach((feature) => {\n      if (this.state.selectedFeatureIds.includes(feature.id)) {\n        Object.assign(feature, {selected: true});\n      }else{\n        if (this.state.metadata.OLDVERSION){\n          //for imported projects we cannot preprocess them any longer as we dont have access to the features spatial data - therefore dont set preprocessed to false or any of the other stats fields\n          Object.assign(feature, {selected: false});\n        }else{\n          Object.assign(feature, {selected: false, preprocessed: false, protected_area: -1, pu_area: -1, pu_count: -1, target_area: -1, occurs_in_planning_grid: false});\n        }\n        //remove the feature layer if it is loaded\n        if (feature.feature_layer_loaded) this.toggleFeatureLayer(feature);\n        //remove the planning unit layer if it is loaded\n        if (feature.feature_puid_layer_loaded) this.toggleFeaturePUIDLayer(feature);\n      }\n    });\n    //when the project features have been saved to state, update the spec.dat file\n    this.setFeaturesState(allFeatures, ()=>{\n      //persist the changes to the server\n      if (this.state.userData.ROLE !== \"ReadOnly\") this.updateSpecFile(); \n      //close the dialog\n      this.closeFeaturesDialog();\n    });\n  }\n\n  //updates the target values for all features in the project to the passed value\n  updateTargetValueForFeatures(target_value){\n    let allFeatures = this.state.allFeatures;\n    //iterate through all features\n    allFeatures.forEach((feature) => {\n      Object.assign(feature, {target_value: target_value});\n    });\n    //set the features in app state\n    this.setFeaturesState(allFeatures, ()=> {\n      //persist the changes to the server\n      if (this.state.userData.ROLE !== \"ReadOnly\") this.updateSpecFile(); \n    });\n  }\n  \n  //the callback is optional and will be called when the state has updated\n  setFeaturesState(newFeatures, callback){\n    //update allFeatures and projectFeatures with the new value\n    this.setState({ allFeatures: newFeatures, projectFeatures: newFeatures.filter((item) => { return item.selected }) }, callback);\n  }\n  \n  //unselects a single Conservation feature\n  unselectItem(feature) {\n    //remove it from the selectedFeatureIds array\n    this.removeFeature(feature).then(() => {\n      //refresh the selected features\n      this.updateSelectedFeatures();\n    });\n  }\n\n  //previews the feature\n  previewFeature(feature_metadata){\n    this.setState({feature_metadata:feature_metadata});\n    this.openFeatureDialog();\n  }\n\n  //unzips a shapefile on the server\n  unzipShapefile(filename){\n    return new Promise((resolve, reject) => {\n      this._get(\"unzipShapefile?filename=\" + filename).then((response) => {\n        resolve(response);\n      }).catch((error) => {\n        reject(error);\n      });\n    });    \n  }\n  \n  //deletes a zip file and shapefile (with the *.shp extension) \n  deleteShapefile(zipfile, shapefile){\n    return new Promise((resolve, reject) => {\n      this._get(\"deleteShapefile?zipfile=\" + zipfile + \"&shapefile=\" + shapefile).then((response) => {\n        resolve(response);\n      }).catch((error) => {\n        reject(error);\n      });\n    });    \n  }\n  \n  //gets a list of fieldnames from the passed shapefile - this must exist in the servers root directory\n  getShapefileFieldnames(filename){\n    return new Promise((resolve, reject) => {\n      this._get(\"getShapefileFieldnames?filename=\" + filename).then((response) => {\n        resolve(response);\n      }).catch((error) => {\n        reject(error);\n      });\n    });    \n  }\n  \n  //create new features from the already uploaded zipped shapefile \n  importFeatures(zipfile, name, description, shapefile,  spiltfield){\n    //start the logging\n    this.startLogging();\n    return new Promise((resolve, reject) => {\n      //get the request url\n      let url = (name !== \"\") ? \"importFeatures?zipfile=\" + zipfile + \"&shapefile=\" + shapefile + \"&name=\" + name + \"&description=\" + description : \"importFeatures?zipfile=\" + zipfile + \"&shapefile=\" + shapefile + \"&splitfield=\" + spiltfield;\n      this._ws(url, this.wsMessageCallback.bind(this)).then((message) => {\n        //get the uploadIds\n        let uploadIds = message.uploadIds;\n        //get a promise array to see when all of the uploads are done\n        let promiseArray = [];\n        //iterate through the uploadIds to see when they are done\n        for (var i = 0; i < uploadIds.length; ++i) {\n          promiseArray.push(this.pollMapbox(uploadIds[i]));\n        }\n        //see when they're done\n        Promise.all(promiseArray).then(response => {\n          resolve(\"All features uploaded\");\n        });\n      }).catch((error) => {\n        reject(error);\n      });\n    }); //return\n  }\n\n  //imports features from a web resource\n  importFeaturesFromWeb(name, description, endpoint, srs, featureType){\n    //start the logging\n    this.startLogging();\n    return new Promise((resolve, reject) => {\n      //get the request url\n      this._ws(\"createFeaturesFromWFS?name=\" + name + \"&description=\" + description + \"&endpoint=\" + endpoint + \"&srs=\" + srs + \"&featuretype=\" + featureType, this.wsMessageCallback.bind(this)).then((message) => {\n        //get the uploadId\n        let uploadId = message.uploadId;\n          this.pollMapbox(uploadId).then((response) => {\n            resolve(response);\n          });\n      }).catch((error) => {\n        reject(error);\n      });\n    }); //return\n  }\n  \n  //import features from GBIF\n  importGBIFData(item){\n    //start the logging\n    this.startLogging();\n    return new Promise((resolve, reject) => {\n      //get the request url\n      this._ws(\"importGBIFData?taxonKey=\" + item.key + \"&scientificName=\" + item.scientificName, this.wsMessageCallback.bind(this)).then((message) => {\n        //get the uploadId\n        let uploadId = message.uploadId;\n          this.pollMapbox(uploadId).then((response) => {\n            resolve(response);\n          });\n      }).catch((error) => {\n        reject(error);\n      });\n    }); //return\n  }\n  \n    //requests matching species names in GBIF\n  gbifSpeciesSuggest(q) {\n    return new Promise((resolve, reject) => {\n      this.setState({loading:true});\n      jsonp(\"https://api.gbif.org/v1/species/suggest?q=\" + q + \"&rank=SPECIES\").promise.then((response) => {\n        resolve(response);\n        this.setState({loading:false});\n      }, (err) => {\n        reject(err);\n        this.setState({loading:false});\n      });\n    });\n  }\n\n  //create the new feature from the feature that has been digitised on the map\n  createNewFeature(name, description){\n    //start the logging\n    this.startLogging();\n    this.log({method:'createNewFeature',status:'Started',info:\"Creating feature..\"});\n    //post the geometry to the server with the metadata\n    let formData = new FormData();\n    formData.append('name', name);\n    formData.append('description', description);\n    //convert the coordinates into a linestring to create the polygon in postgis\n    let coords = this.digitisedFeatures[0].geometry.coordinates[0].map((coordinate) => {\n      return coordinate[0] + \" \" + coordinate[1];\n    }).join(\",\");\n    formData.append('linestring', \"Linestring(\" + coords + \")\");\n    this._post(\"createFeatureFromLinestring\", formData).then((response) => {\n        this.log({method:'createNewFeature',status:'Finished', info: response.info});\n        //start polling to see when the upload is done\n        this.pollMapbox(response.uploadId).then(() => {\n          this.newFeatureCreated(response.id);\n          //close the dialog\n          this.closeNewFeatureDialog();\n        });\n    }).catch((error) => {\n      this.log({status:'Finished', error: error});\n    });\n  }\n  \n  //gets the new feature information and updates the state\n  newFeatureCreated(id) {\n    //load the interest feature from the marxan web database\n    this._get(\"getFeature?oid=\" + id + \"&format=json\").then((response) => {\n      let feature = response.data[0];\n      //add the required attributes to use it in Marxan Web and update the allFeatures array\n      this.initialiseNewFeature(feature);\n      //if add to project is set then add the feature to the project, wait for the selectedFeatureIds state to be updated and then call updateSelectedFeatures\n      if (this.state.addToProject) this.addFeature(feature, () => {\n        this.updateSelectedFeatures();\n      });\n    });\n  }\n\n  //adds the required attributes to use it in Marxan Web and update the allFeatures array\n  initialiseNewFeature(feature){\n      //add the required attributes\n      this.addFeatureAttributes(feature);\n      //update the allFeatures array\n      this.addNewFeature(feature);\n  }\n  //adds a new feature to the allFeatures array\n  addNewFeature(feature){\n    //update the allFeatures array\n    var featuresCopy = this.state.allFeatures;\n    featuresCopy.push(feature);\n    //sort the features alphabetically\n    featuresCopy.sort((a, b) => {\n      if (a.alias.toLowerCase() < b.alias.toLowerCase())\n        return -1;\n      if (a.alias.toLowerCase() > b.alias.toLowerCase())\n        return 1;\n      return 0;\n    });\n    this.setState({allFeatures: featuresCopy});\n  }\n  \n  //attempts to delete a feature - if the feature is in use in a project then it will not be deleted and the list of projects will be shown\n  deleteFeature(feature) {\n    this.getProjectsForFeature(feature).then((projects)=>{\n      if (projects.length === 0){\n        this._deleteFeature(feature);\n      }else{\n        this.showProjectListDialog(projects, 'Failed to delete planning feature', \"The feature is used in the following projects\");\n      }\n    });\n  }\n\n  //deletes a feature\n  _deleteFeature(feature){\n    this._get(\"deleteFeature?feature_name=\" + feature.feature_class_name).then((response) => {\n      this.setSnackBar(\"Feature deleted\");\n      //remove it from the current project if necessary\n      this.removeFeature(feature);\n      //remove it from the allFeatures array\n      this.removeFeatureFromAllFeatures(feature);\n    });\n  }\n  \n  //removes a feature from the allFeatures array\n  removeFeatureFromAllFeatures(feature){\n    let featuresCopy = this.state.allFeatures;\n    //remove the feature \n    featuresCopy = featuresCopy.filter((item) => {return item.id !== feature.id});\n    //update the allFeatures state   \n    this.setState({allFeatures: featuresCopy});\n  }\n  \n  //makes a call to get the features from the server and returns them\n  getFeatures(){\n    return new Promise((resolve, reject) => {\n      this._get(\"getAllSpeciesData\").then((response) => {\n        resolve(response);\n      }).catch((error) => {\n        //do something\n      });\n    });\n  }\n\n  //gets all the features from the server and updates the state\n  getAllFeatures(){\n    return new Promise((resolve, reject) => {\n      this.getFeatures().then((response) => {\n        //set the allfeatures state\n        this.setState({allFeatures: response.data}, () => {\n          resolve(\"Features returned\");\n        });\n      }).catch((error) => {\n        //do something\n      });\n    });\n  }\n  \n  //gets the feature ids as a set from the allFeatures array\n  getFeatureIds(_features){\n    return new Set(_features.map(item => {return item.id}));\n  }\n\n  //refreshes the allFeatures state\n  refreshFeatures(){\n    //refresh all features\n    this.getFeatures().then((response)=>{\n      //get the existing feature ids in the client\n      let existingIds = this.getFeatureIds(this.state.allFeatures);\n      //get the new feature ids in the server\n      let newIds = this.getFeatureIds(response.data);\n      //get the features that have been removed as a set\n      let removedIds = new Set([...existingIds].filter(x => !newIds.has(x)));\n      removedIds.forEach(item => {\n        //remove it from the allFeatures array\n        this.removeFeatureFromAllFeatures({id: item});\n      });\n      //get the features that have been added as a set\n      let addedIds = new Set([...newIds].filter(x => !existingIds.has(x)));\n      //iterate through the new features and initialise them\n      let addedFeatures = response.data.filter(item => addedIds.has(item.id));\n      addedFeatures.forEach(item => {\n        this.initialiseNewFeature(item);\n      });\n    });\n  }\n  openFeatureMenu(evt, feature){\n    this.setState({featureMenuOpen: true, currentFeature: feature, menuAnchor: evt.currentTarget});\n  }\n  closeFeatureMenu(evt){\n    this.setState({featureMenuOpen: false});\n  }\n\n  //hides the feature layer\n  hideFeatureLayer(){\n    this.state.projectFeatures.forEach((feature) => {\n      if (feature.feature_layer_loaded) this.toggleFeatureLayer(feature);\n    });\n  }\n  \n  //toggles the feature layer on the map\n  toggleFeatureLayer(feature){\n    if (feature.tilesetid === ''){\n      this.setSnackBar(\"This feature does not have an associated tileset on Mapbox. See <a href='\" + CONSTANTS.ERRORS_PAGE + \"#the-tileset-from-source-source-was-not-found' target='blank'>here</a>\");\n      return;\n    }\n    // this.closeFeatureMenu();\n    let layerName = feature.tilesetid.split(\".\")[1];\n    let layerId = \"marxan_feature_layer_\" + layerName;\n    if (this.map.getLayer(layerId)){\n      this.removeMapLayer(layerId);\n      this.map.removeSource(layerId);\n      this.updateFeature(feature, {feature_layer_loaded: false});\n    }else{\n      //if a planning units layer for a feature is visible then we need to add the feature layer before it - first get the feature puid layer\n      var layers = this.getLayers([CONSTANTS.LAYER_TYPE_FEATURE_PLANNING_UNIT_LAYER]);\n      //get the before layer\n      let beforeLayer = (layers.length > 0) ? layers[0].id : \"\";\n      this.addMapLayer({\n        'id': layerId,\n        'metadata':{\n          'name': feature.alias,\n          'type': CONSTANTS.LAYER_TYPE_FEATURE_LAYER\n        },\n        'type': \"fill\",\n        'source': {\n          'type': \"vector\",\n          'url': \"mapbox://\" + feature.tilesetid\n        },\n        \"layout\": {\n          \"visibility\": \"visible\"\n        },\n        'source-layer': layerName,\n        'paint': {\n          'fill-color': feature.color,\n          'fill-opacity': CONSTANTS.FEATURE_LAYER_OPACITY,\n          'fill-outline-color': \"rgba(0, 0, 0, 0.2)\"\n        }\n      }, beforeLayer); //add it before the layer that shows the planning unit outlines for the feature\n      this.updateFeature(feature, {feature_layer_loaded: true});\n    }\n  }\n  \n  //toggles the planning unit feature layer on the map\n  toggleFeaturePUIDLayer(feature){\n    // this.closeFeatureMenu();\n    let layerName = \"marxan_puid_\" + feature.id;\n    if (this.map.getLayer(layerName)){\n      this.removeMapLayer(layerName);\n      this.updateFeature(feature, {feature_puid_layer_loaded: false});\n    }else{\n      //get the planning units where the feature occurs\n      this._get(\"getFeaturePlanningUnits?user=\" + this.state.owner + \"&project=\" + this.state.project + \"&oid=\" + feature.id).then((response) => {\n        //ids retrieved - add the layer\n        this.addMapLayer({\n          'id': layerName,\n          'metadata':{\n            'name': feature.alias,\n            'type': CONSTANTS.LAYER_TYPE_FEATURE_PLANNING_UNIT_LAYER,\n            'lineColor': feature.color\n          },\n          'type': \"line\",\n          'source': CONSTANTS.PLANNING_UNIT_SOURCE_NAME,\n          'source-layer': this.state.tileset.name,\n          \"layout\": {\n            \"visibility\": \"visible\"\n          },\n          'paint':{\n            'line-opacity': CONSTANTS.FEATURE_PLANNING_GRID_LAYER_OPACITY\n          }\n        }); \n        //update the paint property for the layer\n        var line_color_expression = this.initialiseFillColorExpression(\"puid\");\n        response.data.forEach((puid) => {\n            line_color_expression.push(puid, feature.color); \n        });\n        // Last value is the default, used where there is no data\n        line_color_expression.push(\"rgba(0,0,0,0)\");\n        this.map.setPaintProperty(layerName, \"line-color\", line_color_expression);\n        //show the layer\n        this.showLayer(layerName);\n      });\n      this.updateFeature(feature, {feature_puid_layer_loaded: true});\n    }\n  }\n\n  //removes the current feature from the project\n  removeFromProject(feature){\n    this.closeFeatureMenu();\n    this.unselectItem(feature);\n  }\n  \n  //zooms to a features extent\n  zoomToFeature(feature){\n    this.closeFeatureMenu();\n    //transform from BOX(-174.173506487 -18.788241791,-173.86528589 -18.5190063499999) to [[-73.9876, 40.7661], [-73.9397, 40.8002]]\n    let points = feature.extent.substr(4, feature.extent.length-5).replace(/ /g,\",\").split(\",\");\n    //get the points as numbers\n    let nums = points.map((item) => {return Number(item)});\n    //zoom to the feature\n    this.map.fitBounds([[nums[0], nums[1]],[nums[2], nums[3]]], { padding: 100});\n  }\n  \n  //gets a list of projects for a feature\n  getProjectsForFeature(feature){\n    return new Promise((resolve, reject) => {\n      this._get(\"listProjectsForFeature?feature_class_id=\" + feature.id).then((response) => {\n          resolve(response.projects);\n        });\n    });\n  }\n  \n  //gets a list of projects for either a feature or a planning grid\n  getProjectList(obj, _type){\n    if (_type === \"feature\"){\n      this.getProjectsForFeature(obj).then((projects)=>{\n        this.showProjectListDialog(projects,\"Projects list\", \"The feature is used in the following projects:\");  \n      });\n    }else{\n      this.getProjectsForPlanningGrid(obj.feature_class_name).then((projects)=>{\n        this.showProjectListDialog(projects,\"Projects list\", \"The feature is used in the following projects:\");  \n      });\n    } \n  }\n  \n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  ////////////////////////// DIALOG OPENING/CLOSING FUNCTIONS\n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n  showUserMenu(e) {\n    e.preventDefault();\n    this.setState({ userMenuOpen: true, menuAnchor: e.currentTarget });\n  }\n  hideUserMenu(e) {\n    this.setState({ userMenuOpen: false });\n  }\n  showHelpMenu(e) {\n    e.preventDefault();\n    this.setState({ helpMenuOpen: true, menuAnchor: e.currentTarget });\n  }\n  hideHelpMenu(e) {\n    this.setState({ helpMenuOpen: false });\n  }\n  showToolsMenu(e) {\n    e.preventDefault();\n    this.setState({ toolsMenuOpen: true, menuAnchor: e.currentTarget });\n  }\n  hideToolsMenu(e) {\n    this.setState({ toolsMenuOpen: false });\n  }\n  openRegisterDialog() {\n    this.setState({ registerDialogOpen: true });\n  }\n  closeRegisterDialog() {\n    this.setState({ registerDialogOpen: false });\n  }\n  openResendPasswordDialog() {\n    this.setState({ resendPasswordDialogOpen: true });\n  }\n  closeResendPasswordDialog() {\n    this.setState({ resendPasswordDialogOpen: false });\n  }\n  openProjectsDialog() {\n    this.setState({ projectsDialogOpen: true });\n    this.getProjects();\n  }\n  closeProjectsDialog() {\n    this.setState({ projectsDialogOpen: false, importProjectPopoverOpen:false });\n  }\n  openNewProjectDialog() {\n    this.setState({ newProjectDialogOpen: true });\n  }\n  closeNewProjectDialog() {\n    this.setState({ newProjectDialogOpen: false });\n  }\n  openNewProjectWizardDialog(){\n    this.getCountries();\n    this.setState({ newProjectWizardDialogOpen: true });\n  }\n  closeNewProjectWizardDialog(){\n    this.setState({ newProjectWizardDialogOpen: false });\n  }\n  openNewPlanningGridDialog() {\n    this.getCountries();\n    this.setState({ NewPlanningGridDialogOpen: true });\n  }\n  closeNewPlanningGridDialog() {\n    this.setState({ NewPlanningGridDialogOpen: false });\n  }\n  openImportPlanningGridDialog(){\n    this.setState({ importPlanningGridDialogOpen: true });\n  }\n  closeImportPlanningGridDialog(){\n    this.setState({ importPlanningGridDialogOpen: false });\n  }\n  openInfoDialog() {\n      this.setState({ openInfoDialogOpen: true, featureMenuOpen: false });\n  }\n  closeInfoDialog() {\n      this.setState({ openInfoDialogOpen: false });\n  }\n\n  openUserSettingsDialog() {\n    this.setState({ UserSettingsDialogOpen: true });\n    this.hideUserMenu();\n  }\n\n  closeUserSettingsDialog() {\n    this.setState({ UserSettingsDialogOpen: false });\n  }\n\n  openProfileDialog() {\n    this.setState({ profileDialogOpen: true });\n    this.hideUserMenu();\n  }\n  closeProfileDialog() {\n    this.setState({ profileDialogOpen: false });\n  }\n  \n  openAboutDialog(){\n    this.setState({ aboutDialogOpen: true });\n    this.hideHelpMenu();\n  }\n\n  closeAboutDialog() {\n    this.setState({ aboutDialogOpen: false });\n  }\n  \n  showRunSettingsDialog() {\n    this.setState({ settingsDialogOpen: true });\n  }\n  \n  closeRunSettingsDialog() {\n    this.setState({ settingsDialogOpen: false });\n  }\n\n  openClassificationDialog() {\n    this.setState({ classificationDialogOpen: true });\n  }\n  closeClassificationDialog() {\n    this.setState({ classificationDialogOpen: false });\n  }\n\n  openImportProjectDialog() {\n    this.setState({ importProjectDialogOpen: true });\n  }\n  closeImportDialog() {\n    this.setState({ importProjectDialogOpen: false });\n  }\n  openImportMXWDialog() {\n    this.setState({ importMXWDialogOpen: true });\n  }\n  closeImportMXWDialog() {\n    this.setState({ importMXWDialogOpen: false });\n  }\n  openUsersDialog() {\n    this.getUsers();\n    this.setState({ usersDialogOpen: true });\n  }\n  closeUsersDialog() {\n    this.setState({ usersDialogOpen: false });\n  }\n  closeAlertDialog(){\n    this.setState({alertDialogOpen: false});\n  }\n  hideResults() {\n    this.setState({ resultsPanelOpen: false });\n  }\n  showResults() {\n    this.setState({ resultsPanelOpen: true });\n  }\n  \n  toggleInfoPanel() {\n    this.setState({ infoPanelOpen: !this.state.infoPanelOpen });\n  }\n  toggleResultsPanel() {\n    this.setState({ resultsPanelOpen: !this.state.resultsPanelOpen });\n  }\n  \n  openRunLogDialog(){\n    this.getRunLogs();\n    this.startPollingRunLogs();\n    this.setState({runLogDialogOpen: true});\n  }\n  closeRunLogDialog(){\n    this.stopPollingRunLogs();\n    this.setState({runLogDialogOpen: false});\n  }\n  openResetDialog(){\n    this.setState({resetDialogOpen: true});\n  }\n  closeResetDialog(){\n    this.setState({resetDialogOpen: false});\n  }\n  openGapAnalysisDialog(){\n    this.setState({gapAnalysisDialogOpen: true, gapAnalysis: []});\n    this.runGapAnalysis();\n  }\n  closeGapAnalysisDialog(){\n    this.setState({gapAnalysisDialogOpen: false, gapAnalysis: []});\n  }\n  openServerDetailsDialog(){\n    this.setState({serverDetailsDialogOpen: true});\n    this.hideHelpMenu();\n  }\n  closeServerDetailsDialog(){\n    this.setState({serverDetailsDialogOpen: false});\n  }\n  openChangePasswordDialog(){\n    this.hideUserMenu();\n    this.setState({changePasswordDialogOpen: true});\n  }\n  closeChangePasswordDialog(){\n    this.setState({changePasswordDialogOpen: false});\n  }\n  \n  showProjectListDialog(projectList, projectListDialogTitle, projectListDialogHeading){\n    this.setState({projectList: projectList, projectListDialogTitle: projectListDialogTitle, projectListDialogHeading: projectListDialogHeading}, ()=> {\n      this.openProjectsListDialog();\n    });\n  }\n  openProjectsListDialog(){\n    this.setState({ProjectsListDialogOpen: true});\n  }\n  closeProjectsListDialog(){\n    this.setState({ProjectsListDialogOpen: false});\n  }\n  openTargetDialog(){\n    this.setState({targetDialogOpen:true});\n  }\n  closeTargetDialog(){\n    this.setState({targetDialogOpen:false});\n  }\n  openShareableLinkDialog(){\n    this.setState({shareableLinkDialogOpen: true});\n  }\n  closeShareableLinkDialog(){\n    this.setState({shareableLinkDialogOpen: false});\n  }\n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  ////////////////////////// PROTECTED AREAS LAYERS STUFF\n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n  changeIucnCategory(iucnCategory) {\n    //update the state\n    let _metadata = this.state.metadata;\n    _metadata.IUCN_CATEGORY = iucnCategory;\n    this.setState({ metadata: _metadata });\n    //update the input.dat file\n    this.updateProjectParameter(\"IUCN_CATEGORY\", iucnCategory);\n    //filter the wdpa vector tiles - NO LONGER USED\n    // this.filterWdpaByIucnCategory(iucnCategory);\n    //render the wdpa intersections on the grid\n    this.renderPAGridIntersections(iucnCategory);\n  }\n\n  filterWdpaByIucnCategory(iucnCategory) {\n    //get the individual iucn categories\n    let iucnCategories = this.getIndividualIucnCategories(iucnCategory);\n    //TODO FILTER THE WDPA CLIENT SIDE BY INTERSECTING IT WITH THE PLANNING GRID\n    //filter the vector tiles for those iucn categories - and if the planning unit name has an iso3 country code - then use that as well. e.g. pu_ton_marine_hexagon_50 (has iso3 code) or pu_a4402723a92444ff829e9411f07e7 (no iso3 code)\n    //let filterExpr = (this.state.metadata.PLANNING_UNIT_NAME.match(/_/g).length> 1) ? ['all', ['in', 'IUCN_CAT'].concat(iucnCategories), ['==', 'PARENT_ISO', this.state.metadata.PLANNING_UNIT_NAME.substr(3, 3).toUpperCase()]] : ['all', ['in', 'IUCN_CAT'].concat(iucnCategories)];\n    let filterExpr = ['all', ['in', 'iucn_cat'].concat(iucnCategories)]; // no longer filter by ISO code\n    this.map.setFilter(CONSTANTS.WDPA_LAYER_NAME, filterExpr);\n    //turn on/off the protected areas legend\n    (iucnCategory === \"None\") ? this.hidePALegend() : this.showPALegend();\n  }\n\n  getIndividualIucnCategories(iucnCategory) {\n    let retValue = [];\n    switch (iucnCategory) {\n      case 'None':\n        retValue = [''];\n        break;\n      case 'IUCN I-II':\n        retValue = ['Ia', 'Ib', 'II'];\n        break;\n      case 'IUCN I-IV':\n        retValue = ['Ia', 'Ib', 'II', 'III', 'IV'];\n        break;\n      case 'IUCN I-V':\n        retValue = ['Ia', 'Ib', 'II', 'III', 'IV', 'V'];\n        break;\n      case 'IUCN I-VI':\n        retValue = ['Ia', 'Ib', 'II', 'III', 'IV', 'V', 'VI'];\n        break;\n      case 'All':\n        retValue = ['Ia', 'Ib', 'II', 'III', 'IV', 'V', 'VI','Not Reported','Not Applicable','Not Assigned'];\n        break;\n      default:\n    }\n    return retValue;\n  }\n\n  //gets the puids for those protected areas that intersect the planning grid in the passed iucn category\n  getPuidsFromIucnCategory(iucnCategory) {\n    let intersections_by_category = this.getIntersections(iucnCategory);\n    //get all the puids in this iucn category \n    let puids = this.getPuidsFromNormalisedData(intersections_by_category);\n    return puids;\n  }\n\n  //called when the iucn category changes - gets the puids that need to be added/removed, adds/removes them and updates the PuEdit layer\n  async renderPAGridIntersections(iucnCategory) {\n    await this.preprocessProtectedAreas(iucnCategory).then((intersections) => {\n      //get all the puids of the intersecting protected areas in this iucn category \n      let puids = this.getPuidsFromIucnCategory(iucnCategory);\n      //see if any of them will overwrite existing manually edited planning units - these will be in status 1 and 3\n      let manuallyEditedPuids = this.getPlanningUnitsByStatus(1).concat(this.getPlanningUnitsByStatus(3));\n      let clashingPuids = manuallyEditedPuids.filter(value => -1 !== puids.indexOf(value));\n      if (clashingPuids.length > 0){\n        //remove them from the puids\n        puids = puids.filter((item) => !clashingPuids.includes(item));\n        this.setSnackBar(\"Not all planning units have been added. See <a href='\" + CONSTANTS.ERRORS_PAGE + \"#not-all-planning-units-have-been-added' target='blank'>here</a>\");\n      }\n      //get all the puids for the existing iucn category - these will come from the previousPuids rather than getPuidsFromIucnCategory as there may have been some clashes and not all of the puids from getPuidsFromIucnCategory may actually be renderered\n      //if the previousPuids are undefined then get them from the projects previousIucnCategory\n      let previousPuids = (this.previousPuids !== undefined) ? this.previousPuids : this.getPuidsFromIucnCategory(this.previousIucnCategory);\n      //set the previously selected puids\n      this.previousPuids = puids;\n      //and previousIucnCategory\n      this.previousIucnCategory = iucnCategory;\n      //rerender\n      this.updatePlanningUnits(previousPuids, puids);\n    }).catch((error) => {\n      this.setSnackBar(error);\n    });\n  }\n\n  //updates the planning units by reconciling the passed arrays of puids\n  updatePlanningUnits(previousPuids, puids){\n    //copy the current planning units state\n    let statuses = this.state.planning_units;\n    //get the new puids that need to be added\n    let newPuids = this.getNewPuids(previousPuids, puids);\n    if (newPuids.length === 0) {\n      //get the puids that need to be removed\n      let oldPuids = this.getNewPuids(puids, previousPuids);\n      this.removePuidsFromArray(statuses, 2, oldPuids);\n    }\n    else {\n      //add all the new protected area intersections into the planning units as status 2\n      this.appPuidsToPlanningUnits(statuses, 2, newPuids);\n    }\n    //update the state\n    this.setState({ planning_units: statuses });\n    //re-render the layer\n    this.renderPuEditLayer();\n    //update the pu.dat file\n    this.updatePuDatFile();\n  }\n  \n  getNewPuids(previousPuids, puids) {\n    return puids.filter((i) => {\n      return previousPuids.indexOf(i) === -1;\n    });\n  }\n\n  //turns on the legend for the protected areas\n  showPALegend(){\n    this.setState({pa_layer_visible:true});\n  }\n  \n  //hides the protected area legend\n  hidePALegend(){\n    this.setState({pa_layer_visible:false});  \n  }\n  preprocessProtectedAreas(iucnCategory) {\n    //have the intersections already been calculated\n    if (this.state.protected_area_intersections.length>0) {\n      return Promise.resolve(this.state.protected_area_intersections);\n    }\n    else {\n      //do the intersection on the server\n      return new Promise((resolve, reject) => {\n        //start the logging\n        this.startLogging();\n        //call the websocket \n        this._ws(\"preprocessProtectedAreas?user=\" + this.state.owner + \"&project=\" + this.state.project + \"&planning_grid_name=\" + this.state.metadata.PLANNING_UNIT_NAME, this.wsMessageCallback.bind(this)).then((message) => {\n          //set the state\n          this.setState({protected_area_intersections:message.intersections});\n          //return a value to the then() call\n          resolve(message);\n        }).catch((error) => {\n          reject(error);\n        });\n      }); //return\n    }\n  }\n\n  getIntersections(iucnCategory) {\n    //get the individual iucn categories\n    let _iucn_categories = this.getIndividualIucnCategories(iucnCategory);\n    //get the planning units that intersect the protected areas with the passed iucn category\n    return this.state.protected_area_intersections.filter((item) => { return (_iucn_categories.indexOf(item[0]) > -1); });\n  }\n\n  //downloads and updates the WDPA on the server\n  updateWDPA(){\n    //start the logging\n    this.startLogging();\n    //call the webservice\n    return new Promise((resolve, reject) => {\n      this._ws(\"updateWDPA?downloadUrl=\" + this.state.registry.WDPA.downloadUrl + \"&wdpaVersion=\" + this.state.registry.WDPA.latest_version, this.wsMessageCallback.bind(this)).then((message) => {\n        //websocket has finished - set the new version of the wdpa\n        let obj = Object.assign(this.state.marxanServer, {wdpa_version: this.state.registry.WDPA.latest_version});\n        //update the state and when it is finished, re-add the wdpa source and layer\n        this.setState({newWDPAVersion: false, marxanServer: obj}, ()=> {\n          //set the source for the WDPA layer to the new vector tiles\n          this.setWDPAVectorTilesLayerName(this.state.registry.WDPA.latest_version);\n          //remove the existing WDPA layer and source\n          this.removeMapLayer(CONSTANTS.WDPA_LAYER_NAME);\n          if (this.map && this.map.getSource(CONSTANTS.WDPA_SOURCE_NAME) !== undefined) this.map.removeSource(CONSTANTS.WDPA_SOURCE_NAME);\n          //re-add the WDPA source and layer\n          this.addWDPASource();\n          this.addWDPALayer();\n          //reset the protected area intersections on the client\n          this.setState({protected_area_intersections:[]});\n          //recalculate the protected area intersections and refilter the vector tiles\n          this.changeIucnCategory(this.state.metadata.IUCN_CATEGORY);\n          //close the dialog\n          this.closeWDPAUpdateDialog();\n        });\n        resolve(message);\n      }).catch((error) => {\n        reject(error);\n      });\n    }); //return\n  }\n  \n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  ////////////////////////// BOUNDARY LENGTH MODIFIER AND CLUMPING\n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n  async preprocessBoundaryLengths(iucnCategory) {\n    if (this.state.files.BOUNDNAME){ //if the bounds.dat file already exists\n      return Promise.resolve();\n    }else{\n      //calculate the boundary lengths on the server\n      return new Promise((resolve, reject) => {\n        //start the logging\n        this.startLogging();\n        //call the websocket \n        this._ws(\"preprocessPlanningUnits?user=\" + this.state.owner + \"&project=\" + this.state.project, this.wsMessageCallback.bind(this)).then((message) => {\n          //update the state\n          var currentFiles = this.state.files;\n          currentFiles.BOUNDNAME = \"bounds.dat\";\n          this.setState({files: currentFiles});\n          //return a value to the then() call\n          resolve(message);\n        }).catch((error) => {\n          reject(error);\n        });\n      }); //return\n    }\n  }\n\n  showClumpingDialog(){\n    //update the map centre and zoom state which is used by the maps in the clumping dialog\n    this.updateMapCentreAndZoom();\n    //when the boundary lengths have been calculated\n    this.preprocessBoundaryLengths().then((intersections) => {\n      //update the spec.dat file with any that have been added or removed or changed target or spf\n      this.updateSpecFile().then((value) => {\n        //when the species file has been updated, update the planning unit file \n        this.updatePuFile();\n        //when the planning unit file has been updated, update the PuVSpr file - this does all the preprocessing using web sockets\n        this.updatePuvsprFile().then((value) => {\n          //show the clumping dialog\n          this.setState({ clumpingDialogOpen: true, clumpingRunning: true });\n        });\n      }).catch((error) => { //updateSpecFile error\n        \n      });\n    }).catch((error) => { //preprocessBoundaryLengths error\n      console.log(error);\n    }); \n  }\n\n  hideClumpingDialog(){\n    //delete the project group\n    this.deleteProjects();\n    //reset the paint properties in the clumping dialog\n    this.resetPaintProperties();\n    //return state to normal\n    this.setState({ clumpingDialogOpen: false });\n  }\n\n  //creates a group of 5 projects with UUIDs in the _clumping folder\n  createProjectGroupAndRun(blmValues){\n    //clear any exists projects\n    if (this.projects) this.deleteProjects();\n    return new Promise((resolve, reject) => {\n      this._get(\"createProjectGroup?user=\" + this.state.owner + \"&project=\" + this.state.project + \"&copies=5&blmValues=\" + blmValues.join(\",\")).then((response) => {\n        //set the local variable for the projects\n        this.projects = response.data;\n        //run the projects\n        this.runProjects(response.data);\n        resolve(\"Project group created\");\n      }).catch((error) => {\n        //do something\n        reject(error);\n      });\n    });\n  }\n  \n  //deletes the projects from the _clumping folder\n  deleteProjects(){\n    if (this.projects){\n      var projectNames = this.projects.map((item) => {\n        return item.projectName;\n      });\n      //clear the local variable\n      this.projects = undefined;\n      return new Promise((resolve, reject) => {\n        this._get(\"deleteProjects?projectNames=\" + projectNames.join(\",\")).then((response) => {\n          resolve(\"Projects deleted\");\n        }).catch((error) => {\n          reject(error);\n        });\n      });\n    }\n  }\n  \n  runProjects(projects){\n    //reset the counter\n    this.projectsRun = 0;\n    //set the intitial state\n    this.setState({clumpingRunning: true});\n    //run the projects\n    projects.forEach((project) => {\n      this.startMarxanJob(\"_clumping\", project.projectName, false).then((response) => {\n        if (!this.checkForErrors(response, false)) {\n          //run completed - get a single solution\n          this.loadOtherSolution(response.user, response.project, 1);\n        }\n        //increment the project counter\n        this.projectsRun = this.projectsRun + 1;\n        //set the state\n        if (this.projectsRun===5) this.setState({clumpingRunning: false});\n      });\n    });\n  }\n  \n  rerunProjects(blmChanged, blmValues){\n    //reset the paint properties in the clumping dialog\n    this.resetPaintProperties();\n    //if the blmValues have changed then recreate the project group and run\n    if (blmChanged){\n      this.createProjectGroupAndRun(blmValues);\n    }else{\n      //rerun the projects\n      this.runProjects(this.projects);\n    }\n  }\n  \n  setBlmValue(blmValue){\n    var newRunParams = [], value;\n    //iterate through the run parameters and update the value for the blm\n    this.state.runParams.forEach((item) => {\n      value = (item.key === 'BLM') ? String(blmValue) : item.value;\n      newRunParams.push({key: item.key, value: value});\n    });\n    //update this run parameters\n    this.updateRunParams(newRunParams);\n  }\n\n  resetPaintProperties(){\n    //reset the paint properties\n    this.setState({map0_paintProperty:[],map1_paintProperty:[],map2_paintProperty:[],map3_paintProperty:[],map4_paintProperty:[]});\n  }\n  \n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  ////////////////////////// MANAGING RUNS\n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n  //called when the run log dialog opens and starts polling the run log\n  startPollingRunLogs(){\n    this.runlogTimer = setInterval(() => {\n       this.getRunLogs();\n    }, 5000);\n  }\n\n  //called when the run log dialog closes and stops polling the run log\n  stopPollingRunLogs(){\n    clearInterval(this.runlogTimer);    \n  }\n  //returns the log of all of the runs from the server\n  getRunLogs(){\n    if (!this.state.unauthorisedMethods.includes(\"getRunLogs\")){\n      this._get(\"getRunLogs\").then((response) => {\n          this.setState({runLogs: response.data});\n      });\n    }\n  }\n  \n  //clears the records from the run logs file\n  clearRunLogs(){\n    this._get(\"clearRunLogs\").then((response) => {\n        this.getRunLogs();\n    });\n  }\n  \n  getShareableLink(){\n    this.openShareableLinkDialog();\n  }\n\n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  ////////////////////////// GAP ANALYSIS\n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  \n  runGapAnalysis(){\n    return new Promise((resolve, reject) => {\n      //switches the results pane to the log tab\n      this.log_tab_active();\n      //call the websocket \n      this._ws(\"runGapAnalysis?user=\" + this.state.owner + \"&project=\" + this.state.project, this.wsMessageCallback.bind(this)).then((message) => {\n        this.setState({gapAnalysis: message.data});\n        resolve(message);\n      }).catch((error) => {\n        reject(error);\n      });\n    });\n    \n  }\n  \n  //deletes a stored gap analysis on the server\n  deleteGapAnalysis(){\n    this._get(\"deleteGapAnalysis?user=\" + this.state.owner + \"&project=\" + this.state.project).then((response) => {\n      console.log(response);\n    });\n  }\n  \n  setAddToProject(evt, isChecked){\n    this.setState({addToProject: isChecked});\n  }\n  \n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  ////////////////////////// COSTS\n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n  //changes the cost profile for a project\n  changeCostname(costname){\n    return new Promise((resolve, reject) => {\n      this._get(\"updateCosts?user=\" + this.state.owner + \"&project=\" + this.state.project + \"&costname=\" + costname).then((response) => {\n        //update the state\n        this.setState({ metadata: Object.assign(this.state.metadata, { COSTS: costname })});\n        resolve();\n      }).catch((error) => {\n        reject(error);\n      });\n    });\n  }\n  \n  //loads the costs layer\n  loadCostsLayer(forceReload=false){\n    this.setState({costsLoading:true});\n    this.getPlanningUnitsCostData(forceReload).then((cost_data)=>{\n      this.renderPuCostLayer(cost_data).then(()=>{\n        this.setState({costsLoading:false});\n        //do something\n      });\n    });\n  }\n\n  //gets the cost data either from cache (if it has already been loaded) or from the server\n  getPlanningUnitsCostData(forceReload){\n    return new Promise((resolve, reject) => {\n      //if the cost data has already been loaded\n      if (this.cost_data && !forceReload) {\n        resolve(this.cost_data);\n      }else{\n        this._get(\"getPlanningUnitsCostData?user=\" + this.state.owner + \"&project=\" + this.state.project).then((response) => {\n          //save the cost data to a local variable\n          this.cost_data = response;\n          resolve(response);\n        }).catch((error) => {\n          //do something\n        });\n      }\n    });\n  }\n\n  //after clicking cancel in the ImportCostsDialog\n  deleteCostFileThenClose(costname){\n    return new Promise((resolve, reject) => {\n      if (costname){\n        //delete the cost file\n        this.deleteCost(costname).then( _ =>{\n          //close the import costs dialog\n          this.closeImportCostsDialog();\n          resolve();\n        });\n      }else{\n        resolve();\n      }\n    });\n  }\n  //adds a cost in application state\n  addCost(costname){\n    //update the state\n    let _costnames = this.state.costnames;\n    //add the cost profile\n    _costnames.push(costname);\n    this.setState({ costnames: _costnames});\n  }\n  //deletes a cost file on the server\n  deleteCost(costname){\n    return new Promise((resolve, reject) => {\n      this._get(\"deleteCost?user=\" + this.state.owner + \"&project=\" + this.state.project + \"&costname=\" + costname).then((response) => {\n        //update the state\n        let _costnames = this.state.costnames;\n        //remove the deleted cost profile\n        _costnames = _costnames.filter(item=>item!==costname);\n        this.setState({ costnames: _costnames});\n        resolve();\n      }).catch((error) => {\n        reject(error);\n      });\n    });\n  }\n  //restores the database back to its original state and runs a git reset on the file system\n  resetServer(){\n    return new Promise((resolve, reject) => {\n      //switches the results pane to the log tab\n      this.log_tab_active();\n      //call the websocket \n      this._ws(\"resetDatabase\", this.wsMessageCallback.bind(this)).then((message) => {\n        //websocket has finished\n        resolve(message);\n        this.closeResetDialog();\n      }).catch((error) => {\n        reject(error);\n        this.closeResetDialog();\n      });\n    });\n  }\n  \n  //cleans up the server - removes dissolved WDPA feature classes, deletes orphaned feature classes, scratch feature classes and clumping files\n  cleanup(){\n    return new Promise((resolve, reject) => {\n      this._get(\"cleanup?\").then((response) => {\n        resolve();\n      }).catch((error) => {\n        reject(error);\n      });\n    });\n  }\n  \n  render() {\n    const message = (<span id=\"snackbar-message-id\" dangerouslySetInnerHTML={{ __html: this.state.snackbarMessage }} />);    \n    return (\n      <MuiThemeProvider>\n        <React.Fragment>\n          <div ref={el => this.mapContainer = el} className=\"absolute top right left bottom\" />\n          <LoadingDialog\n            open={this.state.shareableLink}\n          />\n          <LoginDialog \n            open={!this.state.loggedIn} \n            onOk={this.validateUser.bind(this)} \n            onCancel={this.openRegisterDialog.bind(this)} \n            loading={this.state.loading} \n            user={this.state.user} \n            password={this.state.password} \n            changeUserName={this.changeUserName.bind(this)} \n            changePassword={this.changePassword.bind(this)} \n            openResendPasswordDialog={this.openResendPasswordDialog.bind(this)}\n            marxanServers={this.state.marxanServers}\n            selectServer={this.selectServer.bind(this)}\n            marxanServer={this.state.marxanServer}\n            marxanClientReleaseVersion={MARXAN_CLIENT_VERSION}\n          />\n          <RegisterDialog \n            open={this.state.registerDialogOpen} \n            onOk={this.createNewUser.bind(this)}\n            onCancel={this.closeRegisterDialog.bind(this)}\n            loading={this.state.loading} \n          />\n          <ResendPasswordDialog\n            open={this.state.resendPasswordDialogOpen} \n            onOk={this.resendPassword.bind(this)}\n            onCancel={this.closeResendPasswordDialog.bind(this)}\n            loading={this.state.loading} \n            changeEmail={this.changeEmail.bind(this)} \n            email={this.state.resendEmail} \n          />\n          <Welcome\n            open={this.state.userData.SHOWWELCOMESCREEN && this.state.welcomeDialogOpen} \n            onOk={this.closeWelcomeDialog.bind(this)}\n            onCancel={this.closeWelcomeDialog.bind(this)}\n            userData={this.state.userData}\n            saveOptions={this.saveOptions.bind(this)}\n            notifications={this.state.notifications}\n            resetNotifications={this.resetNotifications.bind(this)}\n            removeNotification={this.removeNotification.bind(this)}\n            openNewProjectDialog={this.openNewProjectWizardDialog.bind(this)}\n          />\n          <ToolsMenu\n            open={this.state.toolsMenuOpen} \n            menuAnchor={this.state.menuAnchor}\n            hideToolsMenu={this.hideToolsMenu.bind(this)}\n            openUsersDialog={this.openUsersDialog.bind(this)}\n            openRunLogDialog={this.openRunLogDialog.bind(this)}\n            openGapAnalysisDialog={this.openGapAnalysisDialog.bind(this)}\n            openResetDialog={this.openResetDialog.bind(this)}\n            userRole={this.state.userData.ROLE}\n            marxanServer={this.state.marxanServer}\n            metadata={this.state.metadata}\n            cleanup={this.cleanup.bind(this)}\n          />\n          <UserMenu \n            open={this.state.userMenuOpen} \n            menuAnchor={this.state.menuAnchor}\n            user={this.state.user}\n            userRole={this.state.userData.ROLE}\n            hideUserMenu={this.hideUserMenu.bind(this)} \n            openUserSettingsDialog={this.openUserSettingsDialog.bind(this)}\n            openProfileDialog={this.openProfileDialog.bind(this)}\n            logout={this.logout.bind(this)}\n            marxanServer={this.state.marxanServer}\n            openChangePasswordDialog={this.openChangePasswordDialog.bind(this)}\n          />\n          <HelpMenu \n            open={this.state.helpMenuOpen} \n            menuAnchor={this.state.menuAnchor}\n            hideHelpMenu={this.hideHelpMenu.bind(this)} \n            openAboutDialog={this.openAboutDialog.bind(this)}\n          />\n          <UserSettingsDialog \n            open={this.state.UserSettingsDialogOpen}\n            onOk={this.closeUserSettingsDialog.bind(this)}\n            onCancel={this.closeUserSettingsDialog.bind(this)}\n            loading={this.state.loading} \n            userData={this.state.userData}\n            saveOptions={this.saveOptions.bind(this)}\n            changeBasemap={this.setBasemap.bind(this)}\n            basemaps={this.state.basemaps}\n            basemap={this.state.basemap}\n          />\n          <UsersDialog\n            open={this.state.usersDialogOpen}\n            onOk={this.closeUsersDialog.bind(this)}\n            onCancel={this.closeUsersDialog.bind(this)}\n            loading={this.state.loading}\n            user={this.state.user}\n            users={this.state.users}\n            deleteUser={this.deleteUser.bind(this)}\n            changeRole={this.changeRole.bind(this)}\n            guestUserEnabled={this.state.marxanServer.guestUserEnabled}\n            toggleEnableGuestUser={this.toggleEnableGuestUser.bind(this)}\n          />\n          <ProfileDialog \n            open={this.state.profileDialogOpen}\n            onOk={this.closeProfileDialog.bind(this)}\n            onCancel={this.closeProfileDialog.bind(this)}\n            loading={this.state.loading}\n            userData={this.state.userData}\n            updateUser={this.updateUser.bind(this)}\n          />\n          <AboutDialog \n            open={this.state.aboutDialogOpen}\n            onOk={this.closeAboutDialog.bind(this)}\n            marxanClientReleaseVersion={MARXAN_CLIENT_VERSION}\n            wdpaAttribution={this.state.wdpaAttribution}\n          />\n          <InfoPanel\n            open={this.state.infoPanelOpen}\n            activeTab={this.state.activeTab}\n            user={this.state.user}\n            owner={this.state.owner}\n            project={this.state.project}\n            metadata={this.state.metadata}\n            runMarxan={this.runMarxan.bind(this)} \n            stopProcess={this.stopProcess.bind(this)}\n            pid={this.state.pid}\n            renameProject={this.renameProject.bind(this)}\n            renameDescription={this.renameDescription.bind(this)}\n            features={this.state.projectFeatures}\n            project_tab_active={this.project_tab_active.bind(this)}\n            features_tab_active={this.features_tab_active.bind(this)}\n            pu_tab_active={this.pu_tab_active.bind(this)}\n            startPuEditSession={this.startPuEditSession.bind(this)}\n            stopPuEditSession={this.stopPuEditSession.bind(this)}\n            puEditing={this.state.puEditing}\n            clearManualEdits={this.clearManualEdits.bind(this)}\n            showRunSettingsDialog={this.showRunSettingsDialog.bind(this)}\n            openFeatureMenu={this.openFeatureMenu.bind(this)}\n            preprocessing={this.state.preprocessing}\n            openFeaturesDialog={this.openFeaturesDialog.bind(this)}\n            changeIucnCategory={this.changeIucnCategory.bind(this)}\n            updateFeature={this.updateFeature.bind(this)}\n            userRole={this.state.userData.ROLE}\n            toggleProjectPrivacy={this.toggleProjectPrivacy.bind(this)}\n            openTargetDialog={this.openTargetDialog.bind(this)}\n            getShareableLink={this.getShareableLink.bind(this)}\n            marxanServer={this.state.marxanServer}\n            toggleFeatureLayer={this.toggleFeatureLayer.bind(this)}\n            toggleFeaturePUIDLayer={this.toggleFeaturePUIDLayer.bind(this)}\n            useFeatureColors={this.state.userData.USEFEATURECOLORS}\n            smallLinearGauge={this.state.smallLinearGauge}\n            costname={this.state.metadata.COSTS}\n            costnames={this.state.costnames}\n            changeCostname={this.changeCostname.bind(this)}\n            loadCostsLayer={this.loadCostsLayer.bind(this)}\n            loading={this.state.loading}\n            openCostsDialog={this.openCostsDialog.bind(this)}\n            protected_area_intersections={this.state.protected_area_intersections}\n          />\n          <ResultsPanel\n            open={this.state.resultsPanelOpen}\n            preprocessing={this.state.preprocessing}\n            solutions={this.state.solutions}\n            loadSolution={this.loadSolution.bind(this)} \n            openClassificationDialog={this.openClassificationDialog.bind(this)}\n            hideResults={this.hideResults.bind(this)}\n            brew={this.state.brew}\n            messages={this.state.logMessages} \n            activeResultsTab={this.state.activeResultsTab}\n            legend_tab_active={this.legend_tab_active.bind(this)}\n            solutions_tab_active={this.solutions_tab_active.bind(this)}\n            log_tab_active={this.log_tab_active.bind(this)}\n            clearLog={this.clearLog.bind(this)}\n            owner={this.state.owner}\n            resultsLayer={this.state.resultsLayer}\n            wdpaLayer={ this.state.wdpaLayer }\n            pa_layer_visible={this.state.pa_layer_visible}\n            changeOpacity={this.changeOpacity.bind(this)}\n            userRole={this.state.userData.ROLE}\n            visibleLayers={this.state.visibleLayers}\n            metadata={this.state.metadata}\n            costsLoading={this.state.costsLoading}\n          />\n          <FeatureInfoDialog\n            open={this.state.openInfoDialogOpen}\n            onOk={this.closeInfoDialog.bind(this)}\n            onCancel={this.closeInfoDialog.bind(this)}\n            loading={this.state.loading}\n            feature={this.state.currentFeature}\n            updateFeature={this.updateFeature.bind(this)}\n            userRole={this.state.userData.ROLE}\n            reportUnits={this.state.userData.REPORTUNITS}\n          />\n          <IdentifyPopup\n            visible={this.state.identifyVisible}\n            xy={this.state.popup_point}\n            identifyPlanningUnits={this.state.identifyPlanningUnits}\n            identifyProtectedAreas={this.state.identifyProtectedAreas}\n            identifyFeatures={this.state.identifyFeatures}\n            loading={this.state.loading}\n            hideIdentifyPopup={this.hideIdentifyPopup.bind(this)}\n            reportUnits={this.state.userData.REPORTUNITS}\n            metadata={this.state.metadata}\n          />\n          <ProjectsDialog \n            open={this.state.projectsDialogOpen} \n            onOk={this.closeProjectsDialog.bind(this)}\n            onCancel={this.closeProjectsDialog.bind(this)}\n            loading={this.state.loading}\n            projects={this.state.projects}\n            oldVersion={this.state.metadata.OLDVERSION}\n            deleteProject={this.deleteProject.bind(this)}\n            loadProject={this.loadProject.bind(this)}\n            exportProject={this.exportProject.bind(this)}\n            cloneProject={this.cloneProject.bind(this)}\n            openNewProjectDialog={this.openNewProjectDialog.bind(this)}\n            openImportProjectDialog={this.openImportProjectDialog.bind(this)}\n            unauthorisedMethods={this.state.unauthorisedMethods}\n            userRole={this.state.userData.ROLE}\n            getAllFeatures={this.getAllFeatures.bind(this)}\n            importProjectPopoverOpen={this.state.importProjectPopoverOpen}\n            showImportProjectPopover={this.showImportProjectPopover.bind(this)}\n            hideImportProjectPopover={this.hideImportProjectPopover.bind(this)}\n            openImportMXWDialog={this.openImportMXWDialog.bind(this)}\n            closeImportMXWDialog={this.closeImportMXWDialog.bind(this)}\n            importMXWDialogOpen={this.state.importMXWDialogOpen}\n          />\n          <NewProjectDialog\n            open={this.state.newProjectDialogOpen}\n            registry={this.state.registry}\n            onOk={this.closeNewProjectDialog.bind(this)}\n            loading={this.state.loading}\n            getPlanningUnitGrids={this.getPlanningUnitGrids.bind(this)}\n            planning_unit_grids={this.state.planning_unit_grids}\n            openFeaturesDialog={this.openFeaturesDialog.bind(this)}\n            features={this.state.allFeatures} \n            openCostsDialog={this.openCostsDialog.bind(this)}\n            selectedCosts={this.state.selectedCosts}\n            createNewProject={this.createNewProject.bind(this)}\n    \t\t\t\tpreviewFeature={this.previewFeature.bind(this)} \n          />\n          <NewProjectWizardDialog\n            open={this.state.newProjectWizardDialogOpen}\n            onOk={this.closeNewProjectWizardDialog.bind(this)}\n            okDisabled={true}\n            countries={this.state.countries}\n            closeNewProjectWizardDialog={this.closeNewProjectWizardDialog.bind(this)}\n            createNewNationalProject={this.createNewNationalProject.bind(this)}\n          />\n          <NewPlanningGridDialog \n            open={this.state.NewPlanningGridDialogOpen} \n            onCancel={this.closeNewPlanningGridDialog.bind(this)}\n            loading={this.state.loading || this.state.preprocessing || this.state.uploading}\n            createNewPlanningUnitGrid={this.createNewPlanningUnitGrid.bind(this)}\n            countries={this.state.countries}\n            setSnackBar={this.setSnackBar.bind(this)}\n          />\n          <ImportPlanningGridDialog\n            open={this.state.importPlanningGridDialogOpen} \n            onOk={this.importPlanningUnitGrid.bind(this)}\n            onCancel={this.closeImportPlanningGridDialog.bind(this)}\n            loading={this.state.loading || this.state.uploading}\n            fileUpload={this.uploadFileToFolder.bind(this)}            \n          />\n          <FeaturesDialog\n            open={this.state.featuresDialogOpen}\n            onOk={this.updateSelectedFeatures.bind(this)}\n            onCancel={this.closeFeaturesDialog.bind(this)}\n            loading={this.state.loading || this.state.uploading}\n            metadata={this.state.metadata}\n            allFeatures={this.state.allFeatures}\n            deleteFeature={this.deleteFeature.bind(this)}\n            openImportFeaturesDialog={this.openImportFeaturesDialog.bind(this)}\n            openImportFromWebDialog={this.openImportFromWebDialog.bind(this)}\n            selectAllFeatures={this.selectAllFeatures.bind(this)}\n            clearAllFeatures={this.clearAllFeatures.bind(this)}\n            selectFeatures={this.selectFeatures.bind(this)}\n            userRole={this.state.userData.ROLE}\n            clickFeature={this.clickFeature.bind(this)}\n            addingRemovingFeatures={this.state.addingRemovingFeatures}\n            selectedFeatureIds={this.state.selectedFeatureIds}\n            initialiseDigitising={this.initialiseDigitising.bind(this)}\n            newFeaturePopoverOpen={this.state.newFeaturePopoverOpen}\n            hideNewFeaturePopover={this.hideNewFeaturePopover.bind(this)}\n            showNewFeaturePopover={this.showNewFeaturePopover.bind(this)}\n            importFeaturePopoverOpen={this.state.importFeaturePopoverOpen}\n            hideImportFeaturePopover={this.hideImportFeaturePopover.bind(this)}\n            showImportFeaturePopover={this.showImportFeaturePopover.bind(this)}\n            previewFeature={this.previewFeature.bind(this)} \n            openImportGBIFDialog={this.openImportGBIFDialog.bind(this)}\n            marxanServer={this.state.marxanServer}\n            refreshFeatures={this.refreshFeatures.bind(this)}\n          />\n          <FeatureDialog\n            open={this.state.featureDialogOpen}\n            onOk={this.closeFeatureDialog.bind(this)}\n            onCancel={this.closeFeatureDialog.bind(this)}\n            loading={this.state.loading}\n            feature_metadata={this.state.feature_metadata}\n            getTilesetMetadata={this.getMetadata.bind(this)}\n            setSnackBar={this.setSnackBar.bind(this)}\n            reportUnits={this.state.userData.REPORTUNITS}\n            getProjectList={this.getProjectList.bind(this)}\n          />\n          <NewFeatureDialog\n            open={this.state.NewFeatureDialogOpen} \n            onOk={this.closeNewFeatureDialog.bind(this)}\n            onCancel={this.closeNewFeatureDialog.bind(this)}\n            loading={this.state.loading || this.state.uploading}\n            createNewFeature={this.createNewFeature.bind(this)}\n            addToProject={this.state.addToProject}\n            setAddToProject={this.setAddToProject.bind(this)}\n          />\n          <ImportFeaturesDialog\n            open={this.state.importFeaturesDialogOpen} \n            importFeatures={this.importFeatures.bind(this)}\n            onCancel={this.closeImportFeaturesDialog.bind(this)}\n            loading={this.state.loading || this.state.preprocessing || this.state.uploading}\n            setFilename={this.setNewFeatureDatasetFilename.bind(this)}\n            filename={this.state.featureDatasetFilename}\n            fileUpload={this.uploadFileToFolder.bind(this)}\n            unzipShapefile={this.unzipShapefile.bind(this)}\n            getShapefileFieldnames={this.getShapefileFieldnames.bind(this)}\n            deleteShapefile={this.deleteShapefile.bind(this)}\n            addToProject={this.state.addToProject}\n            setAddToProject={this.setAddToProject.bind(this)}\n          />\n          <ImportFromWebDialog\n            open={this.state.importFromWebDialogOpen} \n            onCancel={this.closeImportFromWebDialog.bind(this)}\n            loading={this.state.loading || this.state.preprocessing || this.state.uploading}\n            importFeatures={this.importFeaturesFromWeb.bind(this)}\n            addToProject={this.state.addToProject}\n            setAddToProject={this.setAddToProject.bind(this)}\n          />\n          <ImportGBIFDialog\n            open={this.state.importGBIFDialogOpen} \n            onCancel={this.closeImportGBIFDialog.bind(this)}\n            loading={this.state.loading || this.state.preprocessing || this.state.uploading}\n            importGBIFData={this.importGBIFData.bind(this)}\n            gbifSpeciesSuggest={this.gbifSpeciesSuggest.bind(this)}\n            addToProject={this.state.addToProject}\n            setAddToProject={this.setAddToProject.bind(this)}\n          />\n          <PlanningGridsDialog\n            open={this.state.planningGridsDialogOpen}\n            onOk={this.closePlanningGridsDialog.bind(this)}\n            onCancel={this.closePlanningGridsDialog.bind(this)}\n            loading={this.state.loading}\n            getPlanningUnitGrids={this.getPlanningUnitGrids.bind(this)}\n            unauthorisedMethods={this.state.unauthorisedMethods}\n            planningGrids={this.state.planning_unit_grids}\n            openNewPlanningGridDialog={this.openNewPlanningGridDialog.bind(this)}\n            openImportPlanningGridDialog={this.openImportPlanningGridDialog.bind(this)}\n            exportPlanningGrid={this.exportPlanningGrid.bind(this)}\n            deletePlanningGrid={this.deletePlanningUnitGrid.bind(this)}\n            previewPlanningGrid={this.previewPlanningGrid.bind(this)}\n            marxanServer={this.state.marxanServer}\n          />\n          <PlanningGridDialog\n            open={this.state.planningGridDialogOpen}\n            onOk={this.closePlanningGridDialog.bind(this)}\n            onCancel={this.closePlanningGridDialog.bind(this)}\n            loading={this.state.loading}\n            planning_grid_metadata={this.state.planning_grid_metadata}\n            getTilesetMetadata={this.getMetadata.bind(this)}\n            setSnackBar={this.setSnackBar.bind(this)}\n            getProjectList={this.getProjectList.bind(this)}\n          />\n          <ProjectsListDialog\n            open={this.state.ProjectsListDialogOpen} \n            projects={this.state.projectList}\n            userRole={this.state.userData.ROLE}\n            onOk={this.closeProjectsListDialog.bind(this)}\n            title={this.state.projectListDialogTitle}\n            heading={this.state.projectListDialogHeading}\n          />\n          <CostsDialog\n            open={this.state.costsDialogOpen}\n            onOk={this.closeCostsDialog.bind(this)}\n            onCancel={this.closeCostsDialog.bind(this)}\n            unauthorisedMethods={this.state.unauthorisedMethods}\n            costname={this.state.metadata.COSTS}\n            openImportCostsDialog={this.openImportCostsDialog.bind(this)}\n            deleteCost={this.deleteCost.bind(this)}\n            data={this.state.costnames}\n          />\n          <ImportCostsDialog\n            open={this.state.importCostsDialogOpen}\n            addCost={this.addCost.bind(this)}\n            closeImportCostsDialog={this.closeImportCostsDialog.bind(this)}\n            deleteCostFileThenClose={this.deleteCostFileThenClose.bind(this)}\n            loading={this.state.loading}\n            fileUpload={this.uploadFileToProject.bind(this)}            \n          />\n          <RunSettingsDialog\n            open={this.state.settingsDialogOpen}\n            onOk={this.closeRunSettingsDialog.bind(this)}\n            onCancel={this.closeRunSettingsDialog.bind(this)}\n            loading={this.state.loading || this.state.preprocessing}\n            updateRunParams={this.updateRunParams.bind(this)}\n            runParams={this.state.runParams}\n            showClumpingDialog={this.showClumpingDialog.bind(this)}\n            userRole={this.state.userData.ROLE}\n          />\n          <ClassificationDialog \n            open={this.state.classificationDialogOpen}\n            onOk={this.closeClassificationDialog.bind(this)}\n            onCancel={this.closeClassificationDialog.bind(this)}\n            loading={this.state.loading}\n            renderer={this.state.renderer}\n            changeColorCode={this.changeColorCode.bind(this)}\n            changeRenderer={this.changeRenderer.bind(this)}\n            changeNumClasses={this.changeNumClasses.bind(this)}\n            changeShowTopClasses={this.changeShowTopClasses.bind(this)}\n            summaryStats={this.state.summaryStats}\n            brew={this.state.brew}\n            dataBreaks={this.state.dataBreaks}\n          />\n          <ClumpingDialog\n            open={this.state.clumpingDialogOpen}\n            onOk={this.hideClumpingDialog.bind(this)}\n            onCancel={this.hideClumpingDialog.bind(this)}\n            tileset={this.state.tileset}\n            map0_paintProperty={this.state.map0_paintProperty}\n            map1_paintProperty={this.state.map1_paintProperty}\n            map2_paintProperty={this.state.map2_paintProperty}\n            map3_paintProperty={this.state.map3_paintProperty}\n            map4_paintProperty={this.state.map4_paintProperty}\n            mapCentre={this.state.mapCentre}\n            mapZoom={this.state.mapZoom}\n            createProjectGroupAndRun={this.createProjectGroupAndRun.bind(this)}\n            rerunProjects={this.rerunProjects.bind(this)}\n            setBlmValue={this.setBlmValue.bind(this)}\n            clumpingRunning={this.state.clumpingRunning}\n          />\n          <ImportProjectDialog\n            open={this.state.importProjectDialogOpen}\n            onOk={this.closeImportDialog.bind(this)}\n            loading={this.state.loading || this.state.uploading}\n            importProject={this.importProject.bind(this)}\n            fileUpload={this.uploadFileToFolder.bind(this)}            \n            log={this.log.bind(this)}\n            setSnackBar={this.setSnackBar.bind(this)}\n          />\n          <ImportMXWDialog\n            open={this.state.importMXWDialogOpen}\n            onOk={this.closeImportMXWDialog.bind(this)}\n            loading={this.state.loading || this.state.preprocessing}\n            importMXWProject={this.importMXWProject.bind(this)}\n            fileUpload={this.uploadFileToFolder.bind(this)}\n            log={this.log.bind(this)}\n            setSnackBar={this.setSnackBar.bind(this)}\n          />\n          <ResetDialog\n            open={this.state.resetDialogOpen}\n            onOk={this.resetServer.bind(this)}\n            onCancel={this.closeResetDialog.bind(this)}\n            onRequestClose={this.closeResetDialog.bind(this)}\n            loading={this.state.loading}\n          />\n          <RunLogDialog\n            open={this.state.runLogDialogOpen}\n            onOk={this.closeRunLogDialog.bind(this)}\n            onRequestClose={this.closeRunLogDialog.bind(this)}\n            loading={this.state.loading}\n            preprocessing={this.state.preprocessing}\n            unauthorisedMethods={this.state.unauthorisedMethods}\n            runLogs={this.state.runLogs}\n            getRunLogs={this.getRunLogs.bind(this)}\n            clearRunLogs={this.clearRunLogs.bind(this)}\n            stopMarxan={this.stopProcess.bind(this)}\n            userRole={this.state.userData.ROLE}\n          />\n          <ServerDetailsDialog  \n            open={this.state.serverDetailsDialogOpen}\n            onOk={this.closeServerDetailsDialog.bind(this)}\n            onCancel={this.closeServerDetailsDialog.bind(this)}\n            onRequestClose={this.closeServerDetailsDialog.bind(this)}\n            marxanServer={this.state.marxanServer}\n            newWDPAVersion={this.state.newWDPAVersion}\n            showUpdateWDPADialog={this.openWDPAUpdateDialog.bind(this)}\n            registry={this.state.registry}\n          />\n          <UpdateWDPADialog\n            open={this.state.updateWDPADialogOpen}\n            onOk={this.closeWDPAUpdateDialog.bind(this)}\n            onCancel={this.closeWDPAUpdateDialog.bind(this)}\n            newWDPAVersion={this.state.newWDPAVersion}\n            updateWDPA={this.updateWDPA.bind(this)}\n            loading={this.state.preprocessing}\n            registry={this.state.registry}\n          />          \n          <ChangePasswordDialog  \n            open={this.state.changePasswordDialogOpen}\n            onOk={this.closeChangePasswordDialog.bind(this)}\n            user={this.state.user}\n            onRequestClose={this.closeChangePasswordDialog.bind(this)}\n            checkPassword={this.checkPassword.bind(this)}\n            setSnackBar={this.setSnackBar.bind(this)}\n            updateUser={this.updateUser.bind(this)}\n          />\n          <AlertDialog\n            open={this.state.alertDialogOpen}\n            onOk={this.closeAlertDialog.bind(this)}\n          />\n          <Snackbar\n            open={this.state.snackbarOpen}\n            message={message}\n            onRequestClose={this.closeSnackbar.bind(this)}\n            style={{maxWidth:'800px !important'}} \n            contentStyle={{maxWidth:'800px !important'}}\n            bodyStyle={{maxWidth:'800px !important'}}\n          />\n          <Popover open={this.state.featureMenuOpen} anchorEl={this.state.menuAnchor} onRequestClose={this.closeFeatureMenu.bind(this)} style={{width:'307px'}}>\n            <Menu style={{width:'207px'}} onMouseLeave={this.closeFeatureMenu.bind(this)} >\n              <MenuItemWithButton leftIcon={<Properties style={{margin: '1px'}}/>} onClick={this.openInfoDialog.bind(this)}>Properties</MenuItemWithButton>\n              <MenuItemWithButton leftIcon={<RemoveFromProject style={{margin: '1px'}}/>} style={{display: ((this.state.currentFeature.old_version)||(this.state.userData.ROLE === \"ReadOnly\")) ? 'none' : 'block'}} onClick={this.removeFromProject.bind(this, this.state.currentFeature)}>Remove from project</MenuItemWithButton>\n              <MenuItemWithButton leftIcon={(this.state.currentFeature.feature_layer_loaded) ? <RemoveFromMap style={{margin: '1px'}}/> : <AddToMap style={{margin: '1px'}}/>} style={{display: (this.state.currentFeature.tilesetid) ? 'block' : 'none'}} onClick={this.toggleFeatureLayer.bind(this, this.state.currentFeature)}>{(this.state.currentFeature.feature_layer_loaded) ? \"Remove from map\" : \"Add to map\"}</MenuItemWithButton>\n              <MenuItemWithButton leftIcon={(this.state.currentFeature.feature_puid_layer_loaded) ? <RemoveFromMap style={{margin: '1px'}}/> : <AddToMap style={{margin: '1px'}}/>} onClick={this.toggleFeaturePUIDLayer.bind(this, this.state.currentFeature)} disabled={!(this.state.currentFeature.preprocessed && this.state.currentFeature.occurs_in_planning_grid)}>{(this.state.currentFeature.feature_puid_layer_loaded) ? \"Remove planning unit outlines\" : \"Outline planning units where the feature occurs\"}</MenuItemWithButton>\n              <MenuItemWithButton leftIcon={<ZoomIn style={{margin: '1px'}}/>} style={{display: (this.state.currentFeature.extent) ? 'block' : 'none'}} onClick={this.zoomToFeature.bind(this, this.state.currentFeature)}>Zoom to feature extent</MenuItemWithButton>\n              <MenuItemWithButton leftIcon={<Preprocess style={{margin: '1px'}}/>} style={{display: ((this.state.currentFeature.old_version)||(this.state.userData.ROLE === \"ReadOnly\")) ? 'none' : 'block'}} onClick={this.preprocessSingleFeature.bind(this, this.state.currentFeature)} disabled={this.state.currentFeature.preprocessed || this.state.preprocessing}>Pre-process</MenuItemWithButton>\n            </Menu>\n          </Popover>   \n          <TargetDialog \n            open={this.state.targetDialogOpen}\n            onOk={this.closeTargetDialog.bind(this)}\n            showCancelButton={true}\n            onCancel={this.closeTargetDialog.bind(this)}\n            updateTargetValueForFeatures={this.updateTargetValueForFeatures.bind(this)}\n          />\n          <GapAnalysisDialog \n            open={this.state.gapAnalysisDialogOpen}\n            showCancelButton={true}\n            onOk={this.closeGapAnalysisDialog.bind(this)}\n            onCancel={this.closeGapAnalysisDialog.bind(this)}\n            closeGapAnalysisDialog={this.closeGapAnalysisDialog.bind(this)}\n            gapAnalysis={this.state.gapAnalysis}\n            preprocessing={this.state.preprocessing}\n            projectFeatures={this.state.projectFeatures}\n            metadata={this.state.metadata}\n            marxanServer={this.state.marxanServer}\n            reportUnits={this.state.userData.REPORTUNITS}\n          />\n          <ShareableLinkDialog\n            open={this.state.shareableLinkDialogOpen}\n            onOk={this.closeShareableLinkDialog.bind(this)}\n            shareableLinkUrl={window.location + \"?server=\" + this.state.marxanServer.name + \"&user=\" + this.state.user + \"&project=\" + this.state.project}\n          />\n          <AppBar\n            open={this.state.loggedIn}\n            user={this.state.user}\n            userRole={this.state.userData.ROLE}\n            infoPanelOpen={this.state.infoPanelOpen}\n            resultsPanelOpen={this.state.resultsPanelOpen}\n            openProjectsDialog={this.openProjectsDialog.bind(this)}\n            openFeaturesDialog={this.openFeaturesDialog.bind(this)}\n            openPlanningGridsDialog={this.openPlanningGridsDialog.bind(this)}\n            toggleInfoPanel={this.toggleInfoPanel.bind(this)}\n            toggleResultsPanel={this.toggleResultsPanel.bind(this)}\n            showToolsMenu={this.showToolsMenu.bind(this)}\n            showUserMenu={this.showUserMenu.bind(this)}\n            showHelpMenu={this.showHelpMenu.bind(this)}\n            marxanServer={this.state.marxanServer.name}\n            openServerDetailsDialog={this.openServerDetailsDialog.bind(this)}\n          />\n        </React.Fragment>\n      </MuiThemeProvider>\n    );\n  }\n}\n\nexport default App;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\n// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport default function register() {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport 'typeface-roboto';\nimport registerServiceWorker from './registerServiceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\nregisterServiceWorker();\n","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHAAAAAoCAYAAAAmPX7RAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsIAAA7CARUoSoAAABR9SURBVHhe7VsJeFXlmX7vvia5CQkJS1hEkE2qyL4rVQRFrQtDERemFhWdOn1Gpy2tVYvbtFOdqYK7osKwiYJaBBfCFkGhCAKyr0kI2e69yU3uvvT9zjk3uUAggVCmPA8vHu9Z/vMv3/59/4kuQeAiLljotd+LuEBxkYHnGTu9MdSE49pVy3GcCY3HE5i9L4S4jg94xDnOlC4WGA28aATzD4bgiyYgj/2RBO691AqnSW270xtFQVkUVgMQ4whZZh1u62hRnjWGw7UxfFoSho2dsUt0sOlxfXuz9rRpbK6Kom8rI5aXRhAggX7CsWJcj0HfMPcYlxpk5w7TuZfbSDQKX52fdFPHE1rK2ELcOAlp0OsVWqypMmDM+hASP7HAE4iCzernGI3FSGsDhCMmoxFOh025fzoc7wPZm26hB8qo0mcMqLstA3YZuRFkLvHA62djoUcwgWK2bZdmVJ69tieIB9bXARaNgCTcDzdkoEem+vxELDocxoQCH2Ble447orURq69N156eHiNX1uCBSyz4a3EYNVGO3d+On22qQ6ZZj/s7mjGibYMgzD8cQgYJFuIwt5yBgDQFT7UPVqsZZpMJoXAYgWAYrnQnmZGAu7oGOZkZCnPHrvJheXEUHw23Y3xuAr5wFGlOB8mtQ2lFJdrkZLO3BMqq3Nr56XG8KHJRNmqKQnT55aHXJKoxuETbpK2F3fDXkNLWImpZ/4yHVY+xG8jQU4C0TmmvQ5qmyafDU1v8eH5nAOUUoh3VMTzdx4bpPa34piKKxUOd6J5mQB9q5dRv61AaUM3WRGqmDPXhoRBepbU5VxDmmIwGRdNM1CLRIDkXjbIY9Hyux883+bH8GKWTdC2opFZajPXt9BQqOZdfvXIts2wazWt1LkAlPkz7P3t/ULvRMty4xofhuUaIDr1DjXvichs6pRsxqLUJt3SywGbU4/HeNrgoEK8PcMBpbBCIMflmvNDPgTYUkld3BbS7LUUC4UgMsVgc4aj8RpVzxZzQsvVd4cObIjCa0qdzPolgSGGaQMxs8ojxSDWMp8P5Y6CoNzVrysYAbX3zJtcY5M2NFRGU1MWx+GiE5iqBQbkmmDQ/IqgOxfFZUZj+PIgtlRHl3kkazY5WHIvgO2ru3hoSuYWQefkDAdTxCASDCITCMMSCKDzih2tZDN/5aNvFwgjoTu5tTzOe0OHBGW9i4469pE4CfjK0zs8+eAgTm4PzyEBCTCxHnLyhVrtx5niLTKkiTw744xhIf/qbH9m1J4CXjBv2RQ1c9OPjVtdiSmEdrlxRA90CN17ZfbzmZzNIeqi7FZ9SCPbUkljNlPhTQXyYKz0N6fRnGWkOtHU5sKHGgmFrOFkbzY8SCPIgH0e3NaFLKysMJjPeeup+TP+fBdi88xDa5eUo/lD6ENPbHJw/BgqB5KAmLDgYxnY3V3IWeO9AGPkMZpcOd+LHeQ0BUQmZkPmhF4U00yBzbulsxtdjGQRJxMkxp/3Nj1vXM0hKQS4DpiXDnPiePnN7dfMk/nRI6rhYgyJq3GAKD+y8m3xAU2rSJfDlqDQ8yvkowTDbPvHg7Zj42F8wf1mh2o5IvtIUzg8DybieJCpoMhQm8nzUmrPTQnl9TWUMd35dh7b2Biltv8yrEEMBg5pRWQYMpj8E0xvlIBM/2hvG63sbNDGb/vHft9BksVN6He3u2SHBf+VuD8oZPaK2GlesCasRdTKwk3whpscPg2nad3jw521BRp1eHC2rQKc2WejYNgf/O3cFKio9qPR46U+bJ+Dnh4FUihtzjAzpSVCZFwldxahw5u4zCyBK62IY38mMZ3cGsWtchnYXWMXcbwDN6WSmDNO6WvDWYDv6uAxwB+NYMNiBPzM6vYcaeXMXMz4pUn1iEn9g8LOU6Uf3tJaRQqLQ1q2ylGNZbQbckqdovFOkjr56x7VOuDJdmPJtHA/3sqBNrgvZvM6k6ZXgJc1uwYbt+5V7ZlPj6daJOD8MJNzUglcZ+SmLkYMO/WGaEUUym4k/7ArhnvYmvNjXjgWHGjRp+dEw+rn0GEKtuzrbiNvzTbi6jRlZTF0mMD8ckmXENRSggS4jahlAHaP/FEhqURGIYQHN6Es7W5hSKMtQ1/IUUxtI1JtkYCiBV/o70TPTgCHUzO7MS1/q76CWsRl93a7DpUrEKkzbdaBEe6l5OG8MjGguZuYVDDq4IGVxdAIjGGwIkms9HQZk6PHo9iCyaA6/T/FZH5dGMetABNNoDu8orEXGPC+WldCEEeYPPBj8lQ/3MAedviOIVWVR+ic16syjiXuejAvzcmsLI9E4hbKswo2A14OtXpqZJGU5za50xQ/k1aKwyIu9pTF8fVUYbg/NLU1ulOnG4s83wGJmJM08cvPOw6itq1NSkubgvDEwiWmXWdHeyWFlfnRha2n+vquKwpGSp50KUy61Yt7BEOYdCOLOzg1luTw7+xN3KKmCRAY0hy/vp0ZR2yJSKbLxvlQK5Dn/kwhUIGavLzX2p+tqMbNfQzR7NpByWNvcbNhcmfVuTwEtz4zunKszC/PLLRjVnsFWditkZWaifV5rvLl4JdOIg2SgUZmPpBBOh+Ofz4Sm4nOaLPEJCmhKb6N2KPFH6sIbwb7qKA7dnIGNjDiP1cbg1fq4hgm9UnAVaH1EKfk+ea7QQbspppsr7pyuBj//vSOAKfTLz1xlR8Gxs4uKk5Cu1cSdQ0gVRaYjNymYQ1zKbbxK4XukYwPJV27YhneWroVVY57yjhaISVDUHDTJwDPhcHMHlXroHSkBzUH6pEe30W+IhpwG7RwG3MfcruDqNLywP0wzqpqZ3/WyUSB4IgQT8MfBvtJE81L5QoZOZZCTxB+ZGw7PNeN9aqtLSoctgIxcS+0Bk/e+DjJSm4pZn4AzHkQ8FEKU2jhIK28WfLMdv315IfJaqTVSmXuATnHc8Cv4NFEvDE3heP6wI0X9U/jgP6UppnlKfcbxLMrLzcPCoWlqeK9J6WbxQZr0nQo2trOSMaNX+zCEAUEJtbBMq3HOHcYAqU4Ix/6ojdfSNCqaJz9yj2O1pel8TTOVVYxQ63j72e0BlITiGJFHgWoBZOaq5unwy24UKE1wwnEdahJG1PG6S5oR0UAAP3t8Fp6Y9QGyM5wq8whOBaFQBA9MuE5JIZL3m8JJClbvi+SHhCj0NM5BdzChlLOS1knaZlFDzgSvDSLR2Y+CJpiXxMKhDgzMMOLtAyFcSl/X4zMmy8Qk+sQPRtA0i88js/61i6ppj9Lngpp6JRlefKOkHjpcv8pHE5tAa661lFr5xUgKU4uRgM1qpsBYcGtHK1Nd0k1IF01gW8iMNIeFQZMBR45W4fs9R+By2o5j0tEKD555ZIJyLjsaUtRuDk5i4H35nIRsyAlnKO03fcMoUaNxKsas5X0lKOBB5g06CwmeSiJ3lvzrDFIJHRfm4Ctlt7nQhhp1dycT0xF1l0P2G+N3ZmLddemwaoL4x742rLo+HZuvTYfOoMNWMnMno9BcuwGLhjhQQg2mArYYwgyDXhPgeBRbRjtwdStxEwnMOqgqQWU4iiEDLseVPS+h9WoY9CgT+kcmj8WIfj20Owr1m4WTGPg0E1sxh4rZIbGEtrp5bkxkeP6brQFla0Zqi5ukZCX1PWlHHzZ3ILXpLCD+TNFC6acZkDLV7y63w7bIg/yPq5VA5k36w+T7QsihuQ3CJNcjmRMm8eQWP37FaFY3pwqjqInvc96ttai0JZDN46NllSiv8qC0ygtH0IOVQ2K4rZMFnx0Koc7tRiemLTtLKnDlZfmKuRRTKdWYhyaNwd3jh2H/4aNKalHGPppbiWn0o6Yvi8O4dhU1TIIAUWVpIkIkLUU0RNBE84S7JP5zfWz4tTA+BbMZGEzZKBu6JA6l8J62JsweShPXCB5mu5kHyIRkIEGNvoE+7NNRpzdt4gO/c8fQwaHDu4fCKOR5hGP157v9MwzKVGW34VumKXFq5FAm9OPzjKgi0zsx9RggpbZzBG9NLdJoFkULZXc+GArTbKr+dtZ2L7LTHUreubq4lkGXGcN+/l/olp+LX993My7r3E5pV0Hm5WRlKudSkpOqTlM45VdpmyqjGEutqxQ/J+YoVUhFQ0koPSc0+0o77krJyZJQduRlA1cYSIbc0d6EhSNOwRBOwfCBF3G2S5rkkTlGrGpiR76UEdYHhyP4kAInn32MphkfkW1AJQOUMe3MSuq3pDiCNpznBjJ3xdEI/Jz3Te1MysZuO7HF5wgqA+3K5qwwULaT0jUGhv0+mO3q2ievrcac4Q1lwEgkAhN9nkC0r7XGQNmRz20JA5NYVxbBUhKhkFFikMGBEKof/daNbUwYR6YoBG8E2z1RLC2K0BdxkmR4T+ZeN3VoMGUnorA8gjVlUZip3ZLDXULi3tGIYDSFWUwNpFiQiid/CODJnk1/X9ISyPcwkoSLj07QMkllxmBQBSQYDMNutSgpxbJjCfTJ0COXUwxFY2wbJwOZB/KfPxCE3WalPKssyc0+Bwy8iHOPPVSGbloxoaW4yMALHOfOCVzE/wsuMvACxz+MgZctr2au5dau/nlRzEi2/Awyecm/9/li9bWHWgZ2yU8WBUfqYqhJ7p0R0nZDZaS+8C7wcLzDbCfVoFTIu0U8Up1aMbMACfDKU8ZIxT+MgbIL/v7glm3RnA/kL6nGyHXHfytzOlSS+F0pmAuZnAtuXu1D20Ue5XwPmdXxXTcKGU0LRn9Vg658NvhzHzLnuTFXtrgI2ZvsNN+D+zf6lWtBhILQcZ4HHZhOVQXUys0vNtUhf6EHw1b6kMv2079raJ9EowycvtWPtI+86LOiBjuYBAuGrfVhKjucyMEzlnrxn1pnfQtqcO+3aimryh+Hmc8KmHoUVsYwr1T9fOFmEmgqk/Whq3z40w51J33ChlqkL/Fi4Jc1OFCtjvHU9gCuZpundwTg5PgTmIcK1nMOWX+txrwDITjYf58varDPG8XwAhKG128w50zifbbJ+6QaGZ94sVgj8gymEYPZ7+Pb/Ehn+1EkiGDCerUcuLs6jgc3n0ycxpBrYwrQ1oRl5eqcV8rHWSY9/GRsUS0Jb9dhDNOr1/eFsPJIBHtudSExKQu/6G3F5M/Vum0r5qWyZzmnpOHzjpn7uAbZJ7Xrkc45fU2te2lLAJ/+OA2JiVl4Z7gDz62vU/6EIBUnMfBhMum5rQH8vqcVUpvurQ26xxfHG7tD6MwJDsow4E9sIxI3yGnAuySQYE5RGBFvDMNaGUj0CFaXqoPt8vJdLugIw+eenPg1JPyi/WE828OK3TQNXZarY5RTAFYxKT9AQtxOIi3aG8SSI2GGyjQ7zCufIqN+f6kF27iIrhSuUZlGtOWCp0pdlpBP6+9eU4txzFEn5ppwOxlVzL72cowNJWHs4hru5rPVzGtfZN/TOlhg4RrbkSmTeL+56J1pULeypPBAzclz6PBFZRSrydTWLiOJqsNcCk8e6dCV14Lnf2TH0hvUBF4sdl/SULLV1WSUYAZpe5fkydEEc2EdFsu3O2xzg9SmCfm7k4/HZyD/hOLDSQyceSiMoSTev/B4XBJiEnUbiSed9uDEn+tjx3sDaBo5eZG4h7qxDSfkpu1eejSCDtnyubjarUXKcITk+q2Z9xTd5MI1eSYUUDOfuMKGh9n/7tHpzIJj+Ir3lJ0Q0uXtgU7MVmqrOhwLxuUjNuX+skEO/KqXDT24sN5k3gz28Xh3Juh8TzTgBQqJ02XAY53N+A/Z9zPr8cZBaq30Sy1ZNMSJlwewX9L0EMcc1c4E+auE9k4dhp8BA39K2sjHwLMpsJdyXZM6mlF4LIKvea8XaSQoCiaQn/yQl5CtsGQhQzK3CtLs7o4mvLgnhBCFwO2JYdolfC7Wk6/todDlyGZBCsaTmTnW0zBQKghyYxcd53U0Ob/c4kcvEtxCQZNBk85V9rZELeSvpHqRmGIOXjwYRkFJCNO7nVw9kfcytJHEhwjDL9Em0kq4Q0Z7ySiN3wqCSllNeaSCl3WUToGsUR4L/MkT/tQyeJCPlibSPI+lVvbNMaANGSftZRJhEiqJZL/yerKL5mJwjgl+EngO1zyWRL2TzP8Lz/fTFE8icwXtuL5S+fZHgxS7t2raJn9DUsJnv+1hU4R+Bl3GqE5mdWdN5sVfKXzLWlKxme9Xn/CnaccxUMpAsg0TYSe7xruwm8cr/ezolmUE6XsCdPUMfaSzBU/Tf4GaN/kU5bLk6/lpZDgl622aRsHiw/RT7Odyaq6U0BqDQmv+7/jlHA+pWil9k0nfXJ+B/dT2Zy+34YHuViVSPBWU70FPMe6pIGXBDLqOr2iKhXl9W5sQoqU6RPcxqLVqMse1M6LYzQhXix4fozJcwYBEIMIT5/LlW55saukz3wfwJOdZpkWqYTLudgpGgFq5lvGEYA4tyVV8f+cJHyAfx0DBejrLGmqg7r0q6Oa6MUJz+BIGV2ncj0j4y4mJMgmUzVMuoAsJ6JDiNeFhe7fW3s3z1FD93f52rKb50f2fGxOp6Xdy8t34brlIiSYpitbwXIrP5SKJHC8pfJU8l/4FAe2ZzG0hzWM2Jd/2vhu6+W5cv6wGpTTzShtKfL1AU9RrtPf70uRuPBjBMPmKurkgA7LEPHJNA7Wtq2wpjfG0Nxkr+A216yoyV6JHWeeL20N49Tq1oK3MXVvMBKknUxNGsq1PBI191nLNI9nvlF5WjFjGdIx93MVo998GOTEoRxWQekgp7UQEyaFPqeNflIYTiXhcucdcJrGRhyDIBGY5n3lo55L46lg4UcSRk9jiiSY2VPB94m9VkcQ67d0kDrHth0WhxLeVahvB3upoYoWMSciocl5aF0tUcz5yXhtW57KJfW12q/2VkTvyTOacxErOZWlxKOELqfPbXRNNUJLr11JAUT/gU+capm2TtjLHM0Ex578l5Z3d7G+L9+Q+hGafHQslymnrk5C232jv+jjvLV51LkLPdRWRRJRzSmIn+1xGW7yXa2gMF2uhFzhOMqEXcWHhIgMvaAB/B9DAT9auTzQiAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,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\"","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\n//application level global constants\nmodule.exports = Object.freeze({\n    MARXAN_REGISTRY: \"https://marxanweb.github.io/general/registry/marxan.json\", //url to the marxan registry\n    DOCS_ROOT: \"https://docs.marxanweb.org/\",\n    ERRORS_PAGE: \"https://docs.marxanweb.org/errors.html\",\n    SEND_CREDENTIALS: true, //if true all post requests will send credentials\n    TORNADO_PATH: \"/marxan-server/\",\n    TIMEOUT: 0, //disable timeout setting\n    MAPBOX_USER: \"blishten\",\n    MAPBOX_STYLE_PREFIX: 'mapbox://styles/',\n    PLANNING_UNIT_STATUSES: [1, 2, 3],\n    IUCN_CATEGORIES: ['None', 'IUCN I-II', 'IUCN I-IV', 'IUCN I-V', 'IUCN I-VI', 'All'],\n    //constants for creating new planning grids\n    DOMAINS: [\"Marine\", \"Terrestrial\"],\n    SHAPES: ['Hexagon', 'Square'],\n    AREAKM2S: [10, 20, 30, 40, 50, 100],\n    //layer source names\n    PLANNING_UNIT_SOURCE_NAME: \"marxan_planning_units_source\",\n    WDPA_SOURCE_NAME: \"marxan_wdpa_source\",\n    //layer names\n    PU_LAYER_NAME: \"marxan_pu_layer\", //layer showing the planning units\n    STATUS_LAYER_NAME: \"marxan_pu_status_layer\", //layer showing the status of planning units \n    COSTS_LAYER_NAME: \"marxan_pu_costs_layer\", //layer showing the cost of planning units\n    RESULTS_LAYER_NAME: \"marxan_pu_results_layer\", //layer for either the sum of solutions or the individual solutions\n    WDPA_LAYER_NAME: \"marxan_wdpa_polygon_layer\", //layer showing the protected areas from the WDPA\n    LAYER_TYPE_SUMMED_SOLUTIONS: 'summed_solutions',\n    LAYER_TYPE_PLANNING_UNITS: 'pus',\n    LAYER_TYPE_PLANNING_UNITS_COST: 'cost',\n    LAYER_TYPE_PLANNING_UNITS_STATUS: 'status',\n    LAYER_TYPE_PROTECTED_AREAS: 'pas',\n    LAYER_TYPE_FEATURE_LAYER: 'feature',\n    LAYER_TYPE_FEATURE_PLANNING_UNIT_LAYER: 'feature_puid',\n    //planning unit statuses\n    PU_STATUS_DEFAULT: {fillColor:'none', strokeColor:'lightgray', label: 'Default'},\n    PU_STATUS_LOCKED_IN: {fillColor:'none', strokeColor:'blue', label: 'Locked in'},\n    PU_STATUS_LOCKED_OUT: {fillColor:'none', strokeColor:'red', label: 'Locked out'},\n    //layer default styles\n    PU_LAYER_OPACITY: 0.6,\n    PU_COSTS_LAYER_OPACITY: 0.1,\n    STATUS_LAYER_LINE_WIDTH: 1.5,\n    WDPA_FILL_LAYER_OPACITY: 0.2,\n    FEATURE_LAYER_OPACITY: 0.9,\n    FEATURE_PLANNING_GRID_LAYER_OPACITY: 0.9,\n    RESULTS_LAYER_OPACITY: 0.8,\n    COST_COLORS: ['rgba(255,255,204,0.8)', 'rgba(255,237,160,0.8)', 'rgba(254,217,118,0.8)', 'rgba(254,178,76,0.8)', 'rgba(253,141,60,0.8)', 'rgba(252,78,42,0.8)', 'rgba(227,26,28,0.8)', 'rgba(189,0,38,0.8)', 'rgba(128,0,38,0.8)'],\n    UNIFORM_COST_NAME: 'Equal area',\n    //an array of feature property information that is used in the Feature Information dialog box - showForOld sets whether that property is shown for old versions of marxan\n    FEATURE_PROPERTIES: [{ name: 'id', key: 'ID', hint: 'The unique identifier for the feature', showForOld: false, showForNew: false },\n        { name: 'alias', key: 'Alias', hint: 'A human readable name for the feature', showForOld: false, showForNew: false },\n        { name: 'feature_class_name', key: 'Feature class name', hint: 'The internal name for the feature in the PostGIS database', showForOld: false, showForNew: false },\n        { name: 'description', key: 'Description', hint: 'Full description of the feature', showForOld: false, showForNew: false },\n        { name: 'creation_date', key: 'Creation date', hint: 'The date the feature was created or imported', showForOld: false, showForNew: false },\n        { name: 'tilesetid', key: 'Mapbox ID', hint: 'The unique identifier of the feature tileset in Mapbox', showForOld: false, showForNew: false },\n        { name: 'area', key: 'Total area', hint: 'The total area for the feature in Km2 (i.e. globally)', showForOld: false, showForNew: false },\n        { name: 'target_value', key: 'Target percent', hint: 'The target percentage for the feature within the planning grid', showForOld: true, showForNew: true },\n        { name: 'spf', key: 'Species Penalty Factor', hint: 'The species penalty factor is used to weight the likelihood of getting a species in the results', showForOld: true, showForNew: true },\n        { name: 'preprocessed', key: 'Preprocessed', hint: 'Whether or not the feature has been intersected with the planning units', showForOld: false, showForNew: true },\n        { name: 'pu_count', key: 'Planning unit count', hint: 'The number of planning units that intersect the feature (calculated during pre-processing)', showForOld: true, showForNew: true },\n        { name: 'pu_area', key: 'Planning grid area', hint: 'The area of the feature within the planning grid in Km2 (calculated during pre-processing)', showForOld: true, showForNew: true },\n        { name: 'target_area', key: 'Target area', hint: 'The total area that needs to be protected to achieve the target percentage in Km2 (calculated during a Marxan Run)', showForOld: true, showForNew: true },\n        { name: 'protected_area', key: 'Area protected', hint: 'The total area protected in the current solution in Km2 (calculated during a Marxan Run)', showForOld: true, showForNew: true }\n    ]\n});\n"],"sourceRoot":""}